<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lightning Ledgerz - Budget. Save. Build.</title>
    <meta name="description" content="Lightning Ledgerz LLC â€” Expert FP&A advisory in Las Vegas. Budget vs. Actual reporting, financial modeling, KPI dashboards, and fractional CFO services. Budget. Save. Build.">
    <meta name="keywords" content="FP&A advisory Las Vegas, financial planning analysis, budget vs actual reporting, financial modeling, fractional CFO, KPI dashboard, bookkeeping Las Vegas, Lightning Ledgerz">
    <meta name="author" content="Zachary Prizant, Lightning Ledgerz LLC">

    <!-- Open Graph (social + Google preview) -->
    <meta property="og:title" content="Lightning Ledgerz â€” Budget. Save. Build.">
    <meta property="og:description" content="Expert FP&A advisory services in Las Vegas. Financial modeling, dashboards, and strategic reporting crafted by an expert â€” not an algorithm.">
    <meta property="og:image" content="https://lightningledgerz.com/preview.webp">
    <meta property="og:url" content="https://lightningledgerz.com">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Lightning Ledgerz LLC">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Lightning Ledgerz â€” Budget. Save. Build.">
    <meta name="twitter:description" content="Expert FP&A advisory: financial modeling, KPI dashboards, budget vs. actual reporting. Las Vegas, NV.">
    <meta name="twitter:image" content="https://lightningledgerz.com/preview.webp">

    <!-- JSON-LD: Local Business Schema for Google -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ProfessionalService",
      "name": "Lightning Ledgerz LLC",
      "description": "Expert FP&A advisory services including financial modeling, budget vs. actual reporting, KPI dashboards, and fractional CFO services.",
      "url": "https://lightningledgerz.com",
      "logo": "https://lightningledgerz.com/LightningLedgerzLogo.png",
      "image": "https://lightningledgerz.com/preview.webp",
      "telephone": "+17025502513",
      "email": "zprizant@lightningledgerz.com",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "732 S 6th St, Ste R",
        "addressLocality": "Las Vegas",
        "addressRegion": "NV",
        "postalCode": "89101",
        "addressCountry": "US"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 36.1699,
        "longitude": -115.1398
      },
      "founder": {
        "@type": "Person",
        "name": "Zachary Prizant",
        "jobTitle": "Founder & CEO"
      },
      "areaServed": "United States",
      "serviceType": ["FP&A Advisory", "Financial Modeling", "Budget vs. Actual Reporting", "KPI Dashboard Development", "Fractional CFO Services"],
      "priceRange": "$$$",
      "openingHours": "Mo-Fr 09:00-18:00",
      "sameAs": [
        "https://lightningledgerz.com"
      ]
    }
    </script>

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.47.10/dist/umd/supabase.min.js"></script>
    <script>
        if (typeof window.supabase !== 'undefined') {
            console.log('Supabase library loaded successfully!');
        } else {
            console.error('ERROR: Supabase library failed to load!');
        }
    </script>

    <!-- Calendly Widget -->
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>

    <style>
        :root {
            --red: #ff3333;
            --red-dark: #cc0000;
            --red-light: #ff6666;
            --gold: #ffd700;
            --gold-light: #ffed4e;
            --diamond: #ffffff;
            --black: #000000;
            --gray-dark: #1a1a1a;
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            /* SaaS Colors */
            --saas-blue: #3B82F6;
            --saas-blue-dark: #2563EB;
            --saas-navy: #0B1220;
            --saas-bg: #F8FAFC;
            --saas-card: #FFFFFF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-primary);
            background: var(--saas-bg);
            color: #1a1a2e;
            overflow-x: hidden;
        }

        /* ============================================
           VIDEO BACKGROUND
        ============================================ */
        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2;
            overflow: hidden;
            background: #000;
        }

        .video-background iframe {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 177.77vh;
            height: 100vh;
            min-width: 100vw;
            min-height: 56.25vw;
            pointer-events: none;
            border: none;
        }

        .video-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(ellipse 80% 70% at 50% 45%,
                rgba(0, 0, 0, 0.8) 0%,
                rgba(0, 0, 0, 0.6) 35%,
                rgba(0, 0, 0, 0.3) 60%,
                transparent 100%);
            z-index: 0;
            pointer-events: none;
        }

        .video-section {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            background: #000;
        }

        .video-section iframe {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 177.77vh;
            height: 100vh;
            min-width: 100vw;
            min-height: 56.25vw;
            pointer-events: none;
            border: none;
        }

        .video-section .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }

        .video-section .video-content {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            text-align: center;
            padding: 20px;
            color: #fff;
        }

        /* Hide package sidebar for clean SaaS design */
        .package-sidebar {
            display: none;
        }

        /* Hide old hero section */
        .hero {
            display: none;
        }

        /* ============================================
           NAVIGATION - Transparent initially, White on scroll
        ============================================ */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: transparent;
            padding: 0.8rem 2rem;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        nav.nav-scrolled {
            background: #fff;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .logo {
            cursor: pointer;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo:hover {
            transform: scale(1.02);
        }

        .logo img {
            height: 52px;
            padding: 3px 5px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        nav.nav-scrolled .logo img {
            background: rgba(30, 58, 95, 0.9);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
            list-style: none;
        }

        .nav-links a {
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: color 0.3s ease;
            cursor: pointer;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--red);
        }

        /* When nav is scrolled (white background), use dark text */
        nav.nav-scrolled .nav-links a {
            color: #1e3a5f;
            text-shadow: none;
        }

        nav.nav-scrolled .nav-links a:hover,
        nav.nav-scrolled .nav-links a.active {
            color: var(--red);
        }

        .nav-cta {
            background: var(--red);
            color: white;
            border: none;
            padding: 0.6rem 1.3rem;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .nav-cta:hover {
            background: var(--red-dark);
            transform: translateY(-1px);
        }

        .nav-phone {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2rem;
            margin-left: 15px;
            cursor: pointer;
        }

        /* Nav Contact Info */
        .nav-contact-info {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-right: 15px;
        }

        .nav-contact-info a {
            color: #fff;
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 500;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        .nav-contact-info a:hover {
            color: var(--red);
        }

        /* When nav is scrolled (white background), use dark text */
        nav.nav-scrolled .nav-contact-info a {
            color: #4B5563;
            text-shadow: none;
        }

        nav.nav-scrolled .nav-contact-info a:hover {
            color: var(--red);
        }

        @media (max-width: 1100px) {
            .nav-contact-info a:last-child {
                display: none; /* Hide email on smaller screens */
            }
        }

        @media (max-width: 900px) {
            .nav-contact-info {
                display: none; /* Hide entire contact section on mobile */
            }
        }

        /* Mobile menu toggle */
        .nav-mobile-toggle {
            display: none;
            background: none;
            border: none;
            color: #fff;
            font-size: 2rem;
            cursor: pointer;
            padding: 10px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            z-index: 1001;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        nav.nav-scrolled .nav-mobile-toggle {
            color: #1e3a5f;
            text-shadow: none;
        }

        /* Mobile phone in nav - hidden on desktop */
        .nav-mobile-phone {
            display: none;
        }

        @media (max-width: 900px) {
            nav {
                position: fixed !important;
                top: 0;
                left: 0;
                right: 0;
                z-index: 10000;
                background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.3) 70%, transparent 100%);
                box-shadow: none;
            }
            nav.nav-scrolled {
                background: #fff;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }
            /* Mobile phone number */
            .nav-mobile-phone {
                display: block;
                color: #fff;
                text-decoration: none;
                font-size: 0.95rem;
                font-weight: 600;
            }
            nav.nav-scrolled .nav-mobile-phone {
                color: #1e3a5f;
            }
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(0, 0, 0, 0.98);
                flex-direction: column;
                padding: 20px;
                gap: 15px;
                border-top: 2px solid var(--red);
                z-index: 9999;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            }
            .nav-links.active {
                display: flex;
            }
            .nav-links li { list-style: none; }
            .nav-links a {
                display: block;
                padding: 15px 10px;
                font-size: 1.2rem;
                touch-action: manipulation;
                color: #fff !important;
            }
            .nav-links a:hover {
                color: var(--saas-blue) !important;
            }
            .nav-cta { display: none; }
            .nav-mobile-toggle { display: block; }
            /* Add padding to body so content isn't hidden under fixed nav */
            body { padding-top: 70px; }
            /* Show Get Started in mobile menu */
            .mobile-only { display: list-item !important; }
            .mobile-cta {
                background: linear-gradient(45deg, var(--red), var(--red-light)) !important;
                color: white !important;
                border-radius: 25px !important;
                text-align: center !important;
                font-weight: 700 !important;
                padding: 15px 20px !important;
                margin-bottom: 10px !important;
            }
            /* Package links in mobile nav */
            .nav-package-divider {
                border-top: 1px solid rgba(255,255,255,0.2);
                margin: 10px 0 !important;
                padding: 0 !important;
            }
            .nav-package-link {
                display: flex !important;
                align-items: center;
                gap: 8px;
                padding: 12px 15px !important;
                border-radius: 8px;
                font-weight: 600 !important;
                font-size: 1rem !important;
            }
            .nav-package-link.basic {
                background: rgba(255, 51, 51, 0.15);
                border: 1px solid var(--red);
                color: var(--red) !important;
            }
            .nav-package-link.gold {
                background: rgba(218, 165, 32, 0.15);
                border: 1px solid var(--gold);
                color: var(--gold) !important;
            }
            .nav-package-link.diamond {
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid #fff;
                color: #fff !important;
            }
        }

        /* Hide mobile-only items on desktop */
        @media (min-width: 901px) {
            .mobile-only {
                display: none !important;
            }
        }

        /* ============================================
           USER WELCOME & PLAN BADGE
        ============================================ */
        .user-welcome {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-left: 15px;
        }

        #nav-welcome-text {
            color: #fff;
            font-size: 0.95rem;
            font-weight: 500;
            white-space: nowrap;
        }

        .plan-badge {
            padding: 4px 14px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }

        .badge-basic {
            background: var(--red);
            color: #fff;
        }

        .badge-gold {
            background: linear-gradient(45deg, var(--gold), var(--gold-light));
            color: #000;
        }

        .badge-diamond {
            background: linear-gradient(45deg, #fff, #e0e0e0);
            color: #000;
        }

        @media (max-width: 900px) {
            .user-welcome {
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(0, 0, 0, 0.95);
                padding: 12px 20px;
                justify-content: center;
                border-bottom: 1px solid var(--red);
                margin-left: 0;
            }
        }

        /* ============================================
           PACKAGE SIDEBAR (Top Right under Nav)
        ============================================ */
        .package-sidebar {
            position: fixed;
            right: 20px;
            top: 70px;
            z-index: 999;
            display: flex;
            flex-direction: column;
            gap: 8px;
            pointer-events: auto;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .package-sidebar.hidden {
            opacity: 0;
            transform: translateY(-20px);
            pointer-events: none;
        }

        .package-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #fff;
            min-width: 140px;
            pointer-events: auto;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
            text-decoration: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .package-btn.basic {
            background: rgba(0,0,0,0.3);
            color: #fff;
        }

        .package-btn.basic:hover {
            background: var(--red);
            color: #fff;
            transform: translateX(-5px);
        }

        .package-btn.gold {
            background: rgba(0,0,0,0.3);
            color: #fff;
            font-weight: 700;
        }

        .package-btn.gold:hover {
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            color: #000;
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }

        .package-btn.diamond {
            background: rgba(0,0,0,0.3);
            color: #fff;
        }

        .package-btn.diamond:hover {
            background: #fff;
            color: #000;
            transform: translateX(-5px);
        }

        /* Active/Selected states for sidebar buttons */
        .package-btn.basic.active {
            background: var(--red);
            color: #fff;
        }

        .package-btn.gold.active {
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            color: #000;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }

        .package-btn.diamond.active {
            background: #fff;
            color: #000;
        }

        /* Highlight effect for selected package cards - simulates hover */
        .package-card.highlight {
            transform: translateY(-15px) scale(1.05) !important;
            box-shadow: 0 0 60px rgba(255, 51, 51, 1), 0 0 100px rgba(255, 51, 51, 0.8), 0 20px 50px rgba(255, 51, 51, 0.6), inset 0 0 30px rgba(255, 51, 51, 0.3) !important;
            border-color: var(--red-light) !important;
            z-index: 100 !important;
            position: relative !important;
            animation: pulseHighlight 0.8s ease-in-out infinite !important;
        }

        .package-card.gold.highlight {
            box-shadow: 0 0 60px rgba(255, 215, 0, 1), 0 0 100px rgba(255, 215, 0, 0.8), 0 20px 50px rgba(255, 215, 0, 0.6), inset 0 0 30px rgba(255, 215, 0, 0.3) !important;
            border-color: var(--gold-light) !important;
            animation: pulseHighlightGold 0.8s ease-in-out infinite !important;
        }

        .package-card.diamond.highlight {
            box-shadow: 0 0 60px rgba(0, 212, 255, 1), 0 0 100px rgba(0, 212, 255, 0.8), 0 20px 50px rgba(0, 212, 255, 0.6), inset 0 0 30px rgba(0, 212, 255, 0.3) !important;
            border-color: #00d4ff !important;
            animation: pulseHighlightDiamond 0.8s ease-in-out infinite !important;
        }

        @keyframes pulseHighlight {
            0%, 100% {
                box-shadow: 0 0 60px rgba(255, 51, 51, 1), 0 0 100px rgba(255, 51, 51, 0.8), 0 20px 50px rgba(255, 51, 51, 0.6);
                transform: translateY(-15px) scale(1.05);
            }
            50% {
                box-shadow: 0 0 80px rgba(255, 51, 51, 1), 0 0 120px rgba(255, 51, 51, 0.9), 0 25px 60px rgba(255, 51, 51, 0.7);
                transform: translateY(-18px) scale(1.06);
            }
        }

        @keyframes pulseHighlightGold {
            0%, 100% {
                box-shadow: 0 0 60px rgba(255, 215, 0, 1), 0 0 100px rgba(255, 215, 0, 0.8), 0 20px 50px rgba(255, 215, 0, 0.6);
                transform: translateY(-15px) scale(1.05);
            }
            50% {
                box-shadow: 0 0 80px rgba(255, 215, 0, 1), 0 0 120px rgba(255, 215, 0, 0.9), 0 25px 60px rgba(255, 215, 0, 0.7);
                transform: translateY(-18px) scale(1.06);
            }
        }

        @keyframes pulseHighlightDiamond {
            0%, 100% {
                box-shadow: 0 0 60px rgba(0, 212, 255, 1), 0 0 100px rgba(0, 212, 255, 0.8), 0 20px 50px rgba(0, 212, 255, 0.6);
                transform: translateY(-15px) scale(1.05);
            }
            50% {
                box-shadow: 0 0 80px rgba(0, 212, 255, 1), 0 0 120px rgba(0, 212, 255, 0.9), 0 25px 60px rgba(0, 212, 255, 0.7);
                transform: translateY(-18px) scale(1.06);
            }
        }

        @media (max-width: 768px) {
            .package-sidebar {
                display: none;
            }
        }

        /* ============================================
           HERO SECTION
        ============================================ */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 120px 20px 80px;
            position: relative;
        }

        .hero-logo {
            margin-bottom: 20px;
        }

        .hero-logo img {
            max-width: 280px;
            height: auto;
        }

        @media (max-width: 600px) {
            .hero-logo img {
                max-width: 200px;
            }
        }

        .hero-tagline {
            font-size: 1.3rem;
            color: var(--red);
            font-weight: 700;
            letter-spacing: 3px;
            margin-bottom: 30px;
        }

        .hero-subtitle {
            font-size: 1.4rem;
            color: rgba(255, 255, 255, 0.9);
            max-width: 700px;
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .hero-buttons {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--red), var(--red-light));
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(255, 51, 51, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(255, 51, 51, 0.6);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }

        /* ============================================
           SECTIONS
        ============================================ */
        .section {
            padding: 100px 60px;
            position: relative;
            background: var(--saas-navy);
            color: #fff;
        }

        /* About section - white gradient with navy text */
        section#about {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.92) 0%, rgba(255, 255, 255, 0.88) 100%) !important;
        }

        section#about .section-header h2 {
            color: #1e3a5f !important;
        }

        section#about .about-text h3 {
            color: #1e3a5f !important;
        }

        section#about .about-text p {
            color: #2d4a6f !important;
        }

        section#about .credential-number {
            color: #1e3a5f !important;
            transition: color 0.3s ease;
        }

        section#about .credential-label {
            color: #4a6a8a !important;
            transition: color 0.3s ease;
        }

        section#about .credentials {
            border-top-color: rgba(30, 58, 95, 0.15) !important;
        }

        section#about .credential-item {
            border-right-color: rgba(30, 58, 95, 0.15) !important;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        section#about .credential-item:hover {
            transform: scale(1.1);
        }

        section#about .credential-item:hover .credential-number,
        section#about .credential-item:hover .credential-label {
            color: var(--red) !important;
        }

        section#about .core-values {
            border-top-color: rgba(30, 58, 95, 0.15) !important;
        }

        section#about .value-card {
            border-color: rgba(30, 58, 95, 0.1) !important;
        }

        section#about .value-card p {
            color: #2d4a6f !important;
        }

        @media (max-width: 768px) {
            .section { padding: 60px 20px; }
        }

        .section-dark {
            background: rgba(11, 18, 32, 0.95);
        }

        section#pricing {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.92) 0%, rgba(255, 255, 255, 0.88) 100%) !important;
            color: #1e3a5f;
        }

        section#pricing .section-header h2 {
            color: var(--saas-blue) !important;
        }

        section#pricing .section-header p {
            color: #4B5563 !important;
        }

        /* White background package cards with hover glow */
        section#pricing .package-card {
            background: linear-gradient(135deg, rgba(255, 51, 51, 0.05), rgba(255, 255, 255, 0.98)) !important;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s ease, transform 0.3s ease !important;
        }

        section#pricing .package-card:hover {
            box-shadow: 0 0 40px rgba(255, 51, 51, 0.5), 0 0 80px rgba(255, 51, 51, 0.3) !important;
            transform: translateY(-8px) !important;
        }

        section#pricing .package-card.gold {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(255, 255, 255, 0.98)) !important;
        }

        section#pricing .package-card.gold:hover {
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.6), 0 0 80px rgba(255, 215, 0, 0.4) !important;
        }

        section#pricing .package-card.gold h3 {
            background: linear-gradient(45deg, #b8860b, #daa520, #b8860b) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
        }

        section#pricing .package-card.diamond {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(240, 255, 255, 0.98)) !important;
            border-color: #00d4ff !important;
        }

        section#pricing .package-card.diamond:hover {
            box-shadow: 0 0 40px rgba(0, 212, 255, 0.7), 0 0 80px rgba(0, 212, 255, 0.5) !important;
        }

        section#pricing .package-card.diamond h3 {
            color: #00d4ff !important;
            background: none !important;
            -webkit-text-fill-color: #00d4ff !important;
        }

        section#pricing .package-card h3 {
            color: var(--red) !important;
            background: none !important;
            -webkit-text-fill-color: var(--red) !important;
        }

        section#pricing .package-features li {
            color: #374151 !important;
            border-bottom-color: rgba(0, 0, 0, 0.08) !important;
        }

        section#pricing .package-price {
            color: #1e3a5f !important;
        }

        section#pricing .guarantee-box {
            background: rgba(40, 167, 69, 0.08);
            border-color: #28a745;
        }

        section#pricing .guarantee-box p {
            color: #374151;
        }

        /* Portal section - white gradient */
        section#portal {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.92) 0%, rgba(255, 255, 255, 0.88) 100%) !important;
        }

        section#portal .section-header h2 {
            color: var(--red) !important;
        }

        section#portal .section-header p {
            color: #4B5563 !important;
        }

        /* Schedule section - fisheye gradient and white text */
        .schedule-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse 70% 60% at 50% 50%,
                rgba(0, 0, 0, 0.75) 0%,
                rgba(0, 0, 0, 0.5) 40%,
                rgba(0, 0, 0, 0.2) 70%,
                transparent 100%);
            pointer-events: none;
            z-index: 0;
        }

        section#schedule .section-header p {
            color: #fff !important;
        }

        section#portal .auth-tabs button {
            color: #1e3a5f;
        }

        section#portal .auth-tabs button.active {
            color: var(--red);
            border-bottom-color: var(--red);
        }

        section#portal .maintenance-notice {
            background: rgba(255, 193, 7, 0.15);
            border-color: #ffc107;
        }

        section#portal .maintenance-notice p {
            color: #1e3a5f;
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-header h2 {
            font-size: 2.8rem;
            color: var(--red);
            margin-bottom: 15px;
        }

        .section-header p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* ============================================
           SERVICES GRID
        ============================================ */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .service-card {
            background: linear-gradient(135deg, rgba(255, 51, 51, 0.1), rgba(0, 0, 0, 0.8));
            border: 1px solid var(--red);
            border-radius: 20px;
            padding: 40px 30px;
            transition: all 0.3s ease;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(255, 51, 51, 0.3);
            border-color: var(--red-light);
        }

        .service-icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .service-card h3 {
            color: var(--red);
            font-size: 1.4rem;
            margin-bottom: 15px;
        }

        .service-card p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.7;
        }

        /* ============================================
           PRICING CARDS
        ============================================ */

        /* Pricing Toggle */
        .pricing-toggle-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 40px;
            background: rgba(30, 58, 95, 0.9);
            padding: 15px 25px;
            border-radius: 50px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        @media (max-width: 480px) {
            .pricing-toggle-container {
                border-radius: 20px;
                padding: 12px 20px;
                gap: 10px;
            }
        }

        .pricing-toggle-label {
            font-size: 1rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.5);
            transition: color 0.3s ease;
            cursor: pointer;
            white-space: nowrap;
        }

        .pricing-toggle-label.active {
            color: white;
        }

        .pricing-toggle {
            position: relative;
            flex-shrink: 0;
            width: 60px;
            height: 32px;
            background: rgba(255, 51, 51, 0.3);
            border: 2px solid var(--red);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .pricing-toggle:hover {
            box-shadow: 0 0 15px rgba(255, 51, 51, 0.4);
        }

        .pricing-toggle-knob {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 22px;
            height: 22px;
            background: var(--red);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .pricing-toggle.yearly .pricing-toggle-knob {
            left: 31px;
            background: var(--gold);
        }

        .pricing-toggle.yearly {
            border-color: var(--gold);
            background: rgba(255, 215, 0, 0.3);
        }

        .pricing-save-badge {
            background: linear-gradient(45deg, var(--gold), var(--gold-light));
            color: #000;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            animation: pulse-badge 2s ease-in-out infinite;
        }

        @keyframes pulse-badge {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .package-price {
            position: relative;
        }

        .package-price .monthly-price,
        .package-price .yearly-price {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .package-price .yearly-price {
            display: none;
        }

        .package-price.show-yearly .monthly-price {
            display: none;
        }

        .package-price.show-yearly .yearly-price {
            display: block;
        }

        .yearly-savings {
            font-size: 0.85rem;
            color: #2e7d32;
            font-weight: 600;
            margin-top: 8px;
        }

        .package-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            max-width: 1100px;
            margin: 0 auto;
        }

        .package-card {
            background: linear-gradient(135deg, rgba(255, 51, 51, 0.1), rgba(0, 0, 0, 0.9));
            border: 2px solid var(--red);
            border-radius: 20px;
            padding: 40px 30px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .package-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 0 30px rgba(255, 51, 51, 0.6), 0 20px 50px rgba(255, 51, 51, 0.4);
            border-color: var(--red-light);
        }

        .package-card.gold {
            border-color: var(--gold);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(0, 0, 0, 0.9));
        }

        .package-card.gold:hover {
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.7), 0 20px 50px rgba(255, 215, 0, 0.5);
            border-color: var(--gold-light);
        }

        .package-card.gold h3 {
            background: linear-gradient(45deg, #b8860b, #ffd700, #daa520);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: filter 0.3s ease;
        }

        .package-card.gold:hover h3 {
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
        }

        .package-card.basic:hover h3 {
            filter: drop-shadow(0 0 10px rgba(255, 51, 51, 0.8));
        }

        .package-card.diamond:hover h3 {
            filter: drop-shadow(0 0 10px rgba(0, 212, 255, 0.8));
        }

        .package-card.diamond {
            border-color: #00d4ff;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.15), rgba(0, 0, 0, 0.9));
        }

        .package-card.diamond:hover {
            box-shadow: 0 0 40px rgba(0, 212, 255, 0.7), 0 20px 50px rgba(0, 212, 255, 0.5);
            border-color: #33e0ff;
        }

        .package-card.diamond h3 {
            background: linear-gradient(45deg, #00d4ff, #33e0ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .package-card h3 {
            color: var(--red);
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .package-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--gold);
            background: rgba(255, 215, 0, 0.1);
            padding: 10px 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: inline-block;
        }

        .package-features {
            list-style: none;
            text-align: left;
            margin-bottom: 30px;
        }

        .package-features li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
            color: rgba(255, 255, 255, 0.9);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .package-features li:before {
            content: "âš¡";
            position: absolute;
            left: 0;
            color: var(--red);
        }

        .package-card.gold .package-features li:before {
            content: "âœ¨";
            color: var(--gold);
        }

        .package-card.diamond .package-features li:before {
            content: "ðŸ’Ž";
        }

        .package-trial {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            display: inline-block;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .package-popular {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, var(--gold), var(--gold-light));
            color: #000;
            padding: 6px 20px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Ensure package card buttons are clickable */
        .package-card .btn-primary {
            position: relative;
            z-index: 10;
            display: inline-block;
            margin-top: 20px;
            touch-action: manipulation;
            cursor: pointer;
        }

        .guarantee-box {
            max-width: 700px;
            margin: 50px auto 0;
            text-align: center;
            padding: 25px 30px;
            background: rgba(40, 167, 69, 0.1);
            border: 2px solid #28a745;
            border-radius: 15px;
        }

        .guarantee-box p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            margin: 0;
        }

        .guarantee-box strong {
            color: #28a745;
        }

        /* ============================================
           PORTFOLIO / WORK SECTION
        ============================================ */
        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .portfolio-item {
            position: relative;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 51, 51, 0.3);
            aspect-ratio: 16/10;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .portfolio-item:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--red);
            box-shadow: 0 0 30px rgba(255, 51, 51, 0.6), 0 15px 40px rgba(255, 51, 51, 0.4);
        }

        .portfolio-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .portfolio-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease, filter 0.3s ease;
        }

        .portfolio-item:hover .portfolio-image img {
            transform: scale(1.08);
            filter: brightness(0.4);
        }

        /* Hover overlay with title and description */
        .portfolio-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 2;
        }

        .portfolio-item:hover .portfolio-overlay {
            opacity: 1;
        }

        /* Mobile: show overlay always since no hover */
        @media (max-width: 768px) {
            .portfolio-overlay {
                opacity: 1;
                background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 50%, transparent 100%);
                justify-content: flex-end;
                padding-bottom: 25px;
            }
            .portfolio-overlay h4 { font-size: 1rem; }
            .portfolio-overlay p { font-size: 0.8rem; display: none; }
            .portfolio-overlay .click-hint { margin-top: 8px; }
        }

        .portfolio-overlay h4 {
            color: var(--red);
            font-size: 1.3rem;
            font-weight: 700;
            margin: 0 0 10px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .portfolio-overlay p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0;
            max-width: 90%;
        }

        .portfolio-overlay .click-hint {
            margin-top: 15px;
            color: var(--gold);
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* ============================================
           LIGHTBOX
        ============================================ */
        .lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.97);
            z-index: 100000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 10px;
            cursor: zoom-out;
        }

        .lightbox.active {
            display: flex;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .lightbox img {
            max-width: 98vw;
            max-height: 96vh;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 0 60px rgba(0, 0, 0, 0.8);
            cursor: default;
        }

        .lightbox-close {
            position: absolute;
            top: 15px;
            right: 25px;
            background: rgba(0, 0, 0, 0.7);
            border: none;
            color: white;
            font-size: 2.5rem;
            cursor: pointer;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100001;
            transition: background 0.2s;
        }

        .lightbox-close:hover {
            background: var(--red);
        }

        /* ============================================
           LEGAL MODALS
        ============================================ */
        /* NDA Modal */
        .nda-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            z-index: 100500;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .nda-modal.active { display: flex; }

        .nda-modal-content {
            background: #fff;
            border-radius: 16px;
            max-width: 740px;
            width: 100%;
            max-height: 92vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 30px 80px rgba(0,0,0,0.6);
        }

        .nda-header {
            background: #0d2240;
            padding: 20px 30px;
            flex-shrink: 0;
        }

        .nda-header h2 { color: #fff; margin: 0 0 3px; font-size: 1.3rem; }
        .nda-header p { color: rgba(255,255,255,0.7); margin: 0; font-size: 0.85rem; }

        .nda-step { padding: 25px 30px; }

        .nda-step-inputs { display: flex; flex-direction: column; gap: 15px; }

        .nda-input-group label {
            display: block;
            font-weight: 600;
            color: #1e3a5f;
            margin-bottom: 6px;
            font-size: 0.9rem;
        }

        .nda-input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }

        .nda-input-group input:focus {
            outline: none;
            border-color: #1e3a5f;
        }

        .nda-generate-btn {
            width: 100%;
            margin-top: 20px;
            padding: 14px;
            background: #0d2240;
            color: #fff;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nda-generate-btn:hover { background: #1e3a5f; }

        .nda-document {
            display: none;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
        }

        .nda-document.active { display: flex; }

        .nda-doc-toolbar {
            padding: 12px 25px;
            background: #f8f9fa;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nda-doc-toolbar span { font-size: 0.85rem; color: #666; }

        .nda-print-btn {
            background: #1e3a5f;
            color: #fff;
            border: none;
            padding: 8px 18px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
        }

        .nda-text-area {
            overflow-y: auto;
            padding: 25px 30px;
            flex: 1;
            font-size: 0.88rem;
            line-height: 1.7;
            color: #333;
        }

        .nda-text-area h3 {
            color: #1e3a5f;
            font-size: 1rem;
            margin: 20px 0 8px;
        }

        .nda-text-area h4 { color: #1e3a5f; margin: 15px 0 6px; }
        .nda-text-area ul { padding-left: 20px; margin: 8px 0; }
        .nda-text-area li { margin-bottom: 4px; }

        .nda-accept-section {
            padding: 20px 30px;
            border-top: 1px solid #e0e0e0;
            background: #f8f9fa;
            flex-shrink: 0;
        }

        .nda-checkboxes { margin-bottom: 15px; }

        .nda-checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 6px 0;
            font-size: 0.85rem;
            color: #444;
        }

        .nda-checkbox-item input {
            margin-top: 3px;
            accent-color: #1e3a5f;
            flex-shrink: 0;
        }

        .nda-accept-btn {
            width: 100%;
            padding: 14px;
            background: #2CA01C;
            color: #fff;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .nda-accept-btn:hover { background: #238a15; }
        .nda-accept-btn:disabled { background: #ccc; cursor: not-allowed; }

        /* Quiz Modal */
        .quiz-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.88);
            z-index: 99500;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .quiz-modal.active { display: flex; }

        .quiz-modal-content {
            background: #fff;
            border-radius: 20px;
            max-width: 680px;
            width: 100%;
            overflow: hidden;
            box-shadow: 0 30px 80px rgba(0,0,0,0.4);
            max-height: 90vh;
            overflow-y: auto;
        }

        .quiz-header {
            background: #fff;
            padding: 30px 30px 20px;
            text-align: center;
            position: relative;
            border-bottom: 1px solid #f0f0f0;
        }

        .quiz-header h2 { color: #1e3a5f; margin: 0 0 6px; font-size: 1.55rem; font-weight: 800; }
        .quiz-header p { color: #777; margin: 0; font-size: 0.92rem; }

        .quiz-close {
            position: absolute;
            top: 15px; right: 20px;
            background: none; border: none;
            color: #aaa;
            font-size: 1.8rem; cursor: pointer; line-height: 1;
        }
        .quiz-close:hover { color: #555; }

        .quiz-body { padding: 25px 30px; }

        .quiz-question {
            font-weight: 700;
            color: #1e3a5f;
            margin-bottom: 18px;
            font-size: 1rem;
            text-align: center;
        }

        .quiz-checks {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
            justify-content: center;
        }

        .quiz-check-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 9px 18px;
            border: 1.5px solid #d8d8d8;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.18s;
            font-size: 0.87rem;
            color: #444;
            background: #fff;
            white-space: nowrap;
            user-select: none;
        }

        .quiz-check-item:hover { border-color: #1e3a5f; background: #f5f8ff; color: #1e3a5f; }
        .quiz-check-item input { accent-color: #1e3a5f; width: 15px; height: 15px; flex-shrink: 0; cursor: pointer; }
        .quiz-check-item:has(input:checked) { border-color: #1e3a5f; background: #e8effe; font-weight: 600; color: #1e3a5f; }
        .quiz-check-item.consult-pill:has(input:checked) { border-color: #f5a623; background: #fff8ee; color: #c07800; }

        .quiz-result {
            display: none;
            background: linear-gradient(135deg, #f0f4ff, #e8f0fe);
            border: 2px solid #1e3a5f;
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            margin-bottom: 20px;
        }

        .quiz-result.active { display: block; }
        .quiz-result-label { font-size: 0.85rem; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        .quiz-result-plan { font-size: 1.8rem; font-weight: 800; color: #1e3a5f; margin-bottom: 5px; }
        .quiz-result-price { font-size: 1.1rem; color: #555; margin-bottom: 15px; }
        .quiz-result-features { list-style: none; padding: 0; margin: 0 0 20px; text-align: left; display: inline-block; }
        .quiz-result-features li { padding: 5px 0; color: #444; font-size: 0.9rem; }
        .quiz-result-features li::before { content: "âœ“ "; color: #2CA01C; font-weight: 700; }

        .quiz-cta-btn {
            background: linear-gradient(135deg, #1e3a5f, #2d5a9e);
            color: #fff;
            border: none;
            padding: 14px 35px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-cta-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(30,58,95,0.3); }

        .quiz-footer {
            text-align: center;
            padding: 0 30px 20px;
        }

        .quiz-footer button {
            background: none; border: none;
            color: #aaa; font-size: 0.85rem;
            cursor: pointer; text-decoration: underline;
        }

        /* Upgrade Modal */
        .upgrade-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.85);
            z-index: 99000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .upgrade-modal.active { display: flex; }

        .upgrade-modal-content {
            background: #fff;
            border-radius: 20px;
            max-width: 760px;
            width: 100%;
            overflow: hidden;
            box-shadow: 0 30px 80px rgba(0,0,0,0.4);
        }

        .upgrade-modal-header {
            background: #0d2240;
            padding: 25px 35px;
            text-align: center;
        }

        .upgrade-modal-header h2 {
            color: #fff;
            margin: 0 0 5px;
            font-size: 1.6rem;
        }

        .upgrade-modal-header p {
            color: rgba(255,255,255,0.7);
            margin: 0;
            font-size: 0.95rem;
        }

        .upgrade-modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            color: rgba(255,255,255,0.6);
            font-size: 1.8rem;
            cursor: pointer;
            line-height: 1;
        }

        .upgrade-modal-header { position: relative; }

        .upgrade-plans-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
        }

        @media (max-width: 600px) {
            .upgrade-plans-grid { grid-template-columns: 1fr; }
        }

        .upgrade-plan-card {
            padding: 30px 25px;
            border-right: 1px solid #eee;
        }

        .upgrade-plan-card:last-child { border-right: none; }

        .upgrade-plan-badge {
            display: inline-block;
            padding: 4px 14px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .badge-gold { background: linear-gradient(135deg, #f5a623, #f0c040); color: #1e3a5f; }
        .badge-diamond { background: linear-gradient(135deg, #1e3a5f, #2d5a9e); color: #fff; }

        .upgrade-plan-card h3 {
            font-size: 1.3rem;
            color: #1e3a5f;
            margin: 0 0 5px;
        }

        .upgrade-plan-price {
            font-size: 1.6rem;
            font-weight: 800;
            color: #1e3a5f;
            margin-bottom: 15px;
        }

        .upgrade-plan-price span {
            font-size: 0.9rem;
            font-weight: 400;
            color: #888;
        }

        .upgrade-upsells {
            list-style: none;
            padding: 0;
            margin: 0 0 20px;
        }

        .upgrade-upsells li {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            padding: 6px 0;
            color: #444;
            font-size: 0.9rem;
            border-bottom: 1px solid #f5f5f5;
        }

        .upgrade-upsells li .check { color: #2CA01C; font-weight: 700; flex-shrink: 0; }

        .upgrade-plan-btn {
            width: 100%;
            padding: 13px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upgrade-plan-btn.btn-gold {
            background: linear-gradient(135deg, #f5a623, #f0c040);
            color: #1e3a5f;
        }

        .upgrade-plan-btn.btn-diamond {
            background: linear-gradient(135deg, #1e3a5f, #2d5a9e);
            color: #fff;
        }

        .upgrade-plan-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .upgrade-modal-footer {
            padding: 15px 25px;
            text-align: center;
            border-top: 1px solid #eee;
            background: #fafafa;
        }

        .upgrade-modal-footer a {
            color: #1e3a5f;
            font-size: 0.9rem;
            text-decoration: none;
            font-weight: 600;
        }

        .upgrade-modal-footer a:hover { text-decoration: underline; }

        .legal-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .legal-modal.active {
            display: flex;
        }

        .legal-modal-content {
            background: #111;
            border: 1px solid var(--red);
            border-radius: 15px;
            max-width: 700px;
            max-height: 80vh;
            width: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .legal-modal-content h2 {
            color: var(--red);
            padding: 25px 30px;
            margin: 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 1.5rem;
        }

        .legal-modal-body {
            padding: 25px 30px;
            overflow-y: auto;
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.9rem;
            line-height: 1.7;
        }

        .legal-modal-body h3 {
            color: #fff;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .legal-modal-body h3:first-child {
            margin-top: 0;
        }

        .legal-modal-body p {
            margin-bottom: 12px;
        }

        .legal-modal-body ul {
            margin-left: 20px;
            margin-bottom: 12px;
        }

        .legal-modal-body li {
            margin-bottom: 6px;
        }

        .legal-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: transparent;
            border: none;
            color: #fff;
            font-size: 1.8rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }

        .legal-modal-close:hover {
            background: rgba(255, 51, 51, 0.3);
        }

        /* ============================================
           ADMIN DASHBOARD MODAL
        ============================================ */
        .admin-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .admin-modal.active {
            display: flex;
        }

        .admin-modal-content {
            background: #111;
            border: 2px solid var(--red);
            border-radius: 15px;
            max-width: 1000px;
            width: 100%;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .admin-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-modal-header h2 {
            color: var(--red);
            margin: 0;
            font-size: 1.5rem;
        }

        .admin-modal-close {
            background: transparent;
            border: none;
            color: #fff;
            font-size: 1.8rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }

        .admin-modal-close:hover {
            background: rgba(255, 51, 51, 0.3);
        }

        .admin-tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 0 25px;
        }

        .admin-tab {
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            padding: 15px 25px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .admin-tab:hover {
            color: #fff;
        }

        .admin-tab.active {
            color: var(--red);
            border-bottom-color: var(--red);
        }

        .admin-tab-content {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
        }

        .admin-tab-pane {
            display: none;
        }

        .admin-tab-pane.active {
            display: block;
        }

        .admin-section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .admin-section-header h3 {
            color: #fff;
            margin: 0;
            font-size: 1.1rem;
        }

        .btn-refresh {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: rgba(255, 255, 255, 0.7);
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .btn-refresh:hover {
            border-color: var(--red);
            color: var(--red);
        }

        .admin-table-container {
            overflow-x: auto;
            margin-bottom: 20px;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .admin-table th,
        .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-table th {
            color: rgba(255, 255, 255, 0.5);
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.75rem;
        }

        .admin-table td {
            color: #fff;
        }

        .admin-table tr:hover td {
            background: rgba(255, 255, 255, 0.05);
        }

        .loading-row {
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
        }

        .tier-select {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }

        .tier-badge-basic { color: var(--red); }
        .tier-badge-gold { color: var(--gold); }
        .tier-badge-diamond { color: #fff; }

        .admin-form {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
        }

        .admin-form-row {
            margin-bottom: 15px;
        }

        .admin-form-row label {
            display: block;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .admin-form-row input,
        .admin-form-row select {
            width: 100%;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 10px 12px;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .admin-form-row input:focus,
        .admin-form-row select:focus {
            outline: none;
            border-color: var(--red);
        }

        .admin-form .btn-primary {
            background: linear-gradient(45deg, var(--red), var(--red-light));
            border: none;
            color: #fff;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .admin-form .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 51, 51, 0.4);
        }

        .btn-delete {
            background: transparent;
            border: 1px solid #ff4444;
            color: #ff4444;
            padding: 4px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.2s;
        }

        .btn-delete:hover {
            background: rgba(255, 68, 68, 0.2);
        }

        /* ============================================
           CLIENT PORTAL
        ============================================ */
        .portal-card {
            max-width: 500px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid var(--red);
            border-radius: 20px;
            padding: 50px 40px;
        }

        .portal-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .portal-tab {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 2px solid transparent;
        }

        .portal-tab.active {
            color: var(--red);
            border-bottom-color: var(--red);
        }

        .portal-form {
            display: none;
        }

        .portal-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--red);
            background: rgba(255, 51, 51, 0.1);
        }

        .form-submit {
            width: 100%;
            background: linear-gradient(45deg, var(--red), var(--red-light));
            color: white;
            border: none;
            padding: 16px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .form-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 51, 51, 0.5);
        }

        /* Google Sign-In Button */
        .google-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            background: #ffffff;
            color: #333;
            border: none;
            padding: 14px 20px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .google-btn:hover {
            background: #f5f5f5;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .google-btn svg {
            flex-shrink: 0;
        }

        .auth-divider {
            display: flex;
            align-items: center;
            margin: 20px 0;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
        }

        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: rgba(255, 255, 255, 0.2);
        }

        .auth-divider span {
            padding: 0 15px;
        }

        .form-subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 20px;
            font-size: 0.95rem;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .form-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin: 20px 0;
        }

        .form-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            cursor: pointer;
            accent-color: var(--red);
        }

        .form-checkbox label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .form-link {
            color: var(--red-light);
            text-decoration: underline;
        }

        .form-link:hover {
            color: var(--red);
        }

        .form-submit-green {
            background: linear-gradient(45deg, #2dd4bf, #14b8a6);
        }

        .form-submit-green:hover {
            box-shadow: 0 8px 25px rgba(45, 212, 191, 0.5);
        }

        /* Portal Dashboard (Logged In) - WHITE THEME */
        .portal-dashboard {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--mckinsey-blue) !important;
            border-radius: 20px;
            padding: 40px;
            color: #fff;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: -40px -40px 30px -40px;
            padding: 20px 40px;
            background: #0d2240 !important;
            border-radius: 20px 20px 0 0;
            flex-wrap: wrap;
            gap: 15px;
        }

        .dashboard-header h3 {
            color: #fff !important;
            -webkit-text-fill-color: #fff !important;
            margin: 0;
            font-size: 1.3rem;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        .dashboard-header h3 span {
            color: #fff !important;
            -webkit-text-fill-color: #fff !important;
        }

        /* Trial Banner */
        .trial-banner {
            border-radius: 12px;
            padding: 15px 20px;
            margin-bottom: 25px;
        }

        .trial-banner-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .trial-banner-text {
            color: #fff;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .trial-banner-days {
            font-weight: 800;
            font-size: 1.1rem;
        }

        .trial-progress-bar {
            height: 6px;
            border-radius: 3px;
            background: rgba(255,255,255,0.2);
            overflow: hidden;
        }

        .trial-progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .trial-banner-cta {
            background: var(--gold);
            color: var(--mckinsey-blue);
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .trial-banner-cta:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }

        /* Trial Expired Lockout Screen */
        .trial-lockout {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(10, 20, 40, 0.97);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
            padding: 30px;
        }

        .trial-lockout.active {
            display: flex;
        }

        .trial-lockout-content {
            background: #fff;
            border-radius: 20px;
            padding: 50px 40px;
            max-width: 560px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .trial-lockout-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .trial-lockout h2 {
            color: #1e3a5f;
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .trial-lockout p {
            color: #555;
            margin-bottom: 25px;
            font-size: 1rem;
            line-height: 1.6;
        }

        .trial-lockout-plans {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .lockout-plan-btn {
            padding: 14px 28px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        .lockout-plan-btn.gold {
            background: linear-gradient(135deg, #f5a623, #f0c040);
            color: #1e3a5f;
        }

        .lockout-plan-btn.diamond {
            background: linear-gradient(135deg, #1e3a5f, #2d5a9e);
            color: #fff;
        }

        .lockout-plan-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .lockout-logout {
            background: none;
            border: none;
            color: #aaa;
            font-size: 0.85rem;
            cursor: pointer;
            text-decoration: underline;
            margin-top: 10px;
        }

        /* Portal 4-Step Layout */
        .portal-steps-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-bottom: 30px;
        }

        .portal-step-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow: hidden;
        }

        .portal-step-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }

        .portal-step-header {
            background: var(--mckinsey-blue);
            padding: 15px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .portal-step-number {
            width: 40px;
            height: 40px;
            min-width: 40px;
            background: var(--gold);
            color: var(--mckinsey-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .portal-step-header h4 {
            color: #fff !important;
            margin: 0;
            font-size: 1.1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .portal-step-body {
            padding: 25px;
            color: #444;
        }

        .portal-step-body p, .portal-step-body label, .portal-step-body span,
        .portal-step-body input, .portal-step-body select, .portal-step-body textarea {
            color: #444;
        }

        /* Step 1: NDA */
        .nda-step-sign-btn {
            background: #1e3a5f;
            color: #fff;
            border: none;
            padding: 12px 28px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .nda-step-sign-btn:hover { background: #0d2240; transform: translateY(-1px); }
        .nda-signed-badge {
            display: flex;
            align-items: center;
            gap: 14px;
            background: #f0fdf4;
            border: 1.5px solid #86efac;
            border-radius: 12px;
            padding: 16px 20px;
        }
        .nda-signed-check {
            width: 40px; height: 40px;
            background: #22c55e;
            color: #fff;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.3rem; font-weight: 900; flex-shrink: 0;
        }
        .nda-signed-title { font-weight: 700; color: #166534; font-size: 1rem; }
        .nda-signed-meta { font-size: 0.82rem; color: #4ade80; margin-top: 2px; }

        /* Step 2: Platform Dropdown */
        .trust-signals-bar {
            display: flex; gap: 18px; flex-wrap: wrap;
            background: #f0f4ff; border-radius: 8px;
            padding: 10px 16px; margin-bottom: 16px;
            font-size: 0.82rem; font-weight: 600; color: #1e3a5f;
        }
        .platform-dropdown-wrap { margin-bottom: 15px; position: relative; }
        .platform-dropdown-label { display: block; font-size: 0.85rem; font-weight: 600; color: #555; margin-bottom: 6px; }
        .platform-dropdown-box {
            display: flex; align-items: center; justify-content: space-between;
            padding: 11px 16px; border: 1.5px solid #d0d7e5;
            border-radius: 10px; background: #fff; cursor: pointer;
            transition: border-color 0.2s; font-size: 0.9rem; color: #333;
        }
        .platform-dropdown-box:hover { border-color: #1e3a5f; }
        .platform-dropdown-arrow { color: #888; font-size: 0.8rem; }
        .platform-dropdown-list {
            position: absolute; top: calc(100% + 4px); left: 0; right: 0;
            background: #fff; border: 1.5px solid #d0d7e5;
            border-radius: 10px; box-shadow: 0 8px 25px rgba(0,0,0,0.12);
            z-index: 200; overflow: hidden;
        }
        .platform-dropdown-item {
            display: flex; align-items: center; gap: 12px;
            padding: 10px 14px; cursor: pointer;
            transition: background 0.15s; font-size: 0.88rem; color: #333;
        }
        .platform-dropdown-item:hover { background: #f5f7fb; }
        .platform-logo-sm {
            width: 32px; height: 32px; border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0; font-size: 0.68rem; font-weight: 900; color: #fff;
        }
        .pdrop-check { margin-left: auto; color: #22c55e; font-size: 0.9rem; font-weight: 700; }
        .connected-platform-badge {
            display: inline-flex; align-items: center; gap: 6px;
            background: #f0fdf4; border: 1px solid #86efac;
            border-radius: 20px; padding: 4px 12px;
            font-size: 0.78rem; font-weight: 600; color: #166534;
        }

        /* Step 3: Financial Upload Grid */
        .fin-upload-grid {
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 14px; margin-bottom: 10px;
        }
        @media (max-width: 720px) { .fin-upload-grid { grid-template-columns: 1fr; } }
        .fin-upload-slot {
            background: #f8f9fc; border: 1.5px dashed #d0d7e5;
            border-radius: 12px; padding: 18px 14px; text-align: center;
            transition: border-color 0.2s;
        }
        .fin-upload-slot:hover { border-color: #1e3a5f; background: #f3f6ff; }
        .fin-slot-icon { font-size: 1.8rem; margin-bottom: 8px; }
        .fin-slot-label { font-weight: 700; color: #1e3a5f; font-size: 0.88rem; margin-bottom: 3px; }
        .fin-slot-sub { font-size: 0.75rem; color: #999; margin-bottom: 12px; }
        .fin-upload-btn {
            display: inline-block; background: #1e3a5f; color: #fff;
            padding: 7px 16px; border-radius: 20px;
            font-size: 0.78rem; font-weight: 700; cursor: pointer; transition: background 0.2s;
        }
        .fin-upload-btn:hover { background: #0d2240; }
        .fin-slot-status { font-size: 0.75rem; color: #22c55e; margin-top: 8px; min-height: 18px; font-weight: 600; }

        /* Skip buttons */
        .step-skip-row { text-align: right; margin-top: 14px; padding-top: 12px; border-top: 1px solid #f0f0f0; }
        .step-skip-btn { background: none; border: none; color: #bbb; font-size: 0.8rem; cursor: pointer; text-decoration: underline; }
        .step-skip-btn:hover { color: #888; }

        /* Add Another Platform */
        .add-platform-btn {
            display: inline-flex; align-items: center; gap: 6px;
            background: none; border: 1.5px dashed #d0d7e5; border-radius: 8px;
            padding: 8px 16px; font-size: 0.83rem; font-weight: 600; color: #555;
            cursor: pointer; transition: all 0.2s;
        }
        .add-platform-btn:hover { border-color: #1e3a5f; color: #1e3a5f; background: #f5f7ff; }

        /* Lightning Bolt Profile Meter */
        .lightning-meter-bar {
            background: rgba(255,255,255,0.08);
            border-radius: 14px;
            padding: 16px 22px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 14px;
            border: 1px solid rgba(255,255,255,0.12);
        }
        .lightning-meter-left { display: flex; align-items: center; gap: 16px; }
        .lightning-bolt-wrap {
            position: relative;
            width: 40px; height: 70px;
            flex-shrink: 0;
        }
        .lightning-bolt-svg {
            position: absolute; top: 0; left: 0;
            width: 40px; height: 70px;
            filter: drop-shadow(0 0 4px rgba(255,42,42,0.5));
            z-index: 2;
        }
        .lightning-bolt-fill {
            position: absolute;
            bottom: 0; left: 0; right: 0;
            background: linear-gradient(to top, #ff0000, #ff4400, #ff8800);
            border-radius: 3px;
            transition: height 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 1;
            box-shadow: 0 0 10px rgba(255,42,42,0.6), 0 0 20px rgba(255,100,0,0.4);
        }
        .lightning-spark {
            display: none;
            position: absolute;
            top: -8px; left: 50%;
            transform: translateX(-50%);
            font-size: 1.2rem;
            z-index: 3;
            animation: sparkle 0.4s infinite alternate;
        }
        @keyframes sparkle {
            from { opacity: 1; transform: translateX(-50%) scale(1); }
            to   { opacity: 0.4; transform: translateX(-50%) scale(1.4) rotate(15deg); }
        }
        .lightning-meter-text { display: flex; flex-direction: column; gap: 3px; }
        .lightning-meter-pct { color: #fff; font-size: 1.05rem; font-weight: 800; }
        .lightning-meter-tip { color: rgba(255,255,255,0.6); font-size: 0.8rem; }
        .lightning-meter-reward {
            background: rgba(255,42,42,0.15); border: 1px solid rgba(255,100,0,0.4);
            border-radius: 10px; padding: 10px 16px;
            color: #ffbb77; font-size: 0.85rem;
        }

        /* Security Bar */
        .portal-security-bar {
            display: flex; align-items: center; justify-content: center;
            gap: 10px; flex-wrap: wrap;
            background: rgba(255,255,255,0.12); border-radius: 10px;
            padding: 12px 20px; margin-top: 20px;
            font-size: 0.82rem; color: rgba(255,255,255,0.65);
        }
        .security-bar-dot { color: rgba(255,255,255,0.3); }

        /* Step 4: Reports Carousel */
        .portal-reports-carousel-container {
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            padding: 15px 5px 20px;
            cursor: grab;
            user-select: none;
            scrollbar-width: thin;
            scrollbar-color: var(--mckinsey-blue) #e0e0e0;
        }

        .portal-reports-carousel-container:active {
            cursor: grabbing;
        }

        .portal-reports-carousel-container::-webkit-scrollbar {
            height: 8px;
        }

        .portal-reports-carousel-container::-webkit-scrollbar-track {
            background: #e0e0e0;
            border-radius: 10px;
        }

        .portal-reports-carousel-container::-webkit-scrollbar-thumb {
            background: var(--mckinsey-blue);
            border-radius: 10px;
        }

        .portal-reports-carousel {
            display: flex;
            gap: 20px;
            width: max-content;
        }

        .portal-report-card {
            flex-shrink: 0;
            width: 260px;
            background: #fff;
            border-radius: 14px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.07);
            cursor: pointer;
            transition: all 0.22s ease;
            border: 1px solid #e8ecf0;
            display: flex;
            flex-direction: column;
        }

        .portal-report-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 26px rgba(0,0,0,0.12);
            border-color: #c2d3f0;
        }

        .portal-report-card-thumbnail {
            width: 100%;
            height: 162px;
            background: linear-gradient(135deg, #eef2ff, #dce8fc);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border-bottom: 1px solid #edf0f5;
        }

        .portal-report-card-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .portal-report-card-label {
            padding: 13px 14px 10px;
            display: flex;
            flex-direction: column;
            gap: 7px;
        }

        .portal-report-card-title {
            font-weight: 700;
            color: #1a2e4a;
            font-size: 0.88rem;
            line-height: 1.3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .portal-report-card-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 6px;
        }

        .portal-report-card-date {
            color: #9ca3af;
            font-size: 0.75rem;
        }

        .portal-report-status {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 9px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 0.2px;
            white-space: nowrap;
        }

        .portal-report-status.status-delivered { background: #dcfce7; color: #166534; }
        .portal-report-status.status-new { background: #fef3c7; color: #92400e; }

        .portal-report-card-actions {
            padding: 0 14px 13px;
        }

        .portal-report-dl-btn {
            width: 100%;
            background: #f5f7fb;
            border: 1px solid #e0e7ef;
            border-radius: 8px;
            padding: 7px 0;
            font-size: 0.78rem;
            font-weight: 600;
            color: #1e3a5f;
            cursor: pointer;
            transition: all 0.18s;
            text-align: center;
            display: block;
        }

        .portal-report-dl-btn:hover { background: #e8effe; border-color: #b8c9f0; }

        .portal-scroll-hint {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px;
            color: #6B7280;
            font-size: 0.85rem;
        }

        .upload-file-types {
            color: #555;
            font-size: 0.9rem;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        /* Tier overrides for step numbers */
        body.tier-gold .portal-step-number {
            background: #fff;
            color: var(--gold);
        }

        body.tier-diamond .portal-step-number {
            background: #fff;
            color: #1e3a5f;
        }

        @media (max-width: 768px) {
            .portal-report-card {
                width: 240px;
            }
            .portal-report-card-thumbnail {
                height: 150px;
            }
            .portal-step-body {
                padding: 15px;
            }
        }

        /* Logo Upload Column */
        .logo-upload-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .company-logo-preview {
            width: 150px;
            height: 150px;
            border: 2px dashed rgba(30, 58, 95, 0.3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #f8f9fa, #fff);
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }

        .company-logo-preview:hover {
            border-color: var(--mckinsey-blue);
            background: linear-gradient(135deg, #e8f0fe, #d4e4fc);
        }

        .company-logo-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .company-logo-preview .placeholder {
            color: #888;
            font-size: 0.85rem;
            text-align: center;
        }

        .logo-upload-btn {
            background: var(--mckinsey-blue);
            color: #fff;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .logo-upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(30, 58, 95, 0.3);
        }

        .logo-upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        /* Column Carousel */
        .column-carousel {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 15px 5px;
            scroll-behavior: smooth;
            scrollbar-width: thin;
            scrollbar-color: var(--mckinsey-blue) #e0e0e0;
            min-height: 180px;
        }

        .column-carousel::-webkit-scrollbar {
            height: 8px;
        }

        .column-carousel::-webkit-scrollbar-track {
            background: #e0e0e0;
            border-radius: 4px;
        }

        .column-carousel::-webkit-scrollbar-thumb {
            background: var(--mckinsey-blue);
            border-radius: 4px;
        }

        .carousel-card {
            flex: 0 0 160px;
            background: linear-gradient(135deg, #f8f9fa, #fff);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .carousel-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(30, 58, 95, 0.2);
            border-color: var(--mckinsey-blue);
        }

        .carousel-card-thumbnail {
            width: 100%;
            height: 90px;
            background: linear-gradient(135deg, #e8f0fe, #d4e4fc);
            border-radius: 8px;
            margin-bottom: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-card-thumbnail img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }

        .carousel-card-thumbnail .file-icon {
            font-size: 2.5rem;
        }

        .carousel-card-title {
            font-weight: 700;
            color: var(--mckinsey-blue);
            font-size: 0.85rem;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .carousel-card-date {
            color: #666;
            font-size: 0.75rem;
        }

        .carousel-search {
            margin-bottom: 15px;
        }

        .carousel-search input {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s;
            background: #f8f9fa;
        }

        .carousel-search input:focus {
            outline: none;
            border-color: var(--mckinsey-blue);
            background: #fff;
            box-shadow: 0 0 0 3px rgba(30, 58, 95, 0.1);
        }

        .carousel-search input::placeholder {
            color: #aaa;
        }

        /* QuickBooks Credentials Section */
        /* Platform Integration Grid */
        .platform-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .platform-tile {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 12px 8px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            background: transparent;
            position: relative;
        }

        .platform-tile:hover {
            transform: translateY(-3px);
        }

        .platform-tile:hover .platform-logo {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            transform: scale(1.08);
        }

        .platform-tile.connected .platform-logo {
            box-shadow: 0 0 0 3px #2CA01C;
        }

        .platform-tile.selected .platform-logo {
            box-shadow: 0 0 0 3px var(--mckinsey-blue), 0 6px 20px rgba(30, 58, 95, 0.25);
        }

        .platform-logo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .platform-name {
            font-size: 0.8rem;
            font-weight: 600;
            color: #333;
            text-align: center;
        }

        .platform-status {
            font-size: 0.7rem;
            font-weight: 700;
            color: #2CA01C;
        }

        .platform-cred-form {
            background: #fff;
            border: 2px solid var(--mckinsey-blue);
            border-radius: 12px;
            padding: 25px;
            margin-top: 10px;
            color: #333;
        }

        .platform-cred-form label,
        .platform-cred-form p,
        .platform-cred-form span {
            color: #333;
        }

        .platform-cred-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .platform-cred-header h5 {
            color: var(--mckinsey-blue) !important;
            margin: 0;
            font-size: 1.1rem;
        }

        .access-option {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
            color: #444;
        }

        .access-option:has(input:checked) {
            border-color: var(--mckinsey-blue);
            background: #f0f4ff;
            color: var(--mckinsey-blue);
            font-weight: 600;
        }

        .access-option input {
            accent-color: var(--mckinsey-blue);
        }

        /* Fathom Live Dashboard Link */
        .fathom-link-card {
            background: linear-gradient(135deg, #f0f4ff, #e8f0fe);
            border: 2px solid var(--mckinsey-blue);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 15px;
            text-align: center;
        }

        .fathom-link-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 8px;
            font-weight: 700;
            color: var(--mckinsey-blue);
            font-size: 0.95rem;
        }

        .fathom-link-desc {
            color: #555;
            font-size: 0.85rem;
            margin: 0 0 12px;
        }

        .fathom-link-btn {
            display: inline-block;
            background: var(--mckinsey-blue);
            color: #fff;
            padding: 10px 25px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 700;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .fathom-link-btn:hover {
            background: #153050;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(30, 58, 95, 0.3);
        }

        .qb-field {
            margin-bottom: 18px;
        }

        .qb-field label {
            display: block;
            color: var(--mckinsey-blue);
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 6px;
        }

        .qb-field input,
        .qb-field textarea {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.3s;
            background: #f8f9fa;
            color: #333;
            font-family: inherit;
            box-sizing: border-box;
        }

        .qb-field input:focus,
        .qb-field textarea:focus {
            outline: none;
            border-color: var(--mckinsey-blue);
            background: #fff;
            box-shadow: 0 0 0 3px rgba(30, 58, 95, 0.1);
        }

        .qb-password-wrap {
            position: relative;
            display: flex;
            gap: 10px;
        }

        .qb-password-wrap input {
            flex: 1;
        }

        .qb-toggle-pw {
            background: var(--mckinsey-blue);
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.85rem;
            white-space: nowrap;
            transition: all 0.3s;
        }

        .qb-toggle-pw:hover {
            background: #153050;
        }

        .qb-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .qb-save-btn {
            background: var(--mckinsey-blue);
            color: #fff;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .qb-save-btn:hover {
            background: #153050;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(30, 58, 95, 0.3);
        }

        .qb-saved-status {
            color: #2e7d32;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .carousel-empty {
            color: #999;
            font-style: italic;
            text-align: center;
            padding: 40px 20px;
            padding: 30px 15px;
            font-size: 0.9rem;
        }

        /* Upload Success Overlay */
        .upload-success-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .upload-success-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .upload-success-modal {
            background: #fff;
            border-radius: 20px;
            padding: 40px 50px;
            text-align: center;
            max-width: 400px;
            transform: scale(0.8);
            transition: transform 0.3s;
        }

        .upload-success-overlay.show .upload-success-modal {
            transform: scale(1);
        }

        .upload-success-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .upload-success-title {
            color: #10B981;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .upload-success-text {
            color: #666;
            margin-bottom: 20px;
        }

        .upload-success-btn {
            background: var(--red);
            color: #fff;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-logout {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.5);
            color: #fff;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-logout:hover {
            border-color: #fff;
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
        }

        .demo-tier-selector {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid var(--gold);
            padding: 6px 12px;
            border-radius: 5px;
        }

        .demo-tier-selector label {
            color: var(--gold);
            font-size: 0.8rem;
            font-weight: 500;
        }

        .demo-tier-selector select {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--gold);
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
        }

        .btn-admin {
            background: linear-gradient(45deg, var(--red), var(--red-light));
            border: none;
            color: #fff;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-admin:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 51, 51, 0.4);
        }

        .btn-upgrade {
            background: linear-gradient(45deg, var(--gold), var(--gold-light));
            border: none;
            color: #000;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            animation: goldShine 3s linear infinite;
            background-size: 200% auto;
        }

        .btn-upgrade:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.5);
        }

        .upload-section, .deliverables-section {
            margin-bottom: 30px;
        }

        .upload-section h4, .deliverables-section h4 {
            color: #fff;
            margin-bottom: 10px;
        }

        .upload-description {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .upload-dropzone {
            border: 2px dashed rgba(30, 58, 95, 0.4);
            border-radius: 12px;
            padding: 25px 15px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            background: linear-gradient(135deg, #f8f9fa, #fff);
        }

        .upload-dropzone:hover, .upload-dropzone.dragover {
            border-color: var(--mckinsey-blue);
            background: linear-gradient(135deg, #e8f0fe, #d4e4fc);
        }

        .dropzone-icon {
            font-size: 3rem;
            display: block;
            margin-bottom: 10px;
        }

        .dropzone-content p {
            color: rgba(255, 255, 255, 0.8);
            margin: 5px 0;
        }

        .upload-browse {
            color: var(--mckinsey-blue);
            cursor: pointer;
            text-decoration: underline;
            font-weight: 600;
        }

        .upload-hint {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .uploaded-files {
            margin-top: 20px;
        }

        .uploaded-file {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .uploaded-file-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .uploaded-file-icon {
            font-size: 1.5rem;
        }

        .uploaded-file-name {
            color: #fff;
            font-weight: 500;
        }

        .uploaded-file-size {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8rem;
        }

        .uploaded-file-remove {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            font-size: 1.2rem;
        }

        .uploaded-file-remove:hover {
            color: var(--red);
        }

        .deliverables-empty {
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
            text-align: center;
            padding: 20px;
        }

        .portal-disclaimers {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .portal-disclaimers h5 {
            color: var(--mckinsey-blue) !important;
            margin-bottom: 15px;
            font-size: 1rem;
            font-weight: 700;
        }

        .portal-disclaimers ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .portal-disclaimers li {
            color: #555 !important;
            font-size: 0.9rem;
            line-height: 1.8;
            margin-bottom: 10px;
            padding-left: 15px;
            position: relative;
        }

        .portal-disclaimers li:before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: var(--red);
        }

        .portal-disclaimers li strong {
            color: var(--mckinsey-blue) !important;
        }

        /* Dashboard Layout */
        .dashboard-greeting {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .dashboard-logo {
            height: 50px;
            width: auto;
            background: #fff !important;
            padding: 8px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .dashboard-tier-badge {
            background: linear-gradient(45deg, var(--red), var(--red-light));
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .dashboard-section {
            margin-bottom: 35px;
        }

        .section-title {
            margin-bottom: 20px;
        }

        .section-title h4 {
            color: #fff;
            margin-bottom: 5px;
        }

        .section-subtitle {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
        }

        /* File Cards Grid - Visual Document Display */
        .files-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .file-card {
            background: linear-gradient(145deg, rgba(30, 30, 30, 0.9), rgba(20, 20, 20, 0.95));
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 0;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            overflow: hidden;
            position: relative;
        }

        .file-card:hover {
            border-color: var(--red);
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(255, 51, 51, 0.3);
        }

        .file-card:hover .file-overlay {
            opacity: 1;
        }

        .file-thumbnail {
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, rgba(255, 51, 51, 0.1), rgba(0, 0, 0, 0.5));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .file-thumbnail img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }

        .file-thumbnail .file-icon {
            font-size: 4rem;
            opacity: 0.9;
        }

        .file-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            padding: 15px;
        }

        .file-overlay .file-date {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .file-info {
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
        }

        .file-name {
            color: #fff;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .file-date {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8rem;
        }

        .file-download {
            display: inline-block;
            padding: 8px 16px;
            background: var(--red);
            color: #fff;
            font-size: 0.85rem;
            font-weight: 500;
            text-decoration: none;
            border-radius: 6px;
            margin-bottom: 8px;
            transition: all 0.2s;
        }

        .file-download:hover {
            background: var(--red-light);
            transform: scale(1.05);
        }

        .file-delete {
            display: inline-block;
            padding: 6px 12px;
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            text-decoration: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .file-delete:hover {
            background: rgba(255, 0, 0, 0.3);
            border-color: #ff4444;
            color: #fff;
        }

        .file-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }

        .file-delete {
            background: transparent;
            border: 1px solid rgba(255, 100, 100, 0.5);
            color: #ff6666;
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .file-delete:hover {
            background: rgba(255, 100, 100, 0.2);
            border-color: #ff6666;
        }

        .empty-state {
            color: rgba(255, 255, 255, 0.4);
            font-style: italic;
            text-align: center;
            padding: 30px;
            grid-column: 1 / -1;
        }

        /* Tier Theming - Gold */
        .portal-dashboard.tier-gold {
            border-color: var(--gold);
        }

        .portal-dashboard.tier-gold .dashboard-header h3 {
            background: linear-gradient(45deg, var(--gold), var(--gold-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .portal-dashboard.tier-gold .dashboard-tier-badge {
            background: linear-gradient(45deg, var(--gold), var(--gold-light));
            color: #000;
        }

        .portal-dashboard.tier-gold .upload-dropzone {
            border-color: rgba(255, 215, 0, 0.5);
        }

        .portal-dashboard.tier-gold .upload-dropzone:hover {
            border-color: var(--gold);
            background: rgba(255, 215, 0, 0.1);
        }

        .portal-dashboard.tier-gold .upload-browse {
            color: var(--gold);
        }

        .portal-dashboard.tier-gold .file-card:hover {
            border-color: var(--gold);
        }

        .portal-dashboard.tier-gold .file-download {
            color: var(--gold);
        }

        .portal-dashboard.tier-gold .btn-logout:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        /* Tier Theming - Diamond */
        .portal-dashboard.tier-diamond {
            border-color: #fff;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(0, 0, 0, 0.95));
        }

        .portal-dashboard.tier-diamond .dashboard-header h3 {
            background: linear-gradient(45deg, #fff, #e0e0e0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .portal-dashboard.tier-diamond .dashboard-tier-badge {
            background: linear-gradient(45deg, #fff, #e0e0e0);
            color: #000;
        }

        .portal-dashboard.tier-diamond .upload-dropzone {
            border-color: rgba(255, 255, 255, 0.5);
        }

        .portal-dashboard.tier-diamond .upload-dropzone:hover {
            border-color: #fff;
            background: rgba(255, 255, 255, 0.1);
        }

        .portal-dashboard.tier-diamond .upload-browse {
            color: #fff;
        }

        .portal-dashboard.tier-diamond .file-card:hover {
            border-color: #fff;
        }

        .portal-dashboard.tier-diamond .file-download {
            color: #fff;
        }

        .portal-dashboard.tier-diamond .btn-logout:hover {
            border-color: #fff;
            color: #fff;
        }

        /* ============================================
           ABOUT SECTION
        ============================================ */
        .about-content {
            max-width: 900px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 60px;
            align-items: center;
        }

        .about-content.about-three-col {
            max-width: 1200px;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 40px;
        }

        @media (max-width: 900px) {
            .about-content.about-three-col {
                grid-template-columns: 1fr;
                text-align: center;
            }
            .about-image-right {
                order: -1;
            }
        }

        @media (max-width: 768px) {
            .about-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }

        .about-image img {
            max-width: 300px;
            border-radius: 15px;
            border: 3px solid var(--red);
        }

        .about-image-right img {
            max-width: 300px;
            border-radius: 15px;
            border: 3px solid var(--red);
        }

        .about-text h3 {
            color: var(--red);
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        .about-text p {
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .credentials {
            display: flex;
            gap: 25px;
            margin-top: 30px;
            flex-wrap: wrap;
            justify-content: flex-start;
        }

        @media (max-width: 768px) {
            .credentials { justify-content: center; gap: 15px; }
            .credential-item { min-width: 100px; }
        }

        .credential-item {
            text-align: center;
        }

        .credential-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--red);
            white-space: nowrap;
        }

        .credential-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .credential-item {
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .credential-item:hover {
            transform: scale(1.1);
        }

        .credential-item:hover .credential-number,
        .credential-item:hover .credential-label {
            color: var(--red) !important;
        }

        /* Core Values */
        .core-values {
            max-width: 1000px;
            margin: 60px auto 0;
            padding-top: 40px;
            border-top: 1px solid rgba(30, 58, 95, 0.15);
        }

        .values-title {
            text-align: center;
            color: var(--red);
            font-size: 1.8rem;
            margin-bottom: 30px;
        }

        .values-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0;
        }

        @media (max-width: 768px) {
            .values-grid {
                grid-template-columns: 1fr;
            }
            /* Reorder on mobile for alternating colors */
            .value-efficiency { order: 1; }
            .value-adventure { order: 2; }
            .value-quality { order: 3; }
            .value-honesty { order: 4; }
        }

        .value-card {
            padding: 35px 30px;
            border: 1px solid rgba(30, 58, 95, 0.1);
        }

        .value-card h4 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .value-card p {
            color: #2d4a6f;
            line-height: 1.7;
            font-size: 0.95rem;
        }

        /* Efficiency - Red */
        /* Efficiency - Red */
        .value-efficiency {
            background: rgba(255, 255, 255, 0.95);
            border-left: 4px solid var(--red);
        }
        .value-efficiency h4 { color: var(--red); }

        /* Adventure - Navy Blue */
        .value-adventure {
            background: rgba(255, 255, 255, 0.95);
            border-left: 4px solid #1e3a5f;
        }
        .value-adventure h4 { color: #1e3a5f; }

        /* Honesty - Navy Blue */
        .value-honesty {
            background: rgba(255, 255, 255, 0.95);
            border-left: 4px solid #1e3a5f;
        }
        .value-honesty h4 { color: #1e3a5f; }

        /* Quality - McKinsey Blue */
        .value-quality {
            background: rgba(255, 255, 255, 0.95);
            border-left: 4px solid #0073CF;
        }
        .value-quality h4 { color: #0073CF; }

        /* ============================================
           FOOTER
        ============================================ */
        footer {
            background: rgba(0, 0, 0, 0.95);
            padding: 40px 60px;
            text-align: center;
            border-top: 1px solid rgba(255, 51, 51, 0.3);
        }

        .footer-logo {
            margin-bottom: 20px;
        }

        .footer-logo img {
            height: 55px;
            padding: 3px 5px;
            border-radius: 8px;
            transition: background 0.3s ease, transform 0.3s ease;
        }

        .footer-logo img:hover {
            background: rgba(30, 58, 95, 0.9);
            transform: scale(1.05);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: var(--red);
        }

        .footer-copy {
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.85rem;
        }

        .payment-methods {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .payment-icon {
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            opacity: 0.85;
            transition: opacity 0.3s, transform 0.3s;
        }

        .payment-icon:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .payment-icon.visa {
            background: #1a1f71;
            color: #fff;
        }

        .payment-icon.mastercard {
            background: linear-gradient(90deg, #eb001b 0%, #f79e1b 100%);
            color: #fff;
        }

        .payment-icon.amex {
            background: #006fcf;
            color: #fff;
        }

        .payment-icon.discover {
            background: #ff6000;
            color: #fff;
        }

        .payment-icon.paypal {
            background: #003087;
            color: #fff;
        }

        .payment-icon.applepay {
            background: #000;
            color: #fff;
        }

        .payment-icon.gpay {
            background: #fff;
            color: #333;
        }

        /* ============================================
           TOAST NOTIFICATIONS
        ============================================ */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--gray-dark);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            border-left: 4px solid var(--red);
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
            z-index: 10000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success {
            border-left-color: #28a745;
        }

        .toast.error {
            border-left-color: #dc3545;
        }

        .toast.info {
            border-left-color: #17a2b8;
        }

        /* ============================================
           TIER-BASED THEMING
        ============================================ */
        /* Gold Tier Theme */
        body.tier-gold .portal-dashboard {
            border-color: var(--gold);
        }
        body.tier-gold .portal-dashboard h3,
        body.tier-gold .portal-dashboard h4 {
            color: var(--gold);
        }
        body.tier-gold .upload-dropzone {
            border-color: rgba(255, 215, 0, 0.5);
        }
        body.tier-gold .upload-dropzone:hover {
            border-color: var(--gold);
            background: rgba(255, 215, 0, 0.1);
        }
        body.tier-gold .upload-browse {
            color: var(--gold);
        }
        body.tier-gold .btn-logout:hover {
            border-color: var(--gold);
            color: var(--gold);
        }
        body.tier-gold .portal-disclaimers li:before {
            color: var(--gold);
        }
        body.tier-gold .dashboard-header h3 {
            background: linear-gradient(45deg, var(--gold), var(--gold-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        /* Gold - Nav theming with shiny effect */
        body.tier-gold .nav-links a:hover,
        body.tier-gold .nav-links a.active {
            background: linear-gradient(90deg, #b8860b, #ffd700, #ffed4e, #ffd700, #b8860b);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: goldShine 2s linear infinite;
        }
        @keyframes goldShine {
            to { background-position: 200% center; }
        }
        body.tier-gold .nav-cta {
            background: linear-gradient(45deg, #b8860b, var(--gold), var(--gold-light), var(--gold));
            background-size: 200% auto;
            color: #000;
            animation: goldShine 3s linear infinite;
        }
        body.tier-gold .user-welcome {
            border-color: var(--gold);
        }
        body.tier-gold .section-title h4,
        body.tier-gold .dashboard-tier-badge {
            background: linear-gradient(90deg, #b8860b, #ffd700, #ffed4e, #ffd700, #b8860b);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: goldShine 2s linear infinite;
        }
        @media (max-width: 900px) {
            body.tier-gold .nav-links {
                border-top-color: var(--gold);
            }
            body.tier-gold .user-welcome {
                border-bottom-color: var(--gold);
            }
        }

        /* Diamond Tier Theme with shiny/shimmer effect */
        body.tier-diamond .portal-dashboard {
            border-color: #fff;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3), 0 0 60px rgba(200, 200, 255, 0.1);
        }
        body.tier-diamond .portal-dashboard h3,
        body.tier-diamond .portal-dashboard h4 {
            background: linear-gradient(90deg, #a0a0a0, #ffffff, #e0e0ff, #ffffff, #a0a0a0);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: diamondShine 2s linear infinite;
        }
        @keyframes diamondShine {
            to { background-position: 200% center; }
        }
        body.tier-diamond .upload-dropzone {
            border-color: rgba(255, 255, 255, 0.5);
        }
        body.tier-diamond .upload-dropzone:hover {
            border-color: #fff;
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }
        body.tier-diamond .upload-browse {
            background: linear-gradient(90deg, #a0a0a0, #ffffff, #e0e0ff, #ffffff, #a0a0a0);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: diamondShine 2s linear infinite;
        }
        body.tier-diamond .btn-logout:hover {
            border-color: #fff;
            color: #fff;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }
        body.tier-diamond .portal-disclaimers li:before {
            color: #fff;
        }
        body.tier-diamond .dashboard-header h3 {
            background: linear-gradient(90deg, #a0a0a0, #ffffff, #e0e0ff, #ffffff, #a0a0a0);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: diamondShine 2s linear infinite;
        }
        body.tier-diamond .section-title h4,
        body.tier-diamond .dashboard-tier-badge {
            background: linear-gradient(90deg, #a0a0a0, #ffffff, #e0e0ff, #ffffff, #a0a0a0);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: diamondShine 2s linear infinite;
        }
        /* Diamond - Nav theming with shimmer */
        body.tier-diamond .nav-links a:hover,
        body.tier-diamond .nav-links a.active {
            background: linear-gradient(90deg, #a0a0a0, #ffffff, #e0e0ff, #ffffff, #a0a0a0);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: diamondShine 2s linear infinite;
        }
        body.tier-diamond .nav-cta {
            background: linear-gradient(45deg, #c0c0c0, #ffffff, #e0e0ff, #ffffff);
            background-size: 200% auto;
            color: #000;
            animation: diamondShine 3s linear infinite;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }
        body.tier-diamond .user-welcome {
            border-color: #fff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }
        @media (max-width: 900px) {
            body.tier-diamond .nav-links {
                border-top-color: #fff;
            }
            body.tier-diamond .user-welcome {
                border-bottom-color: #fff;
            }
        }

        /* ============================================
           WHITE THEME (Mom-Friendly Mode)
           Preserving: video background, buttons, red accents
        ============================================ */
        body.white-theme {
            background: #f8f9fa;
            color: #222;
        }

        /* White Theme - Navigation */
        body.white-theme nav {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        body.white-theme .nav-links a {
            color: #333;
        }

        body.white-theme .nav-links a:hover,
        body.white-theme .nav-links a.active {
            color: var(--red);
        }

        body.white-theme #nav-welcome-text {
            color: #333;
        }

        @media (max-width: 900px) {
            body.white-theme .nav-links {
                background: rgba(255, 255, 255, 0.98);
            }
            body.white-theme .nav-links a {
                color: #333;
            }
            body.white-theme .user-welcome {
                background: rgba(255, 255, 255, 0.95);
                border-bottom-color: var(--red);
            }
        }

        /* White Theme - Sections */
        body.white-theme .section-dark {
            background: rgba(255, 255, 255, 0.95);
        }

        body.white-theme .section-header p {
            color: #555;
        }

        /* White Theme - Service Cards */
        body.white-theme .service-card {
            background: linear-gradient(135deg, rgba(255, 51, 51, 0.05), rgba(255, 255, 255, 0.95));
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        body.white-theme .service-card p {
            color: #444;
        }

        /* White Theme - Package Cards */
        body.white-theme .package-card {
            background: linear-gradient(135deg, rgba(255, 51, 51, 0.05), rgba(255, 255, 255, 0.98));
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        body.white-theme .package-card.gold {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(255, 255, 255, 0.98));
        }

        body.white-theme .package-card.diamond {
            background: linear-gradient(135deg, rgba(200, 200, 200, 0.15), rgba(255, 255, 255, 0.98));
        }

        body.white-theme .package-features li {
            color: #333;
            border-bottom-color: rgba(0, 0, 0, 0.08);
        }

        body.white-theme .package-price {
            background: rgba(255, 215, 0, 0.15);
        }

        /* White Theme - Guarantee Box */
        body.white-theme .guarantee-box {
            background: rgba(40, 167, 69, 0.08);
        }

        body.white-theme .guarantee-box p {
            color: #333;
        }

        /* White Theme - Portfolio */
        body.white-theme .portfolio-item {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        /* White Theme - About Section */
        body.white-theme .about-text p {
            color: #444;
        }

        body.white-theme .credential-label {
            color: #666;
        }

        /* White Theme - Value Cards */
        body.white-theme .value-card {
            border-color: rgba(0, 0, 0, 0.08);
        }

        body.white-theme .value-card p {
            color: #444;
        }

        body.white-theme .value-efficiency {
            background: rgba(255, 255, 255, 0.98);
        }

        body.white-theme .value-adventure {
            background: rgba(255, 255, 255, 0.98);
        }

        body.white-theme .value-honesty {
            background: rgba(255, 255, 255, 0.98);
        }

        body.white-theme .value-quality {
            background: rgba(255, 255, 255, 0.98);
        }

        body.white-theme .core-values {
            border-top-color: rgba(0, 0, 0, 0.1);
        }

        /* White Theme - Footer */
        body.white-theme footer {
            background: rgba(255, 255, 255, 0.95);
            border-top-color: rgba(255, 51, 51, 0.2);
        }

        body.white-theme .footer-links a {
            color: #555;
        }

        body.white-theme .footer-copy {
            color: #888;
        }

        /* White Theme - Portal Card */
        body.white-theme .portal-card {
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 4px 40px rgba(0, 0, 0, 0.12);
        }

        body.white-theme .portal-tab {
            color: #666;
        }

        body.white-theme .portal-tab.active {
            color: var(--red);
        }

        body.white-theme .form-label {
            color: #444;
        }

        body.white-theme .form-input {
            background: rgba(0, 0, 0, 0.03);
            border-color: rgba(0, 0, 0, 0.15);
            color: #222;
        }

        body.white-theme .form-input:focus {
            background: rgba(255, 51, 51, 0.03);
        }

        body.white-theme .auth-divider {
            color: #888;
        }

        body.white-theme .auth-divider::before,
        body.white-theme .auth-divider::after {
            background: rgba(0, 0, 0, 0.15);
        }

        body.white-theme .form-subtitle {
            color: #555;
        }

        body.white-theme .form-checkbox label {
            color: #444;
        }

        /* White Theme - Portal Dashboard */
        body.white-theme .portal-dashboard {
            background: var(--mckinsey-blue) !important;
            box-shadow: 0 4px 40px rgba(0, 0, 0, 0.12);
        }

        body.white-theme .dashboard-header {
            border-bottom-color: rgba(0, 0, 0, 0.1);
        }

        body.white-theme .upload-section h4,
        body.white-theme .deliverables-section h4 {
            color: #222;
        }

        body.white-theme .upload-description {
            color: #666;
        }

        body.white-theme .dropzone-content p {
            color: #444;
        }

        body.white-theme .upload-hint {
            color: #888;
        }

        body.white-theme .uploaded-file {
            background: rgba(0, 0, 0, 0.03);
        }

        body.white-theme .uploaded-file-name {
            color: #222;
        }

        body.white-theme .uploaded-file-size {
            color: #888;
        }

        body.white-theme .file-card {
            background: linear-gradient(145deg, rgba(250, 250, 250, 0.98), rgba(240, 240, 240, 0.95));
            border-color: rgba(0, 0, 0, 0.1);
        }

        body.white-theme .file-info {
            background: rgba(0, 0, 0, 0.02);
        }

        body.white-theme .file-name {
            color: #222;
        }

        body.white-theme .file-date {
            color: #888;
        }

        body.white-theme .empty-state {
            color: #888;
        }

        body.white-theme .portal-disclaimers {
            background: rgba(0, 0, 0, 0.02);
            border-color: rgba(0, 0, 0, 0.08);
        }

        body.white-theme .portal-disclaimers h5 {
            color: #444;
        }

        body.white-theme .portal-disclaimers li {
            color: #555;
        }

        body.white-theme .portal-disclaimers li strong {
            color: #333;
        }

        body.white-theme .deliverables-empty {
            color: #888;
        }

        /* White Theme - Admin Modal */
        body.white-theme .admin-modal-content,
        body.white-theme .legal-modal-content {
            background: #fff;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.2);
        }

        body.white-theme .admin-modal-header,
        body.white-theme .legal-modal-content h2 {
            border-bottom-color: rgba(0, 0, 0, 0.1);
        }

        body.white-theme .admin-modal-close,
        body.white-theme .legal-modal-close {
            color: #333;
        }

        body.white-theme .admin-tab {
            color: #666;
        }

        body.white-theme .admin-tab:hover {
            color: #222;
        }

        body.white-theme .admin-tabs {
            border-bottom-color: rgba(0, 0, 0, 0.1);
        }

        body.white-theme .admin-table th {
            color: #888;
        }

        body.white-theme .admin-table td {
            color: #222;
            border-bottom-color: rgba(0, 0, 0, 0.08);
        }

        body.white-theme .admin-table tr:hover td {
            background: rgba(0, 0, 0, 0.03);
        }

        body.white-theme .admin-form {
            background: rgba(0, 0, 0, 0.02);
            border-color: rgba(0, 0, 0, 0.08);
        }

        body.white-theme .admin-form-row label {
            color: #444;
        }

        body.white-theme .admin-form-row input,
        body.white-theme .admin-form-row select {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(0, 0, 0, 0.15);
            color: #222;
        }

        body.white-theme .admin-section-header h3 {
            color: #222;
        }

        body.white-theme .legal-modal-body {
            color: #333;
        }

        body.white-theme .legal-modal-body h3 {
            color: #222;
        }

        /* White Theme - Toast Notifications */
        body.white-theme .toast {
            background: #fff;
            color: #222;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.15);
        }

        /* White Theme - Sidebar Package Buttons */
        body.white-theme .package-btn {
            border-color: #333;
            color: #333;
        }

        body.white-theme .package-btn:hover {
            color: #fff;
        }

        /* White Theme - Hero section stays transparent over video */
        body.white-theme .hero-subtitle {
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        /* ============================================
           TOP HEADLINE SECTION
        ============================================ */
        .saas-top-section {
            background: linear-gradient(180deg, rgba(248, 250, 252, 0.95) 0%, rgba(238, 242, 255, 0.95) 100%);
            padding: 100px 40px 60px;
            text-align: center;
            position: relative;
        }

        .saas-top-content {
            max-width: 1100px;
            margin: 0 auto;
        }

        .saas-top-content h1 {
            font-size: 2.4rem;
            font-weight: 700;
            color: var(--saas-navy);
            margin-bottom: 50px;
        }

        @media (max-width: 768px) {
            .saas-top-content h1 {
                font-size: 1.8rem;
            }
            .saas-top-section {
                padding: 80px 20px 40px;
            }
        }

        .saas-top-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            margin-bottom: 50px;
        }

        @media (max-width: 1000px) {
            .saas-top-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .saas-top-cards {
                grid-template-columns: 1fr;
            }
        }

        .saas-top-card {
            background: #fff;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(11, 18, 32, 0.06);
            border: 1px solid rgba(11, 18, 32, 0.04);
            transition: all 0.3s ease;
        }

        .saas-top-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(11, 18, 32, 0.1);
        }

        .saas-top-card-img {
            background: linear-gradient(135deg, #e8eef5, #f5f7fa);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .saas-top-card-img img {
            width: 100%;
            height: 100px;
            object-fit: contain;
            border-radius: 8px;
        }

        .saas-top-card h4 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--saas-navy);
            margin-bottom: 8px;
        }

        .saas-top-card p {
            font-size: 0.8rem;
            color: #6B7280;
            line-height: 1.4;
        }

        .saas-top-cta {
            margin-top: 40px;
        }

        .saas-top-cta h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--saas-navy);
            margin-bottom: 20px;
        }

        /* ============================================
           SAAS HERO SECTION - White Gradient Overlay
        ============================================ */
        .saas-hero {
            background: transparent;
            padding: 100px 40px 0;
            position: relative;
            overflow-x: clip;
            overflow-y: visible;
            min-height: 80vh;
            display: flex;
            align-items: center;
        }

        /* Dark gradient overlay - opaque on left, transparent on right */
        .saas-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg,
                rgba(0, 0, 0, 0.85) 0%,
                rgba(0, 0, 0, 0.75) 30%,
                rgba(0, 0, 0, 0.5) 50%,
                rgba(0, 0, 0, 0.2) 70%,
                transparent 100%);
            pointer-events: none;
            z-index: 1;
        }

        .saas-hero-content {
            max-width: 600px;
            margin: 0;
            margin-left: 5%;
            display: block;
            position: relative;
            z-index: 2;
        }

        @media (max-width: 900px) {
            .saas-hero {
                padding: 80px 20px 0;
                min-height: auto;
            }
            .saas-hero::before {
                background: linear-gradient(180deg,
                    rgba(0, 0, 0, 0.5) 0%,
                    rgba(0, 0, 0, 0.4) 50%,
                    rgba(0, 0, 0, 0.2) 80%,
                    transparent 100%);
            }
            .saas-hero-content {
                max-width: 100%;
                margin-left: 0;
                text-align: center;
            }
            .video-hero-section {
                min-height: 60vh !important;
            }
        }

        .saas-hero-text {
            padding: 40px 0;
            text-align: center;
        }

        @media (max-width: 900px) {
            .saas-hero-text {
                padding: 20px 0;
                order: 2;
            }
        }

        .saas-hero-text h1 {
            font-size: 2.8rem;
            font-weight: 800;
            color: #fff;
            line-height: 1.2;
            margin-bottom: 20px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            .saas-hero-text h1 {
                font-size: 1.8rem;
            }
        }

        .saas-hero-text p {
            font-size: 1.05rem;
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.7;
            margin-bottom: 25px;
            text-shadow: 0 1px 5px rgba(0,0,0,0.3);
        }

        .saas-hero-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn-saas-primary {
            background: var(--saas-blue);
            color: #fff;
            padding: 14px 28px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            border: none;
            cursor: pointer;
        }

        .btn-saas-primary:hover {
            background: var(--saas-blue-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        .btn-saas-secondary {
            background: transparent;
            color: #fff;
            padding: 14px 28px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.7);
            cursor: pointer;
        }

        .btn-saas-secondary:hover {
            border-color: #fff;
            background: rgba(255, 255, 255, 0.1);
        }

        .saas-trust-indicators {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            font-size: 0.85rem;
            color: #6B7280;
        }

        @media (max-width: 900px) {
            .saas-trust-indicators {
                justify-content: center;
            }
        }

        .saas-trust-indicators span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .saas-trust-indicators span::before {
            content: 'âœ“';
            color: #10B981;
            font-weight: 700;
        }

        /* Hero Image - Pinned to right edge */
        .saas-hero-image {
            position: absolute;
            right: 0;
            bottom: 0;
            z-index: 10;
            display: flex;
            align-items: flex-end;
            justify-content: flex-end;
        }

        .saas-hero-image img {
            max-height: 75vh;
            width: auto;
            display: block;
            position: relative;
            z-index: 10;
            object-fit: cover;
            object-position: top center;
            margin-bottom: 0;
            margin-right: calc(-30vw - 100px);
            filter: drop-shadow(0 15px 50px rgba(0,0,0,0.2));
        }

        @media (max-width: 1200px) {
            .saas-hero-image img {
                max-height: 70vh;
            }
        }

        @media (max-width: 900px) {
            .saas-hero-image {
                position: relative;
                right: auto;
                bottom: auto;
                justify-content: center;
                margin-top: 20px;
            }
            .saas-hero-image img {
                max-height: 50vh;
                max-width: 300px;
                margin-bottom: -60px;
                margin-right: 0;
            }
        }

        /* Hero Logo - Centered over text */
        .hero-logo-img {
            max-width: 320px;
            margin: 0 auto 25px;
            display: block;
        }

        @media (max-width: 768px) {
            .hero-logo-img {
                max-width: 260px;
            }
        }

        /* ============================================
           WORK PRODUCTS CAROUSEL (McKinsey/Bain Style)
        ============================================ */
        .work-carousel-section {
            background: linear-gradient(180deg, rgba(248, 250, 252, 0.98) 0%, rgba(240, 245, 255, 0.95) 100%);
            padding: 60px 0 40px;
            position: relative;
            z-index: 5;
        }

        .carousel-title {
            text-align: center;
            margin-bottom: 30px;
        }

        .carousel-title h2 {
            color: #1e3a5f;
            font-size: 2.2rem;
            font-weight: 700;
        }

        .deliverables-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            padding: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .deliverable-card {
            background: #fff;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .deliverable-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .deliverable-card img {
            width: 100%;
            height: 140px;
            object-fit: cover;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .deliverable-card h4 {
            font-weight: 600;
            color: #1e3a5f;
            font-size: 0.95rem;
            margin: 15px 15px 5px;
        }

        .deliverable-card p {
            color: #6B7280;
            font-size: 0.8rem;
            margin: 0 15px 15px;
        }

        .carousel-cta {
            text-align: center;
            padding: 20px 40px 40px;
        }

        .carousel-cta h3 {
            color: #1e3a5f;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        @media (max-width: 900px) {
            .deliverables-grid {
                grid-template-columns: repeat(2, 1fr);
                padding: 20px;
            }
        }

        @media (max-width: 500px) {
            .deliverables-grid {
                grid-template-columns: 1fr;
            }
        }

        .work-carousel-container {
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            padding: 20px 40px 30px;
            cursor: grab;
            user-select: none;
            /* Firefox scrollbar */
            scrollbar-width: thin;
            scrollbar-color: var(--saas-blue) #e5e7eb;
        }

        .work-carousel-container:active {
            cursor: grabbing;
        }

        /* Custom scrollbar for desktop */
        .work-carousel-container::-webkit-scrollbar {
            height: 8px;
        }

        .work-carousel-container::-webkit-scrollbar-track {
            background: #e5e7eb;
            border-radius: 10px;
            margin: 0 40px;
        }

        .work-carousel-container::-webkit-scrollbar-thumb {
            background: var(--saas-blue);
            border-radius: 10px;
        }

        .work-carousel-container::-webkit-scrollbar-thumb:hover {
            background: var(--saas-blue-dark);
        }

        /* Hide scrollbar on mobile - drag works better */
        @media (max-width: 768px) {
            .work-carousel-container {
                scrollbar-width: none;
                -ms-overflow-style: none;
                padding: 20px 20px 20px;
            }
            .work-carousel-container::-webkit-scrollbar {
                display: none;
            }
        }

        .work-carousel {
            display: flex;
            gap: 20px;
            width: max-content;
        }

        .work-carousel-card {
            flex-shrink: 0;
            width: 280px;
            background: #fff;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .work-carousel-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .work-carousel-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .work-carousel-label {
            padding: 15px;
            text-align: center;
        }

        .work-carousel-label h4 {
            font-weight: 600;
            color: #1e3a5f;
            font-size: 0.95rem;
            margin: 0 0 5px 0;
        }

        .work-carousel-label p {
            color: #6B7280;
            font-size: 0.8rem;
            margin: 0;
        }

        .carousel-scroll-hint {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 15px;
            color: #6B7280;
            font-size: 0.85rem;
        }

        .scroll-arrow {
            animation: scrollHint 1.5s ease-in-out infinite;
        }

        @keyframes scrollHint {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(5px); }
        }

        @media (max-width: 768px) {
            .work-carousel-card {
                width: 240px;
            }
            .work-carousel-card img {
                height: 150px;
            }
            .work-carousel-container {
                padding: 20px;
            }
        }

        /* Work Modal for expanding images */
        .work-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .work-modal.active {
            display: flex;
        }

        .work-modal img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 8px;
        }

        .work-modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #fff;
            font-size: 2.5rem;
            cursor: pointer;
            z-index: 10001;
        }

        /* ============================================
           SAMPLE DELIVERABLES SECTION
        ============================================ */
        .saas-deliverables {
            background: linear-gradient(180deg, rgba(240, 245, 255, 0.95) 0%, rgba(248, 250, 252, 0.98) 100%);
            padding: 80px 40px;
            position: relative;
            z-index: 5;
        }

        .saas-deliverables-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .saas-deliverables-header h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--saas-navy);
            margin-bottom: 10px;
        }

        .saas-deliverables-header p {
            color: #6B7280;
            font-size: 1.1rem;
        }

        .saas-deliverables-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            max-width: 1100px;
            margin: 0 auto 50px;
        }

        @media (max-width: 1000px) {
            .saas-deliverables-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .saas-deliverables-grid {
                grid-template-columns: 1fr;
            }
            .saas-deliverables {
                padding: 120px 20px 60px;
            }
        }

        .saas-deliverable-card {
            background: #fff;
            border-radius: 16px;
            padding: 25px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(11, 18, 32, 0.06);
            border: 1px solid rgba(11, 18, 32, 0.04);
            transition: all 0.3s ease;
        }

        .saas-deliverable-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(11, 18, 32, 0.1);
        }

        .saas-deliverable-card img {
            width: 100%;
            max-width: 180px;
            height: 100px;
            object-fit: contain;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .saas-deliverable-card h4 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--saas-navy);
            margin-bottom: 8px;
        }

        .saas-deliverable-card p {
            font-size: 0.8rem;
            color: #6B7280;
            line-height: 1.5;
        }

        .saas-cta-center {
            text-align: center;
            margin-top: 40px;
        }

        .saas-cta-center h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--saas-navy);
            margin-bottom: 20px;
        }

        /* ============================================
           ABOUT LIGHTNING LEDGERZ SECTION
        ============================================ */
        .saas-about-section {
            background: transparent;
            padding: 80px 40px;
            position: relative;
            overflow: hidden;
        }

        .saas-about-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }

        @media (max-width: 900px) {
            .saas-about-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }

        .saas-about-text h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 20px;
        }

        .saas-about-text p {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.7;
            margin-bottom: 30px;
        }

        .saas-about-section .saas-hero-buttons .btn-saas-secondary {
            color: #fff;
            border-color: rgba(255, 255, 255, 0.4);
        }

        .saas-about-section .saas-hero-buttons .btn-saas-secondary:hover {
            border-color: #fff;
            background: rgba(255, 255, 255, 0.1);
        }

        .saas-about-section .saas-trust-indicators {
            color: rgba(255, 255, 255, 0.7);
        }

        .saas-about-section .saas-trust-indicators span::before {
            color: #10B981;
        }

        .saas-about-image {
            position: relative;
        }

        .saas-about-image .saas-hero-image-container {
            background: url('https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=800&q=80') center/cover;
        }

        @media (max-width: 900px) {
            .saas-about-image {
                order: -1;
            }
        }

        /* FP&A Deliverables Icon Cards */
        .saas-fpa-section {
            background: linear-gradient(180deg, #F8FAFC 0%, #F1F5F9 100%);
            padding: 80px 40px;
        }

        .saas-fpa-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .saas-fpa-header h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--saas-navy);
            margin-bottom: 10px;
        }

        .saas-fpa-header p {
            color: #6B7280;
            font-size: 1.1rem;
        }

        .saas-fpa-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            max-width: 1100px;
            margin: 0 auto;
        }

        @media (max-width: 1000px) {
            .saas-fpa-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .saas-fpa-grid {
                grid-template-columns: 1fr;
            }
        }

        .saas-fpa-card {
            background: #fff;
            border-radius: 16px;
            padding: 30px 25px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(11, 18, 32, 0.06);
            border: 1px solid rgba(11, 18, 32, 0.04);
            transition: all 0.3s ease;
        }

        .saas-fpa-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(11, 18, 32, 0.1);
        }

        .saas-fpa-icon {
            width: 60px;
            height: 60px;
            background: var(--saas-navy);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 1.5rem;
        }

        .saas-fpa-card h4 {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--saas-navy);
            margin-bottom: 10px;
        }

        .saas-fpa-card p {
            font-size: 0.9rem;
            color: #6B7280;
            line-height: 1.6;
        }

        /* Legacy modern section support */
        .modern-section {
            display: none;
        }

        .modern-steps-section {
            display: none;
        }

        .modern-card h4 {
            color: #1a1a2e;
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .modern-card p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* 3 Steps Section */
        .modern-steps-section {
            background: url('https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=1400&q=80') center/cover;
            position: relative;
            padding: 80px 40px;
        }

        .modern-steps-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.92), rgba(26, 26, 46, 0.85));
        }

        .modern-steps-content {
            position: relative;
            z-index: 1;
            max-width: 1100px;
            margin: 0 auto;
        }

        .modern-steps-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .modern-steps-header h3 {
            font-size: 2rem;
            color: #fff;
            margin-bottom: 10px;
        }

        .modern-steps-header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
        }

        .modern-steps-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }

        @media (max-width: 800px) {
            .modern-steps-grid {
                grid-template-columns: 1fr;
            }
        }

        .modern-step {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 35px 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .modern-step:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.12);
        }

        .modern-step-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, var(--red), #ff6b6b);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 1.4rem;
            font-weight: 700;
            color: #fff;
        }

        .modern-step h4 {
            color: #fff;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .modern-step p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Stats Bar */
        .modern-stats {
            display: flex;
            justify-content: center;
            gap: 50px;
            flex-wrap: wrap;
            margin-top: 50px;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modern-stat {
            text-align: center;
        }

        .modern-stat-number {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--red);
            display: block;
        }

        .modern-stat-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
            margin-top: 5px;
        }

        .modern-stat {
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .modern-stat:hover {
            transform: scale(1.1);
        }

        .modern-stat:hover .modern-stat-number,
        .modern-stat:hover .modern-stat-label {
            color: var(--red) !important;
        }

    </style>
</head>
<body>
    <!-- Video Background - Using iframe for universal compatibility including iOS -->
    <div class="video-background">
        <iframe
            id="bg-video"
            src="https://streamable.com/e/0ek0up?autoplay=1&nocontrols=1&loop=1&muted=1"
            frameborder="0"
            allow="autoplay; fullscreen"
            allowfullscreen>
        </iframe>
    </div>
    <div class="video-overlay"></div>

    <!-- Navigation -->
    <nav>
        <a href="#top" class="logo" onclick="goHome()" title="Back to home">
            <img src="LightningLedgerzLogo.png" alt="Lightning Ledgerz Logo">
        </a>
        <div id="user-welcome-nav" class="user-welcome" style="display: none;">
            <span id="nav-welcome-text">Hi, User!</span>
            <span id="nav-plan-badge" class="plan-badge badge-basic">Basic</span>
        </div>
        <ul class="nav-links" id="nav-links">
            <li class="mobile-only"><a href="#portal" onclick="closeMobileMenu()" class="mobile-cta">Get Started</a></li>
            <li><a href="#pricing" onclick="closeMobileMenu()">Services</a></li>
            <li><a href="#work" onclick="closeMobileMenu()">Portfolio</a></li>
            <li><a href="#about" onclick="closeMobileMenu()">About</a></li>
            <li><a href="#schedule" onclick="closeMobileMenu()">Schedule</a></li>
            <li><a href="#portal" onclick="closeMobileMenu()">Portal</a></li>
            <!-- Contact for mobile only -->
            <li class="mobile-only nav-package-divider"></li>
            <li class="mobile-only"><a href="tel:+17025502513" onclick="closeMobileMenu()" style="display: flex; align-items: center; gap: 8px;">&#9742; (702) 550-2513</a></li>
            <li class="mobile-only"><a href="mailto:zprizant@lightningledgerz.com" onclick="closeMobileMenu()" style="display: flex; align-items: center; gap: 8px;">&#9993; zprizant@lightningledgerz.com</a></li>
            <!-- Package buttons for mobile only -->
            <li class="mobile-only nav-package-divider"></li>
            <li class="mobile-only"><a href="#basic-card" onclick="highlightPackageCard('basic-card'); closeMobileMenu(); return false;" class="nav-package-link basic">âš¡ Basic</a></li>
            <li class="mobile-only"><a href="#gold-card" onclick="highlightPackageCard('gold-card'); closeMobileMenu(); return false;" class="nav-package-link gold">âœ¨ Gold</a></li>
            <li class="mobile-only"><a href="#diamond-card" onclick="highlightPackageCard('diamond-card'); closeMobileMenu(); return false;" class="nav-package-link diamond">ðŸ’Ž Diamond</a></li>
        </ul>
        <div class="nav-contact-info">
            <a href="tel:+17025502513">&#9742; (702) 550-2513</a>
            <a href="mailto:zprizant@lightningledgerz.com">&#9993; zprizant@lightningledgerz.com</a>
        </div>
        <a href="#portal" class="nav-cta">Get Started</a>
        <a href="tel:+17025502513" class="nav-mobile-phone">&#9742; (702) 550-2513</a>
        <button class="nav-mobile-toggle" id="hamburger-btn" onclick="toggleMobileMenu()">â˜°</button>
    </nav>

    <!-- Package Sidebar Buttons -->
    <div class="package-sidebar">
        <a href="javascript:void(0)" class="package-btn basic" id="btn-basic" onclick="event.preventDefault(); highlightPackageCard('basic-card');">
            âš¡ Basic Package
        </a>
        <a href="javascript:void(0)" class="package-btn gold" id="btn-gold" onclick="event.preventDefault(); highlightPackageCard('gold-card');">
            âœ¨ Gold Package
        </a>
        <a href="javascript:void(0)" class="package-btn diamond" id="btn-diamond" onclick="event.preventDefault(); highlightPackageCard('diamond-card');">
            ðŸ’Ž Diamond Package
        </a>
    </div>

    <!-- CLEAN SAAS SECTION: Hero with Headshot -->
    <section class="saas-hero" id="top">
        <div class="saas-hero-content">
            <div class="saas-hero-text">
                <img src="LightningLedgerzLogo.png" alt="Lightning Ledgerz" class="hero-logo-img">
                <p>Who says lightning never strikes twice? Get consistent: Budget vs. Actual Reporting, Financial Modeling, Boardroom-Ready Decks & Dashboards crafted by an expert â€” not an algorithm. Lightning fast so you can focus on what makes your business shine.</p>
                <div class="saas-hero-buttons">
                    <a href="#work" class="btn-saas-primary">View Work</a>
                    <a href="#portal" class="btn-saas-secondary">Get Started</a>
                </div>
            </div>
            <div class="saas-hero-image">
                <img src="zacfullsuitnoback.png" alt="Zac Prizant - FP&A Expert">
            </div>
        </div>
    </section>

    <!-- Work Products Carousel (McKinsey/Bain Style) -->
    <section class="work-carousel-section" id="work">
        <div class="carousel-title">
            <h2>Sample FP&A Deliverables</h2>
        </div>
        <div class="work-carousel-container" id="work-carousel-container">
            <div class="work-carousel" id="work-carousel">
                <div class="work-carousel-card" onclick="openWorkModal('slide-budget-vs-actual.png')">
                    <img src="slide-budget-vs-actual.png" alt="Budget vs Actual">
                    <div class="work-carousel-label">
                        <h4>Budget vs Actual</h4>
                        <p>Monthly variance tracking</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('slide-income-benchmarking.png')">
                    <img src="slide-income-benchmarking.png" alt="Income Benchmarking">
                    <div class="work-carousel-label">
                        <h4>Income Benchmarking</h4>
                        <p>Industry comparison analysis</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('dynamicdashboards.png')">
                    <img src="dynamicdashboards.png" alt="KPI Dashboard">
                    <div class="work-carousel-label">
                        <h4>KPI Dashboard</h4>
                        <p>Track performance metrics</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('slide-operational-goals.png')">
                    <img src="slide-operational-goals.png" alt="Operational Goals">
                    <div class="work-carousel-label">
                        <h4>Operational Goals</h4>
                        <p>Strategic planning & scenarios</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('slide-client-analysis.png')">
                    <img src="slide-client-analysis.png" alt="Client Analysis">
                    <div class="work-carousel-label">
                        <h4>Client Analysis</h4>
                        <p>Geographic insights</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('slide-expense-waterfall.png')">
                    <img src="slide-expense-waterfall.png" alt="Expense Waterfall">
                    <div class="work-carousel-label">
                        <h4>Expense Waterfall</h4>
                        <p>Cost flow visualization</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('slide-revenue-trend.png')">
                    <img src="slide-revenue-trend.png" alt="Revenue Trend">
                    <div class="work-carousel-label">
                        <h4>Revenue Trend</h4>
                        <p>Growth trajectory analysis</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('slide-expense-breakdown.png')">
                    <img src="slide-expense-breakdown.png" alt="Expense Breakdown">
                    <div class="work-carousel-label">
                        <h4>Expense Breakdown</h4>
                        <p>Category & year analysis</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('slide-cost-comparison.png')">
                    <img src="slide-cost-comparison.png" alt="Cost Comparison">
                    <div class="work-carousel-label">
                        <h4>Cost Comparison</h4>
                        <p>Side-by-side expense analysis</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('slide-revenue-by-customer.png')">
                    <img src="slide-revenue-by-customer.png" alt="Revenue by Customer">
                    <div class="work-carousel-label">
                        <h4>Revenue by Customer</h4>
                        <p>Client concentration insights</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('slide-profit-margin.png')">
                    <img src="slide-profit-margin.png" alt="Profit Margin">
                    <div class="work-carousel-label">
                        <h4>Profit Margin</h4>
                        <p>Margin trend analysis</p>
                    </div>
                </div>
                <div class="work-carousel-card" onclick="openWorkModal('slide-market-analysis.png')">
                    <img src="slide-market-analysis.png" alt="Market Analysis">
                    <div class="work-carousel-label">
                        <h4>Market Analysis</h4>
                        <p>Competitive positioning</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="carousel-scroll-hint">
            <span>Drag to explore</span>
            <span class="scroll-arrow">â†’</span>
        </div>

        <div class="carousel-cta">
            <h3>Get These Reports for Your Business</h3>
            <a href="#portal" class="btn-saas-primary">Start My Free Trial â†’</a>
        </div>
    </section>

    <!-- ORIGINAL HERO: Video Background with Logo + Buttons -->
    <section class="video-hero-section" style="position: relative; min-height: 100vh; display: flex; align-items: center; justify-content: center; text-align: center; background: transparent;">
        <div style="position: relative; z-index: 1; padding: 60px 20px;">
            <img src="LightningLedgerzLogo.png" alt="Lightning Ledgerz" style="max-width: 350px; margin-bottom: 40px;">
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <a href="#pricing" class="btn-primary" style="background: linear-gradient(45deg, var(--red), var(--red-light)); color: white; padding: 1rem 2.5rem; border-radius: 50px; font-size: 1.1rem; font-weight: 700; text-decoration: none; box-shadow: 0 4px 15px rgba(255, 51, 51, 0.4);">View Packages</a>
                <a href="#portal" style="background: transparent; color: white; border: 2px solid white; padding: 1rem 2.5rem; border-radius: 50px; font-size: 1.1rem; font-weight: 600; text-decoration: none;">Get Started</a>
            </div>
        </div>
    </section>


    <!-- Pricing Section -->
    <section class="section" id="pricing">
        <div class="section-header">
            <h2>Pricing Packages</h2>
            <p>Flexible plans designed to fit your business needs.</p>
        </div>

        <div style="text-align: center; margin-bottom: 20px;">
            <button onclick="openQuizModal()" style="background: none; border: 2px solid rgba(255,255,255,0.3); color: rgba(255,255,255,0.85); padding: 10px 24px; border-radius: 30px; font-size: 0.9rem; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='none'">
                ðŸŽ¯ Not sure which plan fits? Take the 30-second quiz â†’
            </button>
        </div>

        <div class="pricing-toggle-container">
            <span class="pricing-toggle-label active" id="monthly-label">Month-to-Month</span>
            <div class="pricing-toggle" id="pricing-toggle" onclick="togglePricingPeriod()">
                <div class="pricing-toggle-knob"></div>
            </div>
            <span class="pricing-toggle-label" id="yearly-label">12-Month Commitment</span>
            <span class="pricing-save-badge">Save 20%</span>
        </div>

        <!-- Promo Code Input -->
        <div style="display: flex; justify-content: center; margin-bottom: 25px;">
            <div style="background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.2); border-radius: 50px; padding: 8px 8px 8px 20px; display: flex; align-items: center; gap: 10px; max-width: 400px; width: 100%;">
                <span style="color: rgba(255,255,255,0.6); font-size: 0.9rem; white-space: nowrap;">ðŸ· Promo code</span>
                <input type="text" id="promo-code-input" placeholder="Enter code" maxlength="30"
                    style="flex: 1; background: none; border: none; outline: none; color: #fff; font-size: 0.95rem; min-width: 0;"
                    oninput="this.value = this.value.toUpperCase()"
                    onkeydown="if(event.key==='Enter') applyPromoCode()">
                <button onclick="applyPromoCode()" style="background: var(--gold); color: #1e3a5f; border: none; padding: 8px 18px; border-radius: 30px; font-weight: 700; font-size: 0.85rem; cursor: pointer; white-space: nowrap;">Apply</button>
            </div>
        </div>
        <div id="promo-result" style="text-align: center; margin-bottom: 15px; font-size: 0.9rem; min-height: 20px;"></div>

        <div class="package-grid">
            <div class="package-card" id="basic-card">
                <h3>âš¡ Basic Package</h3>
                <div class="package-price" id="basic-price">
                    <span class="monthly-price">$799/month</span>
                    <span class="yearly-price">$639/month<div class="yearly-savings">12-month commitment â€¢ Save $1,920/year</div></span>
                </div>
                <div class="package-trial">First month FREE</div>
                <ul class="package-features">
                    <li>Comprehensive budget creation</li>
                    <li>Monthly financial reporting</li>
                    <li>Basic financial analysis</li>
                    <li>Variance commentary</li>
                    <li>Email support</li>
                </ul>
                <button onclick="selectPlan('basic')" class="btn-primary">Start Free Trial</button>
            </div>

            <div class="package-card gold" id="gold-card">
                <div class="package-popular">Most Popular</div>
                <h3>âœ¨ Gold Package</h3>
                <div class="package-price" id="gold-price">
                    <span class="monthly-price">$1,299/month</span>
                    <span class="yearly-price">$1,039/month<div class="yearly-savings">12-month commitment â€¢ Save $3,120/year</div></span>
                </div>
                <div class="package-trial">First month FREE</div>
                <ul class="package-features">
                    <li>Everything in Basic</li>
                    <li>Weekly strategic calls</li>
                    <li>Advanced financial modeling</li>
                    <li>Cash flow optimization</li>
                    <li>KPI dashboard creation</li>
                    <li>Priority support</li>
                </ul>
                <button onclick="selectPlan('gold')" class="btn-primary">Start Free Trial</button>
            </div>

            <div class="package-card diamond" id="diamond-card">
                <h3>ðŸ’Ž Diamond Package</h3>
                <div class="package-price" id="diamond-price">
                    <span class="monthly-price">$3,999/month</span>
                    <span class="yearly-price">$3,199/month<div class="yearly-savings">12-month commitment â€¢ Save $9,600/year</div></span>
                </div>
                <div class="package-trial">First month FREE</div>
                <ul class="package-features">
                    <li>Everything in Gold</li>
                    <li>Fractional CFO services</li>
                    <li>Complete strategic planning</li>
                    <li>Investment & funding guidance</li>
                    <li>Board presentation support</li>
                    <li>Direct phone access</li>
                </ul>
                <button onclick="selectPlan('diamond')" class="btn-primary">Start Free Trial</button>
            </div>
        </div>

        <div class="guarantee-box">
            <p><strong>90-Day Satisfaction Guarantee:</strong> Not seeing results? Get 50% back within your first 3 months. No questions asked.</p>
        </div>
    </section>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox()">
        <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
        <img id="lightbox-img" src="" alt="Portfolio Image">
    </div>

    <!-- Legal Modals -->
    <div class="legal-modal" id="legal-modal">
        <div class="legal-modal-content" onclick="event.stopPropagation()">
            <button class="legal-modal-close" onclick="closeLegalModal()">&times;</button>
            <h2 id="legal-modal-title">Terms of Service</h2>
            <div class="legal-modal-body" id="legal-modal-body"></div>
        </div>
    </div>

    <!-- Upgrade Modal -->
    <div class="upgrade-modal" id="upgrade-modal" onclick="closeUpgradeModal()">
        <div class="upgrade-modal-content" onclick="event.stopPropagation()">
            <div class="upgrade-modal-header">
                <button class="upgrade-modal-close" onclick="closeUpgradeModal()">&times;</button>
                <h2>Ready to Level Up?</h2>
                <p>Choose the plan that fits your business goals</p>
            </div>
            <div class="upgrade-plans-grid">
                <!-- Gold -->
                <div class="upgrade-plan-card">
                    <div class="upgrade-plan-badge badge-gold">âœ¨ Most Popular</div>
                    <h3>Gold Package</h3>
                    <div class="upgrade-plan-price">$1,299<span>/month</span></div>
                    <ul class="upgrade-upsells">
                        <li><span class="check">âœ“</span> Weekly strategy calls with your advisor</li>
                        <li><span class="check">âœ“</span> Advanced financial modeling & forecasting</li>
                        <li><span class="check">âœ“</span> Cash flow optimization planning</li>
                        <li><span class="check">âœ“</span> Custom KPI dashboard creation</li>
                        <li><span class="check">âœ“</span> Priority email & chat support</li>
                        <li><span class="check">âœ“</span> Unlimited document uploads</li>
                    </ul>
                    <button class="upgrade-plan-btn btn-gold" onclick="selectPlan('gold'); closeUpgradeModal();">Upgrade to Gold</button>
                </div>
                <!-- Diamond -->
                <div class="upgrade-plan-card">
                    <div class="upgrade-plan-badge badge-diamond">ðŸ’Ž Full Service</div>
                    <h3>Diamond Package</h3>
                    <div class="upgrade-plan-price">$3,999<span>/month</span></div>
                    <ul class="upgrade-upsells">
                        <li><span class="check">âœ“</span> Fractional CFO â€” your financial co-pilot</li>
                        <li><span class="check">âœ“</span> Board & investor presentation support</li>
                        <li><span class="check">âœ“</span> Hourly reporting & real-time dashboards</li>
                        <li><span class="check">âœ“</span> Complete strategic financial planning</li>
                        <li><span class="check">âœ“</span> Direct phone access to Zac</li>
                        <li><span class="check">âœ“</span> Everything in Gold, plus more</li>
                    </ul>
                    <button class="upgrade-plan-btn btn-diamond" onclick="selectPlan('diamond'); closeUpgradeModal();">Upgrade to Diamond</button>
                </div>
            </div>
            <div class="upgrade-modal-footer">
                <a href="mailto:zprizant@lightningledgerz.com">Have questions? Email zprizant@lightningledgerz.com â†’</a>
            </div>
        </div>
    </div>

    <!-- NDA / Client Services Agreement Modal -->
    <div class="nda-modal" id="nda-modal">
        <div class="nda-modal-content" onclick="event.stopPropagation()">
            <div class="nda-header">
                <h2>âš¡ Client Services Agreement</h2>
                <p>Please review and sign before accessing your Lightning Ledgerz portal</p>
            </div>

            <!-- Step 1: Enter details -->
            <div class="nda-step" id="nda-step-1">
                <p style="color:#555; margin-bottom:20px; font-size:0.9rem;">Enter your company information below. This will be used to generate your personalized Client Services Agreement, Confidentiality & NDA, and Payment Authorization.</p>
                <div class="nda-step-inputs">
                    <div class="nda-input-group">
                        <label>Company / Business Name *</label>
                        <input type="text" id="nda-company" placeholder="e.g., Acme Corp, LLC" autocomplete="organization">
                    </div>
                    <div class="nda-input-group">
                        <label>Authorized Representative Full Name *</label>
                        <input type="text" id="nda-rep-name" placeholder="e.g., John Smith" autocomplete="name">
                    </div>
                    <div class="nda-input-group">
                        <label>Title / Role at Company</label>
                        <input type="text" id="nda-rep-title" placeholder="e.g., CEO, Owner, CFO" autocomplete="organization-title">
                    </div>
                </div>
                <p style="color:#888; font-size:0.8rem; margin-top:15px;">âš  Please double-check your company name and representative name. By accepting this agreement, you confirm these details are accurate. If any information is entered incorrectly, the agreement remains legally binding on the named parties; however, you may contact zprizant@lightningledgerz.com to request an amendment.</p>
                <button class="nda-generate-btn" onclick="generateNDA()">Generate My Agreement â†’</button>
            </div>

            <!-- Step 2: Review + Sign -->
            <div class="nda-document" id="nda-step-2">
                <div class="nda-doc-toolbar">
                    <span id="nda-doc-label">Client Services Agreement â€” <strong id="nda-doc-company"></strong></span>
                    <button class="nda-print-btn" onclick="window.print()">ðŸ–¨ Print / Save PDF</button>
                </div>
                <div class="nda-text-area" id="nda-text-area">
                    <!-- Populated by JS -->
                </div>
                <div class="nda-accept-section">
                    <div class="nda-checkboxes">
                        <label class="nda-checkbox-item"><input type="checkbox" class="nda-cb" onchange="checkNDABoxes()"> I have read and understand this Agreement, including the Confidentiality & Non-Disclosure provisions (Section 9)</label>
                        <label class="nda-checkbox-item"><input type="checkbox" class="nda-cb" onchange="checkNDABoxes()"> I agree to be legally bound by all terms of this Agreement</label>
                        <label class="nda-checkbox-item"><input type="checkbox" class="nda-cb" onchange="checkNDABoxes()"> I authorize Lightning Ledgerz to charge my payment method on file for Services rendered</label>
                        <label class="nda-checkbox-item"><input type="checkbox" class="nda-cb" onchange="checkNDABoxes()"> I understand that Consultant's Services are administrative and advisory only, and do not constitute licensed professional, legal, tax, or investment advice</label>
                    </div>
                    <button class="nda-accept-btn" id="nda-accept-btn" disabled onclick="acceptNDA()">I Accept This Agreement â€” Enter Portal</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Plan Finder Quiz Modal -->
    <div class="quiz-modal" id="quiz-modal" onclick="closeQuizModal()">
        <div class="quiz-modal-content" onclick="event.stopPropagation()">
            <div class="quiz-header">
                <button class="quiz-close" onclick="closeQuizModal()">&times;</button>
                <h2>Find Your Perfect Plan</h2>
                <p>Select everything your business needs â€” I'll match you to the right package</p>
            </div>
            <div class="quiz-body">
                <div class="quiz-question">What does your business need? (Select all that apply)</div>
                <div class="quiz-checks" id="quiz-checks">
                    <label class="quiz-check-item"><input type="checkbox" value="1"> Monthly financial reports</label>
                    <label class="quiz-check-item"><input type="checkbox" value="1"> Budget vs. actual tracking</label>
                    <label class="quiz-check-item"><input type="checkbox" value="1"> Bookkeeping support</label>
                    <label class="quiz-check-item"><input type="checkbox" value="1"> Variance analysis & commentary</label>
                    <label class="quiz-check-item"><input type="checkbox" value="2"> Weekly strategy calls</label>
                    <label class="quiz-check-item"><input type="checkbox" value="2"> Cash flow forecasting</label>
                    <label class="quiz-check-item"><input type="checkbox" value="2"> Advanced financial modeling</label>
                    <label class="quiz-check-item"><input type="checkbox" value="2"> Custom KPI dashboard</label>
                    <label class="quiz-check-item"><input type="checkbox" value="3"> Fractional CFO services</label>
                    <label class="quiz-check-item"><input type="checkbox" value="3"> Board or investor presentations</label>
                    <label class="quiz-check-item"><input type="checkbox" value="3"> Hourly or real-time reporting</label>
                    <label class="quiz-check-item"><input type="checkbox" value="3"> Direct phone access to advisor</label>
                    <label class="quiz-check-item consult-pill"><input type="checkbox" value="consult"> Not sure / I need a consultation</label>
                </div>
                <div style="text-align: center; margin-bottom: 20px;">
                    <button onclick="runQuiz()" style="background: #1e3a5f; color: #fff; border: none; padding: 12px 35px; border-radius: 30px; font-weight: 700; font-size: 1rem; cursor: pointer;">See My Recommendation â†’</button>
                </div>
                <!-- Result -->
                <div class="quiz-result" id="quiz-result">
                    <div class="quiz-result-label">Recommended for you</div>
                    <div class="quiz-result-plan" id="quiz-result-plan">Gold Package</div>
                    <div class="quiz-result-price" id="quiz-result-price">$1,299/month</div>
                    <ul class="quiz-result-features" id="quiz-result-features"></ul>
                    <button class="quiz-cta-btn" id="quiz-cta-btn" onclick="">Get Started with This Plan</button>
                </div>
            </div>
            <div class="quiz-footer">
                <button onclick="closeQuizModal()">Skip for now â€” I'll explore on my own</button>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard Modal -->
    <div class="admin-modal" id="admin-modal">
        <div class="admin-modal-content" onclick="event.stopPropagation()">
            <div class="admin-modal-header">
                <h2>Admin Dashboard</h2>
                <button class="admin-modal-close" onclick="closeAdminDashboard()">&times;</button>
            </div>
            <div class="admin-tabs">
                <button class="admin-tab active" onclick="switchAdminTab('users')">Users</button>
                <button class="admin-tab" onclick="switchAdminTab('reports')">Reports</button>
                <button class="admin-tab" onclick="switchAdminTab('quickbooks')">Platforms</button>
                <button class="admin-tab" onclick="switchAdminTab('promo')">Promo Codes</button>
            </div>
            <div class="admin-tab-content">
                <!-- Users Tab -->
                <div id="admin-tab-users" class="admin-tab-pane active">
                    <div class="admin-section-header">
                        <h3>Manage Users</h3>
                        <button class="btn-refresh" onclick="loadAdminUsers()">Refresh</button>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="admin-users-table">
                            <thead>
                                <tr>
                                    <th>Email</th>
                                    <th>Name</th>
                                    <th>Company</th>
                                    <th>Tier</th>
                                    <th>Joined</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-users-body">
                                <tr><td colspan="6" class="loading-row">Loading users...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- Reports Tab -->
                <div id="admin-tab-reports" class="admin-tab-pane">
                    <div class="admin-section-header">
                        <h3>Upload Report for User</h3>
                    </div>
                    <div class="admin-form">
                        <div class="admin-form-row">
                            <label>Select User:</label>
                            <select id="report-user-select">
                                <option value="">-- Select a user --</option>
                            </select>
                        </div>
                        <div class="admin-form-row">
                            <label>Report Name:</label>
                            <input type="text" id="report-name" placeholder="e.g., Q4 Budget Analysis">
                        </div>
                        <div class="admin-form-row">
                            <label>Description (optional):</label>
                            <input type="text" id="report-description" placeholder="Brief description">
                        </div>
                        <div class="admin-form-row">
                            <label>Report File:</label>
                            <input type="file" id="report-file" accept=".pdf,.xlsx,.xls,.csv,.docx,.pptx">
                        </div>
                        <button class="btn-primary" onclick="uploadUserReport()">Upload Report</button>
                    </div>
                    <div class="admin-section-header" style="margin-top: 30px;">
                        <h3>Recent Reports</h3>
                        <button class="btn-refresh" onclick="loadAdminReports()">Refresh</button>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Report Name</th>
                                    <th>User</th>
                                    <th>Uploaded</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-reports-body">
                                <tr><td colspan="4" class="loading-row">Loading reports...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- Platforms Tab -->
                <div id="admin-tab-quickbooks" class="admin-tab-pane">
                    <div class="admin-section-header">
                        <h3>Client Platform Credentials</h3>
                        <button class="btn-refresh" onclick="loadAdminPlatformCredentials()">Refresh</button>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table" id="admin-qb-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Platform</th>
                                    <th>Type</th>
                                    <th>URL</th>
                                    <th>Username</th>
                                    <th>Password</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody id="admin-qb-body">
                                <tr><td colspan="7" class="loading-row">Click Refresh to load...</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Dashboard Link Manager -->
                    <div class="admin-section-header" style="margin-top: 30px;">
                        <h3>Set Live Dashboard Link for User</h3>
                    </div>
                    <div class="admin-form">
                        <div class="admin-form-row">
                            <label>Select User:</label>
                            <select id="fathom-user-select">
                                <option value="">-- Select a user --</option>
                            </select>
                        </div>
                        <div class="admin-form-row">
                            <label>Dashboard URL (Fathom, etc.):</label>
                            <input type="url" id="fathom-url" placeholder="Paste the live dashboard link here...">
                        </div>
                        <button class="btn-primary" onclick="saveDashboardLink()">Save Dashboard Link</button>
                    </div>
                </div>
                <!-- Promo Codes Tab -->
                <div id="admin-tab-promo" class="admin-tab-pane">
                    <div class="admin-section-header">
                        <h3>Create Promo Code</h3>
                    </div>
                    <div class="admin-form">
                        <div class="admin-form-row">
                            <label>Code:</label>
                            <input type="text" id="promo-code" placeholder="e.g., LAUNCH50" style="text-transform: uppercase;">
                        </div>
                        <div class="admin-form-row">
                            <label>Discount %:</label>
                            <input type="number" id="promo-discount" placeholder="50" min="1" max="100">
                        </div>
                        <div class="admin-form-row">
                            <label>Expiry Date (optional):</label>
                            <input type="date" id="promo-expiry">
                        </div>
                        <div class="admin-form-row">
                            <label>Max Uses (optional):</label>
                            <input type="number" id="promo-max-uses" placeholder="Unlimited if empty" min="1">
                        </div>
                        <button class="btn-primary" onclick="createPromoCode()">Create Promo Code</button>
                    </div>
                    <div class="admin-section-header" style="margin-top: 30px;">
                        <h3>Active Promo Codes</h3>
                        <button class="btn-refresh" onclick="loadAdminPromoCodes()">Refresh</button>
                    </div>
                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Discount</th>
                                    <th>Expiry</th>
                                    <th>Uses</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-promo-body">
                                <tr><td colspan="5" class="loading-row">Loading promo codes...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Break: Before About -->
    <section class="video-hero-section" style="position: relative; min-height: 100vh; display: flex; align-items: center; justify-content: center; text-align: center; background: transparent;">
        <div style="position: relative; z-index: 1; padding: 60px 20px;">
            <img src="LightningLedgerzLogo.png" alt="Lightning Ledgerz" style="max-width: 350px; margin-bottom: 40px;">
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <a href="#about" class="btn-primary" style="background: #0073CF; color: white; padding: 1rem 2.5rem; border-radius: 50px; font-size: 1.1rem; font-weight: 700; text-decoration: none; box-shadow: 0 4px 15px rgba(0, 115, 207, 0.4);">About</a>
                <a href="#portal" style="background: transparent; color: white; border: 2px solid white; padding: 1rem 2.5rem; border-radius: 50px; font-size: 1.1rem; font-weight: 600; text-decoration: none;">Get Started</a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="section" id="about">
        <div class="section-header">
            <h2>About</h2>
        </div>

        <div class="about-content about-three-col">
            <div class="about-image" style="text-align: center;">
                <img src="lightningteam.png?v=3" alt="Lightning Ledgerz Team" style="margin-bottom: 5px;">
                <p style="font-size: 0.85rem; font-style: italic; color: #4a6a8a;">Zac (right) with twin brother, Max, Yale SOM</p>
            </div>
            <div class="about-text">
                <h3>Founder: Zac Prizant | Cornell Master's in Management</h3>
                <p>I believe the best financial insights come from human expertise, paired with automation that makes analysis faster, clearer, and more repeatable. With experience across hospitality, private equity, and corporate FP&A, I deliver analysis that drives real decisions.</p>
                <p>I've sat on every side of the tableâ€”closing over $500 million in deals on both the buy and sell side, managing portfolios of over $1 billion, transforming budgeting operations across 75-property portfolios, and launching a fractional CFO division from the ground up.</p>
                <p>I know what works because I've built the systems myselfâ€”automating over 15,000 hours of manual work and turning 8-hour budget cycles into 7-minute ones. What I enjoy most is bringing clarity to businesses that need it.</p>

                <div class="credentials">
                    <div class="credential-item">
                        <div class="credential-number">50+</div>
                        <div class="credential-label">Projects Delivered</div>
                    </div>
                    <div class="credential-item">
                        <div class="credential-number">15,000+</div>
                        <div class="credential-label">Hours Automated</div>
                    </div>
                    <div class="credential-item">
                        <div class="credential-number">8hrsâ†’7min</div>
                        <div class="credential-label">Budget Time Reduced</div>
                    </div>
                    <div class="credential-item">
                        <div class="credential-number">$1B+</div>
                        <div class="credential-label">Portfolio Budgeted</div>
                    </div>
                    <div class="credential-item">
                        <div class="credential-number">$500M+</div>
                        <div class="credential-label">Transactions Closed</div>
                    </div>
                </div>
            </div>
            <div class="about-image-right" style="text-align: center;">
                <img src="zacteamcornell.png?v=1" alt="Zac Prizant at Cornell" style="margin-bottom: 5px;">
                <p style="font-size: 0.85rem; font-style: italic; color: #4a6a8a;">Zac advising investment bankers and consultants at Cornell Johnson Graduate School of Management</p>
            </div>
        </div>

        <!-- Core Values -->
        <div class="core-values">
            <h3 class="values-title">Core Values</h3>
            <div class="values-grid">
                <div class="value-card value-efficiency">
                    <h4>Efficiency</h4>
                    <p>Time is your most valuable asset. I streamline financial processes, automate repetitive tasks, and deliver insights at lightning speedâ€”so you can focus on growing your business, not wrestling with spreadsheets.</p>
                </div>
                <div class="value-card value-adventure">
                    <h4>Adventure</h4>
                    <p>Every business has a unique story and path forward. I embrace the journey with you, tackling complex financial challenges with curiosity and creativity. The best solutions often come from exploring uncharted territory together.</p>
                </div>
                <div class="value-card value-honesty">
                    <h4>Honesty</h4>
                    <p>In an industry often clouded by jargon and spin, there is a responsibility to tell the truth. Every insight, recommendation, and deliverable reflects the unfiltered reality of your financial positionâ€”because informed decisions require complete transparency, not comfortable narratives.</p>
                </div>
                <div class="value-card value-quality">
                    <h4>Quality</h4>
                    <p>Every deliverable meets the highest standard. I provide clean, accurate insights that you can easily digestâ€”transforming complex financial data into clear, actionable intelligence you can trust and act on with confidence.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Schedule a Call Section -->
    <section class="section schedule-hero" id="schedule" style="background: transparent; position: relative; min-height: 80vh; display: flex; align-items: center; justify-content: center;">
        <div style="position: relative; z-index: 1; text-align: center; padding: 60px 20px;">
            <img src="LightningLedgerzLogo.png" alt="Lightning Ledgerz" style="max-width: 280px; margin-bottom: 30px;">
            <div class="section-header" style="margin-bottom: 20px;">
                <h2>Schedule a Call</h2>
                <p>Book a free 30-minute discovery call to discuss your financial needs.</p>
            </div>
            <div style="text-align: center; max-width: 600px; margin: 0 auto;">
                <p style="color: #fff; margin-bottom: 30px; font-size: 1.1rem;">
                    Get personalized FP&A guidance from an expert. Your first consultation is <strong style="color: var(--red);">free</strong>.
                </p>
                <button onclick="Calendly.initPopupWidget({url: 'https://calendly.com/zpzant/30min'});return false;"
                        style="background: linear-gradient(45deg, var(--red), var(--red-light)); color: white; border: none; padding: 18px 40px; font-size: 1.2rem; font-weight: 700; border-radius: 50px; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 20px rgba(255, 51, 51, 0.4);">
                    Book Your Free Call
                </button>
                <p style="color: rgba(255,255,255,0.85); margin-top: 20px; font-size: 0.9rem;">
                    30 minutes via Google Meet
                </p>
            </div>
        </div>
    </section>

    <!-- Portal Section -->
    <section class="section section-dark" id="portal">
        <div class="section-header">
            <h2>Client Portal</h2>
            <p>Upload documents securely and access your deliverables.</p>
        </div>

        <div class="portal-card">
            <div class="portal-tabs">
                <button class="portal-tab active" onclick="switchTab('login')">Sign In</button>
                <button class="portal-tab" onclick="switchTab('register')">Create Account</button>
            </div>

            <!-- Google Sign-In/Sign-Up Button -->
            <button type="button" class="google-btn" onclick="handleGoogleLogin()">
                <svg width="20" height="20" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                Continue with Google
            </button>

            <div class="auth-divider">
                <span>or continue with email</span>
            </div>

            <form class="portal-form active" id="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-input" id="login-email" placeholder="you@company.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="login-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                </div>
                <button type="submit" class="form-submit">Sign In</button>
            </form>

            <form class="portal-form" id="register-form" onsubmit="handleRegister(event)">
                <p class="form-subtitle">14-day trial. No credit card required.</p>
                <div class="form-row">
                    <div class="form-group">
                        <input type="text" class="form-input" id="register-firstname" placeholder="First Name" required>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-input" id="register-lastname" placeholder="Last Name" required>
                    </div>
                </div>
                <div class="form-group">
                    <input type="email" class="form-input" id="register-email" placeholder="Work Email" required>
                </div>
                <div class="form-group">
                    <input type="text" class="form-input" id="register-company" placeholder="Company Name" required>
                </div>
                <div class="form-group">
                    <input type="tel" class="form-input" id="register-phone" placeholder="Phone" required>
                </div>
                <div class="form-group">
                    <input type="password" class="form-input" id="register-password" placeholder="Create Password (min 8 characters)" required minlength="8">
                </div>
                <div class="form-group">
                    <input type="text" class="form-input" id="register-referral" placeholder="Referral Code (Optional)">
                </div>
                <div class="form-checkbox">
                    <input type="checkbox" id="register-terms" required>
                    <label for="register-terms">I agree to the <a href="javascript:void(0)" class="form-link" onclick="openLegalModal(event, 'terms'); return false;">Terms of Service</a> and <a href="javascript:void(0)" class="form-link" onclick="openLegalModal(event, 'privacy'); return false;">Privacy Policy</a></label>
                </div>
                <button type="submit" class="form-submit form-submit-green">Get Started</button>
            </form>
        </div>

        <!-- Logged In Dashboard (hidden by default) -->
        <div class="portal-dashboard" id="portal-dashboard" style="display: none;">
            <div class="dashboard-header">
                <div class="dashboard-greeting">
                    <img src="LightningLedgerzLogo.png" alt="Logo" class="dashboard-logo" id="dashboard-logo">
                    <h3>Hi <span id="user-display-name">there</span>!</h3>
                </div>
                <div class="dashboard-tier-badge" id="tier-badge">Basic</div>
                <!-- Demo Tier Selector (only visible in demo mode) -->
                <div id="demo-tier-selector" class="demo-tier-selector" style="display: none;">
                    <label>Preview Tier:</label>
                    <select id="demo-tier-select" onchange="changeDemoTier(this.value)">
                        <option value="basic">Basic</option>
                        <option value="gold">Gold</option>
                        <option value="diamond">Diamond</option>
                    </select>
                </div>
                <!-- Upgrade Button (visible for basic and gold tiers) -->
                <button id="upgrade-btn" class="btn-upgrade" onclick="openUpgradeModal()" style="display: none;">â¬† Upgrade</button>
                <!-- Admin Button (only visible for admin) -->
                <button id="admin-btn" class="btn-admin" onclick="openAdminDashboard()" style="display: none;">Admin</button>
                <button class="btn-logout" onclick="handleLogout()">Sign Out</button>
            </div>

            <!-- Trial Banner (shown during free trial period) -->
            <div class="trial-banner" id="trial-banner" style="display: none;">
                <div class="trial-banner-inner">
                    <div class="trial-banner-text" id="trial-banner-text">
                        ðŸŽ‰ You're on your <strong>FREE trial</strong> â€” <span class="trial-banner-days" id="trial-days-left">30 days</span> remaining.
                    </div>
                    <button class="trial-banner-cta" id="trial-banner-cta" onclick="openUpgradeModal()">Upgrade Now</button>
                </div>
                <div class="trial-progress-bar">
                    <div class="trial-progress-fill" id="trial-progress-fill" style="width: 100%;"></div>
                </div>
            </div>

            <!-- Trial Expired Lockout -->
            <div class="trial-lockout" id="trial-lockout">
                <div class="trial-lockout-content">
                    <div class="trial-lockout-icon">âš¡</div>
                    <h2>Your Free Trial Has Ended</h2>
                    <p>Thank you for trying Lightning Ledgerz! To continue accessing your portal, reports, and advisor tools, choose a plan below.</p>
                    <div class="trial-lockout-plans">
                        <button class="lockout-plan-btn gold" onclick="selectPlan('basic')">
                            Basic â€” $799/mo
                        </button>
                        <button class="lockout-plan-btn gold" onclick="selectPlan('gold')">
                            âœ¨ Gold â€” $1,299/mo
                        </button>
                        <button class="lockout-plan-btn diamond" onclick="selectPlan('diamond')">
                            ðŸ’Ž Diamond â€” $3,999/mo
                        </button>
                    </div>
                    <button class="lockout-logout" onclick="handleLogout()">Sign out instead</button>
                </div>
            </div>

            <!-- Lightning Bolt Profile Meter -->
            <div class="lightning-meter-bar">
                <div class="lightning-meter-left">
                    <div class="lightning-bolt-wrap" id="lightning-bolt-wrap">
                        <div class="lightning-bolt-fill" id="lightning-bolt-fill" style="height:0%"></div>
                        <svg class="lightning-bolt-svg" viewBox="0 0 40 70" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M24 2L4 40H20L16 68L36 28H20L24 2Z" stroke="#ff2a2a" stroke-width="2.5" stroke-linejoin="round"/>
                        </svg>
                        <div class="lightning-spark" id="lightning-spark"></div>
                    </div>
                    <div class="lightning-meter-text">
                        <div class="lightning-meter-pct" id="lightning-meter-pct">0% Complete</div>
                        <div class="lightning-meter-tip" id="lightning-meter-tip">Sign your agreement to get started</div>
                    </div>
                </div>
                <div class="lightning-meter-reward" id="lightning-meter-reward" style="display:none;">
                    <span>âš¡ Profile complete! You've earned a <strong>free month</strong> â€” contact Zac to redeem.</span>
                </div>
            </div>

            <!-- 4-Step Portal Layout -->
            <div class="portal-steps-container">

                <!-- STEP 1: Client Services Agreement -->
                <div class="portal-step-card" id="step-nda">
                    <div class="portal-step-header">
                        <div class="portal-step-number">1</div>
                        <h4>Client Services Agreement</h4>
                    </div>
                    <div class="portal-step-body">
                        <div id="nda-step-unsigned">
                            <p style="margin-bottom:16px;">Before using your portal, review and sign your Client Services Agreement. This establishes the terms of our engagement and protects both parties.</p>
                            <button class="nda-step-sign-btn" onclick="openNDAModal()">Review &amp; Sign Agreement &rarr;</button>
                        </div>
                        <div id="nda-step-signed" style="display:none;">
                            <div class="nda-signed-badge">
                                <span class="nda-signed-check">&#10003;</span>
                                <div>
                                    <div class="nda-signed-title">Agreement Signed</div>
                                    <div class="nda-signed-meta" id="nda-signed-meta"></div>
                                </div>
                            </div>
                            <p style="font-size:0.83rem;color:#888;margin-top:12px;">Your Client Services Agreement is on file. Contact <a href="mailto:zprizant@lightningledgerz.com" style="color:#1e3a5f;">zprizant@lightningledgerz.com</a> with any questions.</p>
                        </div>
                        <div class="step-skip-row"><button class="step-skip-btn" onclick="skipStep('nda')">Skip for now</button></div>
                    </div>
                </div>

                <!-- STEP 2: Database Access -->
                <div class="portal-step-card" id="platform-integrations">
                    <div class="portal-step-header">
                        <div class="portal-step-number">2</div>
                        <h4>Database Access</h4>
                    </div>
                    <div class="portal-step-body">
                        <div class="trust-signals-bar">
                            <span>&#128274; 256-bit Encrypted</span>
                            <span>&#128737; SOC 2 Compliant</span>
                            <span>&#9989; Revoke Anytime</span>
                        </div>
                        <p style="font-size:0.88rem;color:#666;margin-bottom:16px;">Select your accounting platform and share login credentials. I use read-only access to pull your financial data for reporting.</p>

                        <!-- Platform Dropdown -->
                        <div class="platform-dropdown-wrap">
                            <label class="platform-dropdown-label">Your accounting platform</label>
                            <div class="platform-dropdown-box" id="platform-dropdown-box" onclick="togglePlatformDropdown()">
                                <span id="platform-dropdown-selected"><span style="color:#aaa;">-- Select a platform --</span></span>
                                <span class="platform-dropdown-arrow">&#9660;</span>
                            </div>
                            <div class="platform-dropdown-list" id="platform-dropdown-list" style="display:none;">
                                <div class="platform-dropdown-item" onclick="selectPlatformDrop('quickbooks')">
                                    <div class="platform-logo-sm" style="background:#2CA01C;"><span>QB</span></div>
                                    <span>QuickBooks</span>
                                    <span class="pdrop-check" id="pdrop-quickbooks"></span>
                                </div>
                                <div class="platform-dropdown-item" onclick="selectPlatformDrop('sage')">
                                    <div class="platform-logo-sm" style="background:#00D639;"><span>SAGE</span></div>
                                    <span>Sage</span>
                                    <span class="pdrop-check" id="pdrop-sage"></span>
                                </div>
                                <div class="platform-dropdown-item" onclick="selectPlatformDrop('netsuite')">
                                    <div class="platform-logo-sm" style="background:#1A1A2E;"><span>NS</span></div>
                                    <span>Oracle NetSuite</span>
                                    <span class="pdrop-check" id="pdrop-netsuite"></span>
                                </div>
                                <div class="platform-dropdown-item" onclick="selectPlatformDrop('xero')">
                                    <div class="platform-logo-sm" style="background:#13B5EA;"><span>xero</span></div>
                                    <span>Xero</span>
                                    <span class="pdrop-check" id="pdrop-xero"></span>
                                </div>
                                <div class="platform-dropdown-item" onclick="selectPlatformDrop('alteryx')">
                                    <div class="platform-logo-sm" style="background:#0078C0;"><span>Ax</span></div>
                                    <span>Alteryx</span>
                                    <span class="pdrop-check" id="pdrop-alteryx"></span>
                                </div>
                                <div class="platform-dropdown-item" onclick="selectPlatformDrop('airtable')">
                                    <div class="platform-logo-sm" style="background:#FCBF49;"><span style="color:#333;">AT</span></div>
                                    <span>Airtable</span>
                                    <span class="pdrop-check" id="pdrop-airtable"></span>
                                </div>
                                <div class="platform-dropdown-item" onclick="selectPlatformDrop('powerbi')">
                                    <div class="platform-logo-sm" style="background:#F2C811;"><span style="color:#333;">PBI</span></div>
                                    <span>Power BI</span>
                                    <span class="pdrop-check" id="pdrop-powerbi"></span>
                                </div>
                                <div class="platform-dropdown-item" onclick="selectPlatformDrop('excel')">
                                    <div class="platform-logo-sm" style="background:#217346;"><span>Ex</span></div>
                                    <span>Excel Online</span>
                                    <span class="pdrop-check" id="pdrop-excel"></span>
                                </div>
                                <div class="platform-dropdown-item" onclick="selectPlatformDrop('other')">
                                    <div class="platform-logo-sm" style="background:#666;"><span>+</span></div>
                                    <span>Other / Custom</span>
                                    <span class="pdrop-check" id="pdrop-other"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Add Another Platform -->
                        <div id="add-another-platform-row" style="display:none; margin-top:10px;">
                            <button class="add-platform-btn" onclick="showAnotherPlatformDropdown()">&#43; Add Another Platform</button>
                            <div class="platform-dropdown-wrap" id="platform-dropdown-2-wrap" style="display:none; margin-top:10px;">
                                <div class="platform-dropdown-box" id="platform-dropdown-box-2" onclick="togglePlatformDropdown2()">
                                    <span id="platform-dropdown-selected-2"><span style="color:#aaa;">-- Select another platform --</span></span>
                                    <span class="platform-dropdown-arrow">&#9660;</span>
                                </div>
                                <div class="platform-dropdown-list" id="platform-dropdown-list-2" style="display:none;">
                                    <div class="platform-dropdown-item" onclick="selectPlatformDrop2('quickbooks')"><div class="platform-logo-sm" style="background:#2CA01C;"><span>QB</span></div><span>QuickBooks</span></div>
                                    <div class="platform-dropdown-item" onclick="selectPlatformDrop2('sage')"><div class="platform-logo-sm" style="background:#00D639;"><span>SAGE</span></div><span>Sage</span></div>
                                    <div class="platform-dropdown-item" onclick="selectPlatformDrop2('netsuite')"><div class="platform-logo-sm" style="background:#1A1A2E;"><span>NS</span></div><span>Oracle NetSuite</span></div>
                                    <div class="platform-dropdown-item" onclick="selectPlatformDrop2('xero')"><div class="platform-logo-sm" style="background:#13B5EA;"><span>xero</span></div><span>Xero</span></div>
                                    <div class="platform-dropdown-item" onclick="selectPlatformDrop2('alteryx')"><div class="platform-logo-sm" style="background:#0078C0;"><span>Ax</span></div><span>Alteryx</span></div>
                                    <div class="platform-dropdown-item" onclick="selectPlatformDrop2('airtable')"><div class="platform-logo-sm" style="background:#FCBF49;"><span style="color:#333;">AT</span></div><span>Airtable</span></div>
                                    <div class="platform-dropdown-item" onclick="selectPlatformDrop2('powerbi')"><div class="platform-logo-sm" style="background:#F2C811;"><span style="color:#333;">PBI</span></div><span>Power BI</span></div>
                                    <div class="platform-dropdown-item" onclick="selectPlatformDrop2('excel')"><div class="platform-logo-sm" style="background:#217346;"><span>Ex</span></div><span>Excel Online</span></div>
                                    <div class="platform-dropdown-item" onclick="selectPlatformDrop2('other')"><div class="platform-logo-sm" style="background:#666;"><span>+</span></div><span>Other / Custom</span></div>
                                </div>
                            </div>
                        </div>

                        <!-- Connected platform badges -->
                        <div id="connected-platforms-badges" style="display:none; margin:14px 0 4px;">
                            <div style="font-size:0.78rem;color:#999;margin-bottom:6px;font-weight:600;letter-spacing:0.3px;">CONNECTED:</div>
                            <div id="connected-badges-list" style="display:flex;flex-wrap:wrap;gap:6px;"></div>
                        </div>

                        <!-- Platform Credential Form -->
                        <div class="platform-cred-form" id="platform-cred-form" style="display: none;">
                            <div class="platform-cred-header" id="platform-cred-header">
                                <h5 id="platform-cred-title">Connect QuickBooks</h5>
                                <button onclick="closePlatformForm()" style="background:none;border:none;font-size:1.5rem;cursor:pointer;color:#999;">&times;</button>
                            </div>
                            <div class="qb-field">
                                <label>How would you like to grant access?</label>
                                <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                                    <label class="access-option" id="access-share">
                                        <input type="radio" name="access-type" value="share" checked onchange="toggleAccessType()">
                                        <span>Share my existing login</span>
                                    </label>
                                    <label class="access-option" id="access-separate">
                                        <input type="radio" name="access-type" value="separate" onchange="toggleAccessType()">
                                        <span>I created a separate login for my advisor</span>
                                    </label>
                                </div>
                            </div>
                            <div id="platform-fields">
                                <div class="qb-field">
                                    <label for="platform-url">Login URL / Company Link</label>
                                    <input type="url" id="platform-url" placeholder="https://..." autocomplete="off">
                                </div>
                                <div class="qb-field">
                                    <label for="platform-username">Username / Email</label>
                                    <input type="text" id="platform-username" placeholder="your@email.com" autocomplete="off">
                                </div>
                                <div class="qb-field">
                                    <label for="platform-password">Password</label>
                                    <div class="qb-password-wrap">
                                        <input type="password" id="platform-password" placeholder="Enter password" autocomplete="new-password">
                                        <button type="button" class="qb-toggle-pw" onclick="togglePlatformPassword()">Show</button>
                                    </div>
                                </div>
                                <div class="qb-field">
                                    <label for="platform-notes">Additional Notes (optional)</label>
                                    <textarea id="platform-notes" placeholder="e.g., MFA codes, company name, specific access needed..." rows="2"></textarea>
                                </div>
                            </div>
                            <div style="background: #f8f9fa; border: 1px solid #e0e0e0; border-radius: 10px; padding: 18px; margin-bottom: 20px;">
                                <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer; color: #333; font-size: 0.9rem;">
                                    <input type="checkbox" id="platform-agree-checkbox" style="margin-top: 3px; width: 18px; height: 18px; accent-color: var(--mckinsey-blue); flex-shrink: 0;">
                                    <span>I grant <strong>Lightning Ledgerz LLC</strong> permission to access my <strong id="platform-agree-name">QuickBooks</strong> account using the credentials provided above, solely for the purpose of delivering FP&A advisory services. My credentials are encrypted with 256-bit encryption, accessible only to my assigned advisor (Zac Prizant), and I can revoke access at any time.</span>
                                </label>
                            </div>
                            <div class="qb-actions">
                                <button class="qb-save-btn" onclick="savePlatformCredentials()">Grant Access Securely</button>
                                <span class="qb-saved-status" id="platform-saved-status"></span>
                            </div>
                        </div>
                        <div class="step-skip-row"><button class="step-skip-btn" onclick="skipStep('db')">Skip â€” I'll share access later</button></div>
                    </div>
                </div>

                <!-- STEP 3: Upload Financial Statements -->
                <div class="portal-step-card">
                    <div class="portal-step-header">
                        <div class="portal-step-number">3</div>
                        <h4>Upload Financial Statements</h4>
                    </div>
                    <div class="portal-step-body">
                        <p style="font-size:0.88rem;color:#666;margin-bottom:20px;">Upload monthly statements for as many years as you have available. Excel, CSV, and PDF all work.</p>
                        <div class="fin-upload-grid">
                            <div class="fin-upload-slot">
                                <div class="fin-slot-icon">ðŸ“Š</div>
                                <div class="fin-slot-label">P&amp;L / Income Statement</div>
                                <div class="fin-slot-sub">Monthly &middot; All available years</div>
                                <label class="fin-upload-btn" for="fin-pl-input">+ Upload Files</label>
                                <input type="file" id="fin-pl-input" multiple accept=".xlsx,.xls,.csv,.pdf,.doc,.docx" style="display:none;" onchange="handleFinUpload('PL', this)">
                                <div class="fin-slot-status" id="fin-pl-status"></div>
                            </div>
                            <div class="fin-upload-slot">
                                <div class="fin-slot-icon">âš–ï¸</div>
                                <div class="fin-slot-label">Balance Sheet</div>
                                <div class="fin-slot-sub">Monthly &middot; All available years</div>
                                <label class="fin-upload-btn" for="fin-bs-input">+ Upload Files</label>
                                <input type="file" id="fin-bs-input" multiple accept=".xlsx,.xls,.csv,.pdf,.doc,.docx" style="display:none;" onchange="handleFinUpload('Balance Sheet', this)">
                                <div class="fin-slot-status" id="fin-bs-status"></div>
                            </div>
                            <div class="fin-upload-slot">
                                <div class="fin-slot-icon">ðŸ’¸</div>
                                <div class="fin-slot-label">Cash Flow Statement</div>
                                <div class="fin-slot-sub">Monthly &middot; All available years</div>
                                <label class="fin-upload-btn" for="fin-cf-input">+ Upload Files</label>
                                <input type="file" id="fin-cf-input" multiple accept=".xlsx,.xls,.csv,.pdf,.doc,.docx" style="display:none;" onchange="handleFinUpload('Cash Flow', this)">
                                <div class="fin-slot-status" id="fin-cf-status"></div>
                            </div>
                        </div>
                        <div style="margin-top:18px; border-top:1px solid #f0f0f0; padding-top:15px;">
                            <p style="font-size:0.82rem;color:#999;margin-bottom:10px;">Other supporting documents (budgets, CapEx schedules, etc.):</p>
                            <div class="upload-dropzone" id="upload-dropzone" style="padding:14px; margin-bottom:12px;">
                                <div class="dropzone-content">
                                    <span class="dropzone-icon" style="font-size:1.4rem;">ðŸ“Ž</span>
                                    <p style="margin:5px 0 0;font-size:0.85rem;">Drag &amp; drop or <label for="file-input" class="upload-browse">browse</label></p>
                                    <input type="file" id="file-input" accept=".xlsx,.xls,.csv,.pdf,.doc,.docx,.ppt,.pptx,.txt,.rtf,.png,.jpg,.jpeg" multiple style="display: none;">
                                </div>
                            </div>
                        </div>
                        <div class="carousel-search">
                            <input type="text" id="uploads-search" placeholder="Search uploaded files..." oninput="filterCarousel('uploads')">
                        </div>
                        <div class="column-carousel" id="user-uploads-carousel">
                            <p class="carousel-empty" id="uploads-empty">No files yet. Upload above.</p>
                        </div>
                        <div class="step-skip-row"><button class="step-skip-btn" onclick="skipStep('files')">Skip â€” I'll upload files later</button></div>
                    </div>
                </div>

                <!-- STEP 4: My Reports -->
                <div class="portal-step-card">
                    <div class="portal-step-header">
                        <div class="portal-step-number">4</div>
                        <h4>My Reports</h4>
                    </div>
                    <div class="portal-step-body">
                        <div class="fathom-link-card" id="fathom-link-card" style="display: none;">
                            <div class="fathom-link-header">
                                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#1e3a5f" stroke-width="2"><path d="M3 3v18h18"/><path d="M7 16l4-8 4 4 6-10"/></svg>
                                <span>Live Financial Dashboard</span>
                            </div>
                            <p class="fathom-link-desc">Your advisor has linked a live reporting dashboard for your business.</p>
                            <a href="#" id="fathom-link-url" target="_blank" class="fathom-link-btn">Open Dashboard</a>
                        </div>
                        <div class="carousel-search">
                            <input type="text" id="reports-search" placeholder="Search by title or date..." oninput="filterReportsCarousel()">
                        </div>
                        <div class="portal-reports-carousel-container" id="reports-carousel-container">
                            <div class="portal-reports-carousel" id="reports-carousel">
                                <p class="carousel-empty" id="reports-empty">Your FP&amp;A reports will appear here.</p>
                            </div>
                        </div>
                        <div class="portal-scroll-hint">
                            <span>Drag to explore</span>
                            <span>&#8594;</span>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Security Bar -->
            <div class="portal-security-bar">
                <span>&#128274; 256-bit encrypted</span>
                <span class="security-bar-dot">&middot;</span>
                <span>Your data is never shared or sold</span>
                <span class="security-bar-dot">&middot;</span>
                <span>Revoke access at any time</span>
            </div>
        </div>

        <!-- Upload Success Overlay -->
        <div class="upload-success-overlay" id="upload-success-overlay">
            <div class="upload-success-modal">
                <div class="upload-success-icon">âœ…</div>
                <div class="upload-success-title">Upload Successful!</div>
                <div class="upload-success-text" id="upload-success-text">Your file has been securely uploaded.</div>
                <button class="upload-success-btn" onclick="closeUploadSuccess()">Continue</button>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="section" id="contact">
        <div class="section-header">
            <h2>Get In Touch</h2>
            <p>Ready to supercharge your financial reporting?</p>
        </div>
        <div style="text-align: center;">
            <a href="mailto:zprizant@lightningledgerz.com" class="btn-primary contact-email" style="font-size: 1.2rem;">zprizant@lightningledgerz.com</a>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-logo">
            <a href="#top" onclick="goHome()" title="Back to home">
                <img src="LightningLedgerzLogo.png" alt="Lightning Ledgerz">
            </a>
        </div>
        <div class="footer-links">
            <a href="#pricing">Services</a>
            <a href="#work">Portfolio</a>
            <a href="#about">About</a>
            <a href="#portal">Portal</a>
        </div>
        <div class="footer-contact" style="margin: 15px 0; color: rgba(255,255,255,0.8);">
            <a href="tel:+17025502513" style="color: #fff; text-decoration: none; margin-right: 20px;">&#9742; (702) 550-2513</a>
            <a href="mailto:zprizant@lightningledgerz.com" style="color: #fff; text-decoration: none;">&#9993; zprizant@lightningledgerz.com</a>
        </div>
        <div style="margin: 8px 0 15px; color: rgba(255,255,255,0.6); font-size: 0.85rem;">
            &#128205; 732 S 6th St, Ste R, Las Vegas, NV 89101
        </div>
        <p class="footer-copy">Â© 2026 Lightning Ledgerz. All rights reserved.</p>
        <div class="payment-methods">
            <span class="payment-icon visa">VISA</span>
            <span class="payment-icon mastercard">MC</span>
            <span class="payment-icon amex">AMEX</span>
            <span class="payment-icon discover">DISCOVER</span>
            <span class="payment-icon paypal">PayPal</span>
            <span class="payment-icon applepay">Apple Pay</span>
            <span class="payment-icon gpay">G Pay</span>
        </div>
    </footer>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        // ===========================================
        // SUPABASE CONFIGURATION
        // ===========================================
        const SUPABASE_URL = 'https://uxicgilvxcqpoxavilxp.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV4aWNnaWx2eGNxcG94YXZpbHhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEwNzYwNzYsImV4cCI6MjA3NjY1MjA3Nn0.W6_iO15HAxjzvNfp_FHWSS0HYOpaJb7-oC-Z3_KaZaw';

        let supabase = null;
        let currentUser = null;

        function initSupabase() {
            try {
                console.log('Attempting Supabase init... window.supabase:', typeof window.supabase);
                if (typeof window.supabase !== 'undefined' && window.supabase.createClient) {
                    supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                    console.log('Supabase initialized successfully');
                    return true;
                } else {
                    console.log('Supabase library not yet loaded');
                }
            } catch (err) {
                console.error('Supabase init error:', err);
            }
            return false;
        }

        // Retry Supabase init until loaded
        function waitForSupabase(callback, maxAttempts = 50) {
            let attempts = 0;
            function tryInit() {
                if (initSupabase()) {
                    if (callback) callback(true);
                    return;
                }
                attempts++;
                if (attempts < maxAttempts) {
                    setTimeout(tryInit, 100);
                } else {
                    console.log('Supabase failed to load after ' + maxAttempts + ' attempts');
                    // IMPORTANT: Always call callback so Promise resolves
                    if (callback) callback(false);
                }
            }
            tryInit();
        }

        // Try to init Supabase and check session on page load
        window.addEventListener('load', function() {
            console.log('Page load complete. Supabase status:', supabase ? 'ready' : 'not ready');
            if (!supabase) {
                initSupabase(); // Try once more
            }
            if (supabase) {
                checkExistingSession();
            } else {
                console.log('Warning: Supabase not available at page load');
            }
        });

        // Check for existing session (handles Google OAuth return)
        async function checkExistingSession() {
            if (!supabase) return;

            try {
                const { data: { session } } = await supabase.auth.getSession();

                if (session && session.user) {
                    // User has an active session (e.g., returned from Google OAuth)
                    const user = session.user;

                    // Get or create profile
                    let { data: profile } = await supabase
                        .from('profiles')
                        .select('first_name, tier')
                        .eq('id', user.id)
                        .single();

                    // If no profile exists (new Google user), create one
                    if (!profile) {
                        const firstName = user.user_metadata?.full_name?.split(' ')[0] ||
                                         user.user_metadata?.name?.split(' ')[0] ||
                                         user.email.split('@')[0];
                        const lastName = user.user_metadata?.full_name?.split(' ').slice(1).join(' ') || '';

                        await supabase.from('profiles').upsert({
                            id: user.id,
                            email: user.email,
                            first_name: firstName,
                            last_name: lastName,
                            tier: 'basic'
                        });

                        profile = { first_name: firstName, tier: 'basic' };
                    }

                    const userName = profile?.first_name || user.email.split('@')[0];
                    const userTier = profile?.tier || 'basic';
                    const isAdmin = user.email === ADMIN_EMAIL;

                    currentUserData = {
                        id: user.id,
                        email: user.email,
                        name: userName,
                        tier: userTier,
                        isDemo: false,
                        isAdmin: isAdmin
                    };

                    showLoggedInDashboard(userName, userTier, false, isAdmin);
                    showToast('Welcome, ' + userName + '!', 'success');

                    // Scroll to portal section
                    document.getElementById('portal').scrollIntoView({ behavior: 'smooth' });
                }
            } catch (err) {
                console.log('Session check error:', err);
            }
        }

        // ===========================================
        // NAVIGATION
        // ===========================================
        function goHome() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function scrollToSection(selector) {
            document.querySelector(selector)?.scrollIntoView({ behavior: 'smooth' });
        }

        function selectPackage(e, packageType) {
            console.log('selectPackage called:', packageType);

            // Remove active class from all sidebar buttons
            document.querySelectorAll('.package-btn').forEach(btn => btn.classList.remove('active'));
            // Remove highlight from all package cards
            document.querySelectorAll('.package-card').forEach(card => card.classList.remove('highlight'));

            // Add active class to clicked button
            const btn = document.getElementById('btn-' + packageType);
            const card = document.getElementById(packageType + '-card');

            console.log('Found card:', card);

            if (btn) btn.classList.add('active');
            if (card) {
                card.classList.add('highlight');
                // Scroll to the card - use scrollIntoView for reliability
                setTimeout(() => {
                    card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 50);
            }
        }

        // ===========================================
        // NAV SCROLL EFFECT - Transparent to White + Hide Package Buttons
        // ===========================================
        window.addEventListener('scroll', function() {
            var nav = document.querySelector('nav');
            var packageSidebar = document.querySelector('.package-sidebar');
            var heroHeight = document.querySelector('.saas-hero') ? document.querySelector('.saas-hero').offsetHeight : 500;

            if (window.scrollY > 50) {
                nav.classList.add('nav-scrolled');
            } else {
                nav.classList.remove('nav-scrolled');
            }

            // Hide package buttons when scrolled past hero
            if (packageSidebar) {
                if (window.scrollY > heroHeight - 100) {
                    packageSidebar.classList.add('hidden');
                } else {
                    packageSidebar.classList.remove('hidden');
                }
            }
        });

        function toggleMobileMenu(e) {
            if (e) {
                e.preventDefault();
                e.stopPropagation();
            }
            var links = document.getElementById('nav-links');
            if (links.style.display === 'flex') {
                links.style.display = 'none';
            } else {
                links.style.display = 'flex';
            }
        }

        function closeMobileMenu() {
            var links = document.getElementById('nav-links');
            if (window.innerWidth <= 900) {
                links.style.display = 'none';
            }
        }

        // ===========================================
        // TABS
        // ===========================================
        function switchTab(tab) {
            document.querySelectorAll('.portal-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.portal-form').forEach(f => f.classList.remove('active'));

            if (tab === 'login') {
                document.querySelectorAll('.portal-tab')[0].classList.add('active');
                document.getElementById('login-form').classList.add('active');
            } else {
                document.querySelectorAll('.portal-tab')[1].classList.add('active');
                document.getElementById('register-form').classList.add('active');
            }
        }

        // ===========================================
        // AUTH
        // ===========================================
        let currentUserData = null;

        // Demo account credentials
        const DEMO_EMAIL = 'demo@lightningledgerz.com';
        const DEMO_PASSWORD = 'demo123';
        const ADMIN_EMAIL = 'zprizant@lightningledgerz.com';

        // Stripe checkout URLs for each plan (monthly and yearly)
        const STRIPE_URLS = {
            monthly: {
                basic: 'https://buy.stripe.com/dRmfZheTUbkcgT7fuNbsc02',
                gold: 'https://buy.stripe.com/28E28r1348805apeqJbsc01',
                diamond: 'https://buy.stripe.com/dRm9ATbHIdsk5ap0zTbsc00'
            },
            yearly: {
                basic: 'YEARLY_BASIC_URL',      // Create in Stripe: $7,668/year
                gold: 'YEARLY_GOLD_URL',        // Create in Stripe: $12,468/year
                diamond: 'YEARLY_DIAMOND_URL'   // Create in Stripe: $38,388/year
            }
        };

        // Select a plan - if logged in go to Stripe, else prompt signup
        // Active promo code (set by applyPromoCode)
        window.activePromoCode = null;

        async function applyPromoCode() {
            var code = (document.getElementById('promo-code-input')?.value || '').trim().toUpperCase();
            var resultDiv = document.getElementById('promo-result');
            if (!code) { if (resultDiv) resultDiv.innerHTML = ''; return; }

            if (!supabase) {
                if (resultDiv) resultDiv.innerHTML = '<span style="color:#f5a623;">âš  Database unavailable</span>';
                return;
            }

            try {
                var { data, error } = await supabase
                    .from('promo_codes')
                    .select('*')
                    .eq('code', code)
                    .eq('is_active', true)
                    .single();

                if (error || !data) {
                    window.activePromoCode = null;
                    if (resultDiv) resultDiv.innerHTML = '<span style="color:#ff6b6b;">âœ— Invalid or expired promo code</span>';
                    return;
                }

                // Check expiry
                if (data.expiry_date && new Date(data.expiry_date) < new Date()) {
                    window.activePromoCode = null;
                    if (resultDiv) resultDiv.innerHTML = '<span style="color:#ff6b6b;">âœ— This promo code has expired</span>';
                    return;
                }

                // Check max uses
                if (data.max_uses && data.current_uses >= data.max_uses) {
                    window.activePromoCode = null;
                    if (resultDiv) resultDiv.innerHTML = '<span style="color:#ff6b6b;">âœ— This promo code has reached its limit</span>';
                    return;
                }

                window.activePromoCode = code;
                if (resultDiv) resultDiv.innerHTML = '<span style="color:#2CA01C; font-weight: 700;">âœ“ ' + data.discount_percent + '% discount applied!</span>';
                showToast(data.discount_percent + '% discount code applied!', 'success');
            } catch (err) {
                if (resultDiv) resultDiv.innerHTML = '<span style="color:#ff6b6b;">âœ— Could not validate code</span>';
            }
        }

        function selectPlan(plan) {
            const billingPeriod = isYearlyPricing ? 'yearly' : 'monthly';
            let stripeUrl = STRIPE_URLS[billingPeriod][plan];

            // Append promo code if one is active
            if (window.activePromoCode) {
                stripeUrl += (stripeUrl.includes('?') ? '&' : '?') + 'prefilled_promo_code=' + encodeURIComponent(window.activePromoCode);
            }

            // Check if yearly URL is configured
            if (isYearlyPricing && STRIPE_URLS[billingPeriod][plan].startsWith('YEARLY_')) {
                showToast('Yearly billing coming soon! Using monthly for now.', 'info');
                let monthlyUrl = STRIPE_URLS.monthly[plan];
                if (window.activePromoCode) monthlyUrl += '?prefilled_promo_code=' + encodeURIComponent(window.activePromoCode);
                if (currentUserData && !currentUserData.isDemo) {
                    window.open(monthlyUrl, '_blank');
                } else {
                    sessionStorage.setItem('pendingPlan', plan);
                    document.getElementById('portal').scrollIntoView({ behavior: 'smooth' });
                    setTimeout(function() {
                        switchTab('register');
                        showToast('Create an account to start your ' + plan.charAt(0).toUpperCase() + plan.slice(1) + ' trial', 'info');
                    }, 500);
                }
                return;
            }

            if (currentUserData && !currentUserData.isDemo) {
                // User is logged in, go directly to Stripe
                window.open(stripeUrl, '_blank');
            } else {
                // Store selected plan and billing period for after signup
                sessionStorage.setItem('pendingPlan', plan);
                sessionStorage.setItem('pendingBillingPeriod', billingPeriod);
                // Scroll to portal and show register form
                document.getElementById('portal').scrollIntoView({ behavior: 'smooth' });
                setTimeout(function() {
                    switchTab('register');
                    const periodText = isYearlyPricing ? ' (yearly)' : '';
                    showToast('Create an account to start your ' + plan.charAt(0).toUpperCase() + plan.slice(1) + periodText + ' trial', 'info');
                }, 500);
            }
        }

        // Toggle between monthly and yearly pricing
        let isYearlyPricing = false;

        function togglePricingPeriod() {
            isYearlyPricing = !isYearlyPricing;
            const toggle = document.getElementById('pricing-toggle');
            const monthlyLabel = document.getElementById('monthly-label');
            const yearlyLabel = document.getElementById('yearly-label');
            const priceElements = document.querySelectorAll('.package-price');

            if (isYearlyPricing) {
                toggle.classList.add('yearly');
                monthlyLabel.classList.remove('active');
                yearlyLabel.classList.add('active');
                priceElements.forEach(el => el.classList.add('show-yearly'));
            } else {
                toggle.classList.remove('yearly');
                monthlyLabel.classList.add('active');
                yearlyLabel.classList.remove('active');
                priceElements.forEach(el => el.classList.remove('show-yearly'));
            }
        }

        // Check for pending plan after login/signup
        function checkPendingPlan() {
            const pendingPlan = sessionStorage.getItem('pendingPlan');
            if (pendingPlan && STRIPE_URLS[pendingPlan]) {
                sessionStorage.removeItem('pendingPlan');
                setTimeout(function() {
                    showToast('Redirecting to checkout...', 'info');
                    setTimeout(function() {
                        window.open(STRIPE_URLS[pendingPlan], '_blank');
                    }, 1000);
                }, 500);
            }
        }

        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('login-email').value.toLowerCase().trim();
            const password = document.getElementById('login-password').value;
            const submitBtn = e.target.querySelector('button[type="submit"]');

            submitBtn.textContent = 'Signing in...';
            submitBtn.disabled = true;

            // Check for demo account
            if (email === DEMO_EMAIL && password === DEMO_PASSWORD) {
                currentUserData = {
                    id: 'demo-user',
                    email: DEMO_EMAIL,
                    name: 'Demo',
                    tier: 'basic',
                    isDemo: true,
                    isAdmin: false
                };
                showLoggedInDashboard('Demo', 'basic', true, false);
                showToast('Welcome to Demo Mode! Use the tier selector to preview different plans.', 'success');
                submitBtn.textContent = 'Sign In';
                submitBtn.disabled = false;
                return;
            }

            // Wait for Supabase if not ready
            if (!supabase) {
                await new Promise((resolve) => {
                    waitForSupabase(resolve, 30);
                });
            }

            if (!supabase) {
                if (window.supabaseError) {
                    showToast('Server script blocked. Try disabling ad-blocker or check firewall.', 'error');
                } else {
                    showToast('Server loading... Please wait a moment and try again.', 'error');
                }
                submitBtn.textContent = 'Sign In';
                submitBtn.disabled = false;
                return;
            }

            try {
                const { data, error } = await supabase.auth.signInWithPassword({ email, password });
                if (error) throw error;

                // Get user profile with tier
                const { data: profile } = await supabase
                    .from('profiles')
                    .select('*')
                    .eq('id', data.user.id)
                    .single();

                const userName = profile?.first_name || data.user?.user_metadata?.full_name || email.split('@')[0];
                const userTier = profile?.package_tier || 'basic';
                const isAdmin = email.toLowerCase() === ADMIN_EMAIL || profile?.is_admin === true;

                currentUserData = {
                    id: data.user.id,
                    email,
                    name: userName,
                    tier: userTier,
                    profile: profile,
                    isDemo: false,
                    isAdmin: isAdmin
                };

                showLoggedInDashboard(userName, userTier, false, isAdmin);
                showToast('Welcome back, ' + userName + '!', 'success');
            } catch (error) {
                showToast(error.message, 'error');
            }

            submitBtn.textContent = 'Sign In';
            submitBtn.disabled = false;
        }

        async function handleGoogleLogin() {
            var btn = document.querySelector('.google-btn');
            btn.textContent = 'Connecting...';
            btn.disabled = true;

            function resetGoogleBtn() {
                btn.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> Continue with Google';
                btn.disabled = false;
            }

            // Wait for Supabase
            if (!supabase) {
                await new Promise((resolve) => waitForSupabase(resolve, 30));
            }

            if (!supabase) {
                showToast('Could not connect to server. Please refresh and try again.', 'error');
                resetGoogleBtn();
                return;
            }

            try {
                const { data, error } = await supabase.auth.signInWithOAuth({
                    provider: 'google',
                    options: {
                        redirectTo: window.location.origin + window.location.pathname
                    }
                });
                if (error) throw error;
                // User will be redirected to Google
            } catch (error) {
                showToast(error.message || 'Google login failed. Make sure Google OAuth is configured in Supabase.', 'error');
                resetGoogleBtn();
            }
        }

        async function handleRegister(e) {
            e.preventDefault();
            var firstName = document.getElementById('register-firstname').value;
            var lastName = document.getElementById('register-lastname').value;
            var email = document.getElementById('register-email').value;
            var company = document.getElementById('register-company').value;
            var phone = document.getElementById('register-phone').value;
            var referral = document.getElementById('register-referral').value || '';
            var password = document.getElementById('register-password').value;
            var fullName = firstName + ' ' + lastName;
            var submitBtn = e.target.querySelector('button[type="submit"]');

            submitBtn.textContent = 'Creating account...';
            submitBtn.disabled = true;

            // Wait for Supabase if not ready
            if (!supabase) {
                await new Promise((resolve) => {
                    waitForSupabase(resolve, 30);
                });
            }

            if (!supabase) {
                if (window.supabaseError) {
                    showToast('Server script blocked. Try disabling ad-blocker or check firewall.', 'error');
                } else {
                    showToast('Server loading... Please wait a moment and try again.', 'error');
                }
                submitBtn.textContent = 'Get Started';
                submitBtn.disabled = false;
                return;
            }

            try {
                var { data, error } = await supabase.auth.signUp({
                    email: email,
                    password: password,
                    options: {
                        data: {
                            full_name: fullName,
                            first_name: firstName,
                            last_name: lastName,
                            company: company,
                            phone: phone
                        }
                    }
                });
                if (error) throw error;

                // Create profile with all fields
                if (data.user) {
                    await supabase.from('profiles').insert([{
                        id: data.user.id,
                        email: email,
                        first_name: firstName,
                        last_name: lastName,
                        company: company,
                        phone: phone,
                        referral_code: referral,
                        package_tier: 'basic'
                    }]);

                    currentUserData = {
                        id: data.user.id,
                        email: email,
                        name: firstName,
                        tier: 'basic'
                    };

                    showLoggedInDashboard(firstName, 'basic');
                    showToast('Welcome to Lightning Ledgerz, ' + firstName + '!', 'success');
                } else {
                    showToast('Check your email to verify your account!', 'success');
                }
            } catch (error) {
                showToast(error.message, 'error');
            }

            submitBtn.textContent = 'Get Started';
            submitBtn.disabled = false;
        }

        function showLoggedInDashboard(name, tier = 'basic', isDemo = false, isAdmin = false) {
            document.querySelector('.portal-card').style.display = 'none';
            document.getElementById('portal-dashboard').style.display = 'block';
            document.getElementById('user-display-name').textContent = name;

            // Update tier badge in dashboard
            var badge = document.getElementById('tier-badge');
            if (badge) {
                badge.textContent = tier.charAt(0).toUpperCase() + tier.slice(1);
            }

            // Show/hide demo tier selector
            var demoSelector = document.getElementById('demo-tier-selector');
            if (demoSelector) {
                demoSelector.style.display = isDemo ? 'flex' : 'none';
                if (isDemo) {
                    document.getElementById('demo-tier-select').value = tier;
                }
            }

            // Show/hide admin button
            var adminBtn = document.getElementById('admin-btn');
            if (adminBtn) {
                adminBtn.style.display = isAdmin ? 'inline-block' : 'none';
            }

            // Show/hide upgrade button (visible for basic and gold, not diamond)
            var upgradeBtn = document.getElementById('upgrade-btn');
            if (upgradeBtn) {
                upgradeBtn.style.display = (tier !== 'diamond' && !isDemo) ? 'inline-block' : 'none';
            }

            // Show nav welcome section and update greeting
            var welcomeNav = document.getElementById('user-welcome-nav');
            var welcomeText = document.getElementById('nav-welcome-text');
            var planBadge = document.getElementById('nav-plan-badge');
            var getStartedBtn = document.querySelector('.nav-cta');

            if (welcomeNav) {
                welcomeNav.style.display = 'flex';
            }
            if (welcomeText) {
                welcomeText.textContent = 'Hi, ' + name + '!';
            }
            if (planBadge) {
                planBadge.className = 'plan-badge badge-' + tier;
                planBadge.textContent = tier.charAt(0).toUpperCase() + tier.slice(1);
            }
            if (getStartedBtn) {
                getStartedBtn.style.display = 'none';
            }

            // Apply tier-based theming
            applyTierTheme(tier);

            // Load user's uploaded files and reports (skip for demo)
            if (!isDemo) {
                loadUserFiles();
                loadUserReports();
                loadQBCredentials();
                loadDashboardLink();
                updateTrialBanner();
                // Check if user selected a plan before signing up
                checkPendingPlan();
                // Check NDA - must be signed before quiz
                checkNDARequired();
                // Show quiz on first login (after NDA check, with delay)
                setTimeout(function() {
                    var userId = currentUserData?.id;
                    if (userId && !localStorage.getItem('quiz_seen_' + userId) && !currentUserData?.profile?.nda_accepted_at) {
                        // NDA modal takes priority - quiz fires after NDA is accepted
                    } else if (userId && !localStorage.getItem('quiz_seen_' + userId)) {
                        openQuizModal();
                    }
                }, 1200);
            } else {
                // Show demo placeholders
                var uploadsCarousel = document.getElementById('user-uploads-carousel');
                var reportsCarousel = document.getElementById('reports-carousel');
                if (uploadsCarousel) uploadsCarousel.innerHTML = '<p class="carousel-empty">Demo mode - uploads disabled</p>';
                if (reportsCarousel) reportsCarousel.innerHTML = '<p class="carousel-empty">Demo mode - reports N/A</p>';
            }
        }

        // Demo tier change handler
        function changeDemoTier(newTier) {
            if (currentUserData?.isDemo) {
                currentUserData.tier = newTier;
                applyTierTheme(newTier);

                // Update badges
                var badge = document.getElementById('tier-badge');
                var planBadge = document.getElementById('nav-plan-badge');
                if (badge) badge.textContent = newTier.charAt(0).toUpperCase() + newTier.slice(1);
                if (planBadge) {
                    planBadge.className = 'plan-badge badge-' + newTier;
                    planBadge.textContent = newTier.charAt(0).toUpperCase() + newTier.slice(1);
                }

                showToast('Previewing ' + newTier.charAt(0).toUpperCase() + newTier.slice(1) + ' tier', 'success');
            }
        }

        function applyTierTheme(tier) {
            var body = document.body;
            var dashboard = document.getElementById('portal-dashboard');
            var dashboardLogo = document.getElementById('dashboard-logo');

            // Remove any existing tier classes
            body.classList.remove('tier-basic', 'tier-gold', 'tier-diamond');
            dashboard.classList.remove('tier-basic', 'tier-gold', 'tier-diamond');

            // Add new tier class
            body.classList.add('tier-' + tier);
            dashboard.classList.add('tier-' + tier);

            // Update dashboard logo based on tier
            var logoMap = {
                basic: 'LightningLedgerzLogo.png',
                gold: 'LightningLedgerzLogo-gold.png',
                diamond: 'LightningLedgerzLogo-diamond.png'
            };

            if (dashboardLogo) {
                dashboardLogo.src = logoMap[tier] || logoMap.basic;
            }

            // Update all logos based on tier (including reset to basic)
            var logos = document.querySelectorAll('.logo img, .hero-logo img, .footer-logo img');
            logos.forEach(function(logo) {
                logo.src = logoMap[tier] || logoMap.basic;
            });
        }

        function resetTheme() {
            const body = document.body;
            const dashboard = document.getElementById('portal-dashboard');
            const logos = document.querySelectorAll('.logo img, .hero-logo img, .footer-logo img');

            body.classList.remove('tier-basic', 'tier-gold', 'tier-diamond');
            if (dashboard) dashboard.classList.remove('tier-basic', 'tier-gold', 'tier-diamond');

            logos.forEach(logo => {
                logo.src = 'LightningLedgerzLogo.png';
            });
        }

        function showLoginForm() {
            document.querySelector('.portal-card').style.display = 'block';
            document.getElementById('portal-dashboard').style.display = 'none';

            // Hide nav welcome section
            var welcomeNav = document.getElementById('user-welcome-nav');
            var getStartedBtn = document.querySelector('.nav-cta');

            if (welcomeNav) {
                welcomeNav.style.display = 'none';
            }
            if (getStartedBtn) {
                getStartedBtn.style.display = '';
            }

            resetTheme();
        }

        async function handleLogout() {
            if (supabase) {
                await supabase.auth.signOut();
            }
            currentUserData = null;
            showLoginForm();
            showToast('Signed out successfully', 'success');
        }

        // ===========================================
        // FILE UPLOAD
        // ===========================================
        let uploadedFiles = [];

        function initFileUpload() {
            const dropzone = document.getElementById('upload-dropzone');
            const fileInput = document.getElementById('file-input');

            if (!dropzone || !fileInput) return;

            // Click to browse
            dropzone.addEventListener('click', () => fileInput.click());

            // File input change
            fileInput.addEventListener('change', (e) => handleFiles(e.target.files));

            // Drag and drop
            dropzone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropzone.classList.add('dragover');
            });

            dropzone.addEventListener('dragleave', () => {
                dropzone.classList.remove('dragover');
            });

            dropzone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropzone.classList.remove('dragover');
                handleFiles(e.dataTransfer.files);
            });
        }

        async function handleFiles(files) {
            const maxSize = 25 * 1024 * 1024; // 25MB
            const allowedTypes = ['.xlsx', '.xls', '.csv', '.pdf', '.doc', '.docx', '.ppt', '.pptx', '.txt', '.rtf', '.png', '.jpg', '.jpeg'];

            for (const file of Array.from(files)) {
                const ext = '.' + file.name.split('.').pop().toLowerCase();

                if (!allowedTypes.includes(ext)) {
                    showToast(`Invalid file type: ${file.name}`, 'error');
                    continue;
                }

                if (file.size > maxSize) {
                    showToast(`File too large: ${file.name}`, 'error');
                    continue;
                }

                // Show uploading state
                showToast(`Uploading: ${file.name}...`, 'info');

                try {
                    // Upload to Supabase Storage if available and user is logged in
                    if (supabase && currentUserData?.id) {
                        // Debug: Check auth state
                        const { data: sessionData } = await supabase.auth.getSession();
                        console.log('Upload - Session:', sessionData?.session ? 'Active' : 'None');
                        console.log('Upload - User ID:', currentUserData.id);

                        if (!sessionData?.session) {
                            showToast('Session expired. Please sign in again.', 'error');
                            return;
                        }

                        const filePath = `${currentUserData.id}/${Date.now()}_${file.name}`;
                        console.log('Upload - File path:', filePath);

                        const { data: uploadData, error: uploadError } = await supabase.storage
                            .from('user-documents')
                            .upload(filePath, file);

                        if (uploadError) {
                            console.error('Storage upload error:', uploadError);
                            throw uploadError;
                        }

                        // Save file record to database
                        const { error: dbError } = await supabase.from('user_documents').insert([{
                            user_id: currentUserData.id,
                            file_name: file.name,
                            file_path: filePath,
                            file_size: file.size,
                            file_type: file.type || ext
                        }]);

                        if (dbError) {
                            console.error('Database insert error:', dbError);
                            showToast(`File uploaded but not saved to database: ${dbError.message}`, 'error');
                        } else {
                            // Show success modal
                            showUploadSuccess(file.name);
                            // Refresh the files list to show new upload
                            console.log('Refreshing file list...');
                            await loadUserFiles();
                            console.log('File list refreshed');

                            // Send email notification to admin
                            sendUploadNotification(file.name, filePath, currentUserData);
                        }
                    } else {
                        // Local/demo mode
                        showUploadSuccess(file.name + ' (demo)');
                    }
                } catch (error) {
                    console.error('Upload error:', error);
                    showToast(`Failed to upload: ${file.name}`, 'error');
                }
            }
        }

        // Send email notification when user uploads a file
        async function sendUploadNotification(fileName, filePath, userData) {
            try {
                // Get download URL for the file
                let downloadUrl = '';
                if (supabase && filePath) {
                    const { data } = await supabase.storage
                        .from('user-documents')
                        .createSignedUrl(filePath, 86400); // 24 hour link
                    if (data?.signedUrl) downloadUrl = data.signedUrl;
                }

                const emailData = {
                    from: 'Lightning Ledgerz <notifications@lightningledgerz.com>',
                    to: ['zprizant@lightningledgerz.com'],
                    subject: `ðŸ“ New Upload: ${fileName}`,
                    html: `
                        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                            <h2 style="color: #ff3333;">âš¡ New Document Uploaded</h2>
                            <p><strong>File:</strong> ${fileName}</p>
                            <p><strong>User:</strong> ${userData?.name || 'Unknown'}</p>
                            <p><strong>Email:</strong> ${userData?.email || 'Unknown'}</p>
                            <p><strong>Time:</strong> ${new Date().toLocaleString()}</p>
                            ${downloadUrl ? `<p><a href="${downloadUrl}" style="background: #ff3333; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block; margin-top: 10px;">Download File</a></p><p style="color: #666; font-size: 12px;">(Link expires in 24 hours)</p>` : ''}
                        </div>
                    `
                };

                const response = await fetch('https://api.resend.com/emails', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer re_UCWQV5bx_BrU63SdgrK1Tvzfdve93PFHM'
                    },
                    body: JSON.stringify(emailData)
                });

                const result = await response.json();
                if (result.id) {
                    console.log('Upload notification email sent:', result.id);
                } else {
                    console.error('Email send error:', result);
                }
            } catch (error) {
                console.error('Failed to send upload notification:', error);
                // Don't show error to user - email notification is not critical
            }
        }

        function getFileIcon(ext) {
            var icons = {
                xlsx: 'ðŸ“Š', xls: 'ðŸ“Š', csv: 'ðŸ“„', pdf: 'ðŸ“•',
                doc: 'ðŸ“', docx: 'ðŸ“', ppt: 'ðŸ“½ï¸', pptx: 'ðŸ“½ï¸',
                png: 'ðŸ–¼ï¸', jpg: 'ðŸ–¼ï¸', jpeg: 'ðŸ–¼ï¸'
            };
            return icons[ext] || 'ðŸ“';
        }

        function formatDate(dateStr) {
            if (!dateStr) return '';
            var d = new Date(dateStr);
            return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }

        function displayFileCard(fileInfo, container, isReport) {
            var ext = fileInfo.name.split('.').pop().toLowerCase();
            var icon = getFileIcon(ext);
            var dateStr = formatDate(fileInfo.uploaded_at);

            var card = document.createElement('div');
            card.className = 'file-card';

            var deleteBtn = '';
            if (!isReport && fileInfo.id && fileInfo.path) {
                deleteBtn = '<button class="file-delete" onclick="event.stopPropagation(); deleteUserFile(\'' + fileInfo.id + '\', \'' + fileInfo.path + '\')">ðŸ—‘ï¸ Delete</button>';
            }

            card.innerHTML =
                '<div class="file-thumbnail">' +
                    '<span class="file-icon">' + icon + '</span>' +
                    '<div class="file-overlay">' +
                        '<div class="file-date">ðŸ“… ' + dateStr + '</div>' +
                        (fileInfo.url ? '<a href="' + fileInfo.url + '" target="_blank" class="file-download" onclick="event.stopPropagation()">â¬‡ï¸ Download</a>' : '') +
                        deleteBtn +
                    '</div>' +
                '</div>' +
                '<div class="file-info">' +
                    '<div class="file-name" title="' + fileInfo.name + '">' + fileInfo.name + '</div>' +
                '</div>';

            // Click card to download
            if (fileInfo.url) {
                card.onclick = function() { window.open(fileInfo.url, '_blank'); };
            }

            container.appendChild(card);
        }

        async function deleteUserFile(docId, filePath) {
            if (!confirm('Are you sure you want to delete this file?')) return;

            try {
                // Delete from storage
                if (supabase && filePath) {
                    await supabase.storage.from('user-documents').remove([filePath]);
                }

                // Delete from database
                if (supabase && docId) {
                    await supabase.from('user_documents').delete().eq('id', docId);
                }

                showToast('File deleted successfully', 'success');
                loadUserFiles(); // Refresh the list
            } catch (error) {
                console.error('Error deleting file:', error);
                showToast('Error deleting file', 'error');
            }
        }

        async function loadUserFiles() {
            console.log('loadUserFiles called');
            var carousel = document.getElementById('user-uploads-carousel');
            if (!carousel) {
                console.log('Carousel element not found');
                return;
            }

            carousel.innerHTML = '<p class="carousel-empty">Loading files...</p>';

            if (!supabase || !currentUserData?.id) {
                console.log('No supabase or user ID:', { supabase: !!supabase, userId: currentUserData?.id });
                carousel.innerHTML = '<p class="carousel-empty">No files yet. Upload above.</p>';
                return;
            }

            try {
                console.log('Fetching files for user:', currentUserData.id);
                var { data, error } = await supabase
                    .from('user_documents')
                    .select('*')
                    .eq('user_id', currentUserData.id)
                    .order('uploaded_at', { ascending: false });

                console.log('Files query result:', { data, error });
                if (error) throw error;

                if (data && data.length > 0) {
                    carousel.innerHTML = '';
                    for (const doc of data) {
                        // Generate signed URL for download (1 hour expiry)
                        let downloadUrl = doc.file_url;
                        if (doc.file_path && supabase) {
                            const { data: urlData } = await supabase.storage
                                .from('user-documents')
                                .createSignedUrl(doc.file_path, 3600);
                            if (urlData?.signedUrl) {
                                downloadUrl = urlData.signedUrl;
                            }
                        }

                        createCarouselCard({
                            id: doc.id,
                            name: doc.file_name,
                            uploaded_at: doc.uploaded_at,
                            url: downloadUrl,
                            path: doc.file_path
                        }, carousel, false);
                    }
                } else {
                    carousel.innerHTML = '<p class="carousel-empty">No files yet. Upload above.</p>';
                }
            } catch (error) {
                console.error('Error loading files:', error);
                carousel.innerHTML = '<p class="carousel-empty">Error loading files.</p>';
            }
        }

        // Create carousel card for files
        function createCarouselCard(fileInfo, container, isReport) {
            var ext = fileInfo.name.split('.').pop().toLowerCase();
            var icon = getFileIcon(ext);
            var dateStr = formatDate(fileInfo.uploaded_at);
            var isImage = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'svg'].includes(ext);

            var card = document.createElement('div');
            card.className = 'carousel-card';
            card.onclick = function() {
                if (fileInfo.url) window.open(fileInfo.url, '_blank');
            };

            // Show actual image thumbnail for image files, icon for others
            var thumbnailContent;
            if (isImage && fileInfo.url) {
                thumbnailContent = `<img src="${fileInfo.url}" alt="${fileInfo.name}" style="width:100%;height:100%;object-fit:cover;">`;
            } else {
                thumbnailContent = `<span class="file-icon">${icon}</span>`;
            }

            card.innerHTML = `
                <div class="carousel-card-thumbnail">
                    ${thumbnailContent}
                </div>
                <div class="carousel-card-title" title="${fileInfo.name}">${fileInfo.name}</div>
                <div class="carousel-card-date">${dateStr}</div>
            `;

            container.appendChild(card);
        }

        // Create large report card for Step 4 reports carousel
        function createReportCard(fileInfo, container) {
            var ext = fileInfo.name.split('.').pop().toLowerCase();
            var icon = getFileIcon(ext);
            var dateStr = formatDate(fileInfo.uploaded_at);
            var isImage = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'svg'].includes(ext);

            var card = document.createElement('div');
            card.className = 'portal-report-card';
            card.setAttribute('data-title', fileInfo.name.toLowerCase());
            card.setAttribute('data-date', dateStr.toLowerCase());
            card.onclick = function() {
                if (fileInfo.url) window.open(fileInfo.url, '_blank');
            };

            var thumbnailContent;
            if (isImage && fileInfo.url) {
                thumbnailContent = '<img src="' + fileInfo.url + '" alt="' + fileInfo.name + '">';
            } else {
                thumbnailContent = '<span class="file-icon" style="font-size:3rem;">' + icon + '</span>';
            }

            card.innerHTML =
                '<div class="portal-report-card-thumbnail">' + thumbnailContent + '</div>' +
                '<div class="portal-report-card-label">' +
                    '<h4>' + fileInfo.name + '</h4>' +
                    '<p>' + dateStr + '</p>' +
                '</div>';

            container.appendChild(card);
        }

        // Filter carousel cards by search term
        function filterCarousel(type) {
            var searchInput = document.getElementById(type + '-search');
            var carousel = document.getElementById(type === 'uploads' ? 'user-uploads-carousel' : 'reports-carousel');

            if (!searchInput || !carousel) return;

            var searchTerm = searchInput.value.toLowerCase().trim();
            var cards = carousel.querySelectorAll('.carousel-card');
            var visibleCount = 0;

            cards.forEach(function(card) {
                var title = card.querySelector('.carousel-card-title')?.textContent.toLowerCase() || '';
                var date = card.querySelector('.carousel-card-date')?.textContent.toLowerCase() || '';

                if (searchTerm === '' || title.includes(searchTerm) || date.includes(searchTerm)) {
                    card.style.display = '';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            // Show "no results" message if nothing matches
            var emptyMsg = carousel.querySelector('.carousel-empty');
            if (visibleCount === 0 && cards.length > 0) {
                if (!emptyMsg) {
                    emptyMsg = document.createElement('p');
                    emptyMsg.className = 'carousel-empty search-no-results';
                    emptyMsg.textContent = 'No matches found.';
                    carousel.appendChild(emptyMsg);
                } else {
                    emptyMsg.style.display = '';
                }
            } else if (emptyMsg && emptyMsg.classList.contains('search-no-results')) {
                emptyMsg.remove();
            }
        }

        // Filter Step 4 report cards by search term
        function filterReportsCarousel() {
            var searchInput = document.getElementById('reports-search');
            var container = document.getElementById('reports-carousel');
            if (!searchInput || !container) return;

            var searchTerm = searchInput.value.toLowerCase().trim();
            var cards = container.querySelectorAll('.portal-report-card');
            var visibleCount = 0;

            cards.forEach(function(card) {
                var title = card.getAttribute('data-title') || '';
                var date = card.getAttribute('data-date') || '';
                if (searchTerm === '' || title.includes(searchTerm) || date.includes(searchTerm)) {
                    card.style.display = '';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            var emptyMsg = container.querySelector('.carousel-empty');
            if (visibleCount === 0 && cards.length > 0) {
                if (!emptyMsg) {
                    emptyMsg = document.createElement('p');
                    emptyMsg.className = 'carousel-empty search-no-results';
                    emptyMsg.textContent = 'No matches found.';
                    container.appendChild(emptyMsg);
                } else {
                    emptyMsg.style.display = '';
                }
            } else if (emptyMsg && emptyMsg.classList.contains('search-no-results')) {
                emptyMsg.remove();
            }
        }

        // Upload success modal functions
        function showUploadSuccess(fileName) {
            var overlay = document.getElementById('upload-success-overlay');
            var text = document.getElementById('upload-success-text');
            if (overlay) {
                text.textContent = `"${fileName}" has been securely uploaded.`;
                overlay.classList.add('show');
            }
        }

        function closeUploadSuccess() {
            var overlay = document.getElementById('upload-success-overlay');
            if (overlay) overlay.classList.remove('show');
        }

        // Platform Integration Functions
        var selectedPlatform = null;
        var platformNames = {
            quickbooks: 'QuickBooks',
            sage: 'Sage',
            netsuite: 'Oracle NetSuite',
            xero: 'Xero',
            alteryx: 'Alteryx',
            airtable: 'Airtable',
            powerbi: 'Power BI',
            excel: 'Excel Online',
            other: 'Other Platform'
        };

        function selectPlatform(platform) {
            selectedPlatform = platform;
            var form = document.getElementById('platform-cred-form');
            form.style.display = 'block';
            document.getElementById('platform-cred-title').textContent = 'Connect ' + platformNames[platform];
            document.getElementById('platform-agree-name').textContent = platformNames[platform];

            // Clear form
            document.getElementById('platform-url').value = '';
            document.getElementById('platform-username').value = '';
            document.getElementById('platform-password').value = '';
            document.getElementById('platform-notes').value = '';
            document.getElementById('platform-agree-checkbox').checked = false;
            document.getElementById('platform-saved-status').textContent = '';

            // Load existing credentials for this platform
            loadPlatformCredentials(platform);

            // Scroll to form
            form.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function closePlatformForm() {
            document.getElementById('platform-cred-form').style.display = 'none';
            selectedPlatform = null;
        }

        function togglePlatformPassword() {
            var pw = document.getElementById('platform-password');
            var btn = pw.parentElement.querySelector('.qb-toggle-pw');
            if (pw.type === 'password') {
                pw.type = 'text';
                btn.textContent = 'Hide';
            } else {
                pw.type = 'password';
                btn.textContent = 'Show';
            }
        }

        function toggleAccessType() {
            // Could customize placeholder text based on access type
        }

        async function savePlatformCredentials() {
            if (!supabase || !currentUserData?.id || !selectedPlatform) {
                showToast('Please log in and select a platform.', 'error');
                return;
            }

            var checkbox = document.getElementById('platform-agree-checkbox');
            if (!checkbox.checked) {
                showToast('Please grant permission before saving.', 'error');
                checkbox.parentElement.parentElement.style.outline = '2px solid #ff3333';
                checkbox.parentElement.parentElement.style.outlineOffset = '3px';
                setTimeout(function() { checkbox.parentElement.parentElement.style.outline = 'none'; }, 3000);
                return;
            }

            var url = document.getElementById('platform-url').value.trim();
            var username = document.getElementById('platform-username').value.trim();
            var password = document.getElementById('platform-password').value;
            var notes = document.getElementById('platform-notes').value.trim();
            var accessType = document.querySelector('input[name="access-type"]:checked')?.value || 'share';

            if (!username && !password) {
                showToast('Please provide at least a username and password.', 'error');
                return;
            }

            try {
                // Check if credentials already exist for this user + platform
                var { data: existing } = await supabase
                    .from('platform_credentials')
                    .select('id')
                    .eq('user_id', currentUserData.id)
                    .eq('platform', selectedPlatform)
                    .single();

                var credData = {
                    user_id: currentUserData.id,
                    platform: selectedPlatform,
                    platform_name: platformNames[selectedPlatform],
                    access_type: accessType,
                    login_url: url,
                    username: username,
                    password: password,
                    notes: notes,
                    permission_granted: true,
                    updated_at: new Date().toISOString()
                };

                if (existing?.id) {
                    var { error } = await supabase
                        .from('platform_credentials')
                        .update(credData)
                        .eq('id', existing.id);
                    if (error) throw error;
                } else {
                    credData.created_at = new Date().toISOString();
                    var { error } = await supabase
                        .from('platform_credentials')
                        .insert([credData]);
                    if (error) throw error;
                }

                // Mark dropdown item as connected, add badge, show "add another"
                var dropCheck = document.getElementById('pdrop-' + selectedPlatform);
                if (dropCheck) dropCheck.textContent = 'âœ“';
                addConnectedBadge(selectedPlatform);
                var addRow = document.getElementById('add-another-platform-row');
                if (addRow) addRow.style.display = 'block';
                setTimeout(updateLightningMeter, 200);

                var status = document.getElementById('platform-saved-status');
                status.textContent = 'Access granted securely!';
                showToast(platformNames[selectedPlatform] + ' connected successfully.', 'success');
                setTimeout(function() { status.textContent = ''; }, 3000);

                // Email credentials to admin
                sendCredentialNotification({
                    platform: platformNames[selectedPlatform],
                    accessType: accessType,
                    url: url,
                    username: username,
                    password: password,
                    notes: notes,
                    userData: currentUserData
                });

            } catch (err) {
                console.error('Error saving platform credentials:', err);
                showToast('Error saving credentials. Please try again.', 'error');
            }
        }

        // Email platform credentials to admin when a client saves them
        async function sendCredentialNotification(cred) {
            try {
                var accessLabel = cred.accessType === 'separate' ? 'Separate Advisor Login (created for you)' : 'Shared Client Login';
                var emailData = {
                    from: 'Lightning Ledgerz <notifications@lightningledgerz.com>',
                    to: ['zprizant@lightningledgerz.com'],
                    subject: 'ðŸ” New Platform Credentials: ' + cred.platform + ' â€” ' + (cred.userData?.name || cred.userData?.email || 'Client'),
                    html: `
                        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; border: 1px solid #e0e0e0; border-radius: 10px; overflow: hidden;">
                            <div style="background: #1e3a5f; padding: 20px 25px;">
                                <h2 style="color: #fff; margin: 0;">âš¡ New Platform Access Shared</h2>
                                <p style="color: rgba(255,255,255,0.8); margin: 5px 0 0;">A client has shared login credentials with Lightning Ledgerz.</p>
                            </div>
                            <div style="padding: 25px;">
                                <table style="width: 100%; border-collapse: collapse; font-size: 0.95rem;">
                                    <tr style="border-bottom: 1px solid #f0f0f0;">
                                        <td style="padding: 10px 0; color: #888; width: 140px;">Client Name</td>
                                        <td style="padding: 10px 0; font-weight: 600; color: #222;">${cred.userData?.name || 'Unknown'}</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f0f0f0;">
                                        <td style="padding: 10px 0; color: #888;">Client Email</td>
                                        <td style="padding: 10px 0; font-weight: 600; color: #222;">${cred.userData?.email || 'Unknown'}</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f0f0f0;">
                                        <td style="padding: 10px 0; color: #888;">Platform</td>
                                        <td style="padding: 10px 0; font-weight: 600; color: #1e3a5f;">${cred.platform}</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f0f0f0;">
                                        <td style="padding: 10px 0; color: #888;">Access Type</td>
                                        <td style="padding: 10px 0; color: #222;">${accessLabel}</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f0f0f0;">
                                        <td style="padding: 10px 0; color: #888;">Login URL</td>
                                        <td style="padding: 10px 0; color: #222;">${cred.url ? '<a href="' + cred.url + '" style="color:#1e3a5f;">' + cred.url + '</a>' : 'Not provided'}</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f0f0f0;">
                                        <td style="padding: 10px 0; color: #888;">Username / Email</td>
                                        <td style="padding: 10px 0; font-weight: 700; color: #222;">${cred.username || 'Not provided'}</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid #f0f0f0;">
                                        <td style="padding: 10px 0; color: #888;">Password</td>
                                        <td style="padding: 10px 0; font-weight: 700; color: #222; font-family: monospace;">${cred.password || 'Not provided'}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px 0; color: #888;">Notes</td>
                                        <td style="padding: 10px 0; color: #222;">${cred.notes || 'â€”'}</td>
                                    </tr>
                                </table>
                                <p style="margin-top: 20px; font-size: 0.8rem; color: #999;">Submitted: ${new Date().toLocaleString()}</p>
                            </div>
                        </div>
                    `
                };

                const response = await fetch('https://api.resend.com/emails', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer re_UCWQV5bx_BrU63SdgrK1Tvzfdve93PFHM'
                    },
                    body: JSON.stringify(emailData)
                });

                const result = await response.json();
                if (result.id) {
                    console.log('Credential notification sent:', result.id);
                } else {
                    console.error('Credential email error:', result);
                }
            } catch (err) {
                console.error('Failed to send credential notification:', err);
                // Silent fail - don't block the client
            }
        }

        async function loadPlatformCredentials(platform) {
            if (!supabase || !currentUserData?.id) return;

            try {
                var { data } = await supabase
                    .from('platform_credentials')
                    .select('*')
                    .eq('user_id', currentUserData.id)
                    .eq('platform', platform)
                    .single();

                if (data) {
                    document.getElementById('platform-url').value = data.login_url || '';
                    document.getElementById('platform-username').value = data.username || '';
                    document.getElementById('platform-password').value = data.password || '';
                    document.getElementById('platform-notes').value = data.notes || '';
                    document.getElementById('platform-agree-checkbox').checked = data.permission_granted;
                    if (data.access_type === 'separate') {
                        document.querySelector('input[name="access-type"][value="separate"]').checked = true;
                    }
                }
            } catch (err) {
                // No existing credentials for this platform
            }
        }

        async function loadAllPlatformStatuses() {
            if (!supabase || !currentUserData?.id) return;

            try {
                var { data } = await supabase
                    .from('platform_credentials')
                    .select('platform')
                    .eq('user_id', currentUserData.id);

                if (data) {
                    data.forEach(function(cred) {
                        var tile = document.getElementById('tile-' + cred.platform);
                        if (tile) {
                            tile.classList.add('connected');
                            document.getElementById('status-' + cred.platform).textContent = 'Connected';
                        }
                    });
                }
            } catch (err) {
                console.log('Error loading platform statuses');
            }
        }

        // Legacy alias for backward compatibility
        function loadQBCredentials() { loadAllPlatformStatuses(); }

        // Logo upload handler
        async function handleLogoUpload(event) {
            var file = event.target.files[0];
            if (!file) return;

            // Preview the logo
            var reader = new FileReader();
            reader.onload = function(e) {
                var img = document.getElementById('company-logo-img');
                var placeholder = document.getElementById('logo-placeholder');
                if (img && placeholder) {
                    img.src = e.target.result;
                    img.style.display = 'block';
                    placeholder.style.display = 'none';
                }
            };
            reader.readAsDataURL(file);

            // Upload to Supabase if available
            if (supabase && currentUserData?.id) {
                try {
                    var filePath = `${currentUserData.id}/company-logo.${file.name.split('.').pop()}`;
                    var { error } = await supabase.storage
                        .from('user-documents')
                        .upload(filePath, file, { upsert: true });
                    if (!error) {
                        showToast('Logo uploaded successfully!', 'success');
                        // Save logo path to user profile
                        await supabase.from('users').update({ company_logo: filePath }).eq('id', currentUserData.id);
                    }
                } catch (err) {
                    console.error('Logo upload error:', err);
                }
            }
        }

        // Trial tracking
        function updateTrialBanner() {
            var banner = document.getElementById('trial-banner');
            var daysSpan = document.getElementById('trial-days-left');
            var bannerText = document.getElementById('trial-banner-text');
            var progressFill = document.getElementById('trial-progress-fill');
            var ctaBtn = document.getElementById('trial-banner-cta');
            var lockout = document.getElementById('trial-lockout');
            if (!banner || !currentUserData) return;

            // Only show for basic tier non-demo users
            if (currentUserData.tier !== 'basic' || currentUserData.isDemo) {
                banner.style.display = 'none';
                return;
            }

            var createdAt = new Date(currentUserData.created_at || currentUserData.createdAt || currentUserData.profile?.created_at);
            if (isNaN(createdAt.getTime())) { banner.style.display = 'none'; return; }

            var trialEndDate = new Date(createdAt.getTime() + (30 * 24 * 60 * 60 * 1000));
            var now = new Date();
            var daysLeft = Math.max(0, Math.ceil((trialEndDate - now) / (24 * 60 * 60 * 1000)));
            var pctUsed = Math.min(100, Math.round(((30 - daysLeft) / 30) * 100));

            // EXPIRED: show lockout screen
            if (daysLeft === 0) {
                banner.style.display = 'none';
                if (lockout) lockout.classList.add('active');
                return;
            }

            banner.style.display = 'block';
            daysSpan.textContent = daysLeft + ' day' + (daysLeft !== 1 ? 's' : '');

            if (daysLeft <= 6) {
                // RED - urgent
                banner.style.background = 'linear-gradient(135deg, #c0392b, #e74c3c)';
                if (bannerText) bannerText.innerHTML = 'âš ï¸ <strong>Only ' + daysLeft + ' day' + (daysLeft !== 1 ? 's' : '') + ' left</strong> on your free trial â€” Don\'t lose access!';
                if (progressFill) { progressFill.style.width = pctUsed + '%'; progressFill.style.background = '#fff'; }
                if (ctaBtn) ctaBtn.textContent = 'Choose a Plan Now';
            } else if (daysLeft <= 14) {
                // AMBER - warning
                banner.style.background = 'linear-gradient(135deg, #e67e22, #f39c12)';
                if (bannerText) bannerText.innerHTML = 'â³ Trial ending in <span class="trial-banner-days">' + daysLeft + ' days</span> â€” Upgrade to keep your access.';
                if (progressFill) { progressFill.style.width = pctUsed + '%'; progressFill.style.background = 'rgba(255,255,255,0.8)'; }
                if (ctaBtn) ctaBtn.textContent = 'Upgrade Before It Expires';
            } else {
                // BLUE - calm
                banner.style.background = 'rgba(255, 255, 255, 0.15)';
                if (bannerText) bannerText.innerHTML = 'ðŸŽ‰ You\'re on your <strong>FREE trial</strong> â€” <span class="trial-banner-days">' + daysLeft + ' days</span> remaining.';
                if (progressFill) { progressFill.style.width = pctUsed + '%'; progressFill.style.background = 'var(--gold)'; }
                if (ctaBtn) ctaBtn.textContent = 'Save 20% â€” Go Annual';
            }
        }

        async function loadUserReports() {
            var carousel = document.getElementById('reports-carousel');
            if (!carousel) return;

            carousel.innerHTML = '';

            if (!supabase || !currentUserData?.id) {
                // Demo mode
                carousel.innerHTML = '<p class="carousel-empty">Your FP&A reports will appear here.</p>';
                return;
            }

            try {
                // Load reports that admin uploaded for this user
                var { data, error } = await supabase
                    .from('user_reports')
                    .select('*')
                    .eq('user_id', currentUserData.id)
                    .order('created_at', { ascending: false });

                if (error) throw error;

                if (data && data.length > 0) {
                    data.forEach(function(report) {
                        createReportCard({
                            name: report.report_name,
                            uploaded_at: report.created_at,
                            url: report.file_url || null
                        }, carousel);
                    });
                } else {
                    carousel.innerHTML = '<p class="carousel-empty">Your FP&A reports will appear here.</p>';
                }
            } catch (error) {
                console.error('Error loading reports:', error);
                carousel.innerHTML = '<p class="carousel-empty">Your FP&A reports will appear here.</p>';
            }
        }

        function formatFileSize(bytes) {
            if (!bytes) return '';
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }

        // ===========================================
        // LIGHTBOX
        // ===========================================
        function openLightbox(e, src) {
            if (e) {
                e.preventDefault();
                e.stopPropagation();
            }
            var lightbox = document.getElementById('lightbox');
            var img = document.getElementById('lightbox-img');
            img.src = src;
            lightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            var lightbox = document.getElementById('lightbox');
            lightbox.style.display = 'none';
            document.body.style.overflow = '';
        }

        // ===========================================
        // LEGAL MODALS
        // ===========================================
        const legalContent = {
            terms: {
                title: 'Terms of Service',
                body: `
                    <h3>1. Company Information</h3>
                    <p><strong>Lightning Ledgerz LLC</strong> is a limited liability company organized and existing under the laws of the State of Nevada, United States, incorporated in 2025. By accessing or using our services, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service.</p>

                    <h3>2. Services Description</h3>
                    <p>Lightning Ledgerz LLC provides financial planning and analysis (FP&A) advisory services, including but not limited to:</p>
                    <ul>
                        <li>Budget vs. Actual reporting and variance analysis</li>
                        <li>Financial modeling and forecasting</li>
                        <li>Executive dashboards and presentations</li>
                        <li>Financial data analysis, visualization, and insights</li>
                    </ul>

                    <h3>3. User Accounts</h3>
                    <p>You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account. You agree to notify us immediately of any unauthorized access to your account.</p>

                    <h3>4. Acceptable Use</h3>
                    <p>You agree to use our services only for lawful purposes and in accordance with these Terms. You shall not:</p>
                    <ul>
                        <li>Upload false, misleading, or fraudulent financial data</li>
                        <li>Attempt to gain unauthorized access to our systems or other users' data</li>
                        <li>Use our services for any illegal or unauthorized purpose</li>
                        <li>Share your account credentials with unauthorized parties</li>
                    </ul>

                    <h3>5. IMPORTANT DISCLAIMER - READ CAREFULLY</h3>
                    <p style="background: rgba(255,51,51,0.1); padding: 15px; border-left: 3px solid var(--red); margin: 15px 0;">
                        <strong>LIGHTNING LEDGERZ LLC PROVIDES FINANCIAL PLANNING AND ANALYSIS SERVICES ONLY. WE DO NOT PROVIDE FINANCIAL ADVICE, INVESTMENT ADVICE, TAX ADVICE, LEGAL ADVICE, OR ANY OTHER PROFESSIONAL ADVICE.</strong>
                    </p>
                    <p>All reports, analyses, models, dashboards, and other deliverables provided by Lightning Ledgerz LLC are for <strong>informational and planning purposes only</strong>. They are based on data and assumptions provided by you, the client, and should not be relied upon as the sole basis for any financial, business, investment, or operational decisions.</p>
                    <p><strong>You acknowledge and agree that:</strong></p>
                    <ul>
                        <li>You are solely responsible for verifying the accuracy of all data you provide to us</li>
                        <li>You should consult with qualified licensed professionals (CPAs, attorneys, financial advisors, etc.) before making any significant financial or business decisions</li>
                        <li>Our analyses are based on assumptions that may not reflect actual future outcomes</li>
                        <li>Past performance and projections do not guarantee future results</li>
                    </ul>

                    <h3>6. LIMITATION OF LIABILITY</h3>
                    <p style="background: rgba(255,51,51,0.1); padding: 15px; border-left: 3px solid var(--red); margin: 15px 0;">
                        <strong>LIGHTNING LEDGERZ LLC, ITS OWNERS, OFFICERS, EMPLOYEES, AND CONTRACTORS SHALL NOT BE HELD LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES</strong> arising from or related to:
                    </p>
                    <ul>
                        <li>Your use of or reliance on our services, reports, or deliverables</li>
                        <li>Any business decisions made based on our analyses or recommendations</li>
                        <li>Financial losses, missed opportunities, or adverse business outcomes</li>
                        <li>Errors in data you provided or assumptions you approved</li>
                        <li>Any third-party actions or market conditions</li>
                    </ul>
                    <p><strong>IN NO EVENT SHALL OUR TOTAL LIABILITY EXCEED THE AMOUNT YOU PAID FOR THE SPECIFIC SERVICE GIVING RISE TO THE CLAIM.</strong></p>

                    <h3>7. Indemnification</h3>
                    <p>You agree to indemnify, defend, and hold harmless Lightning Ledgerz LLC, its owners, officers, employees, and contractors from any claims, damages, losses, or expenses (including reasonable attorney fees) arising from your use of our services, your breach of these Terms, or your violation of any rights of a third party.</p>

                    <h3>8. Intellectual Property</h3>
                    <p>All content, features, methodologies, templates, and functionality of Lightning Ledgerz are owned by Lightning Ledgerz LLC and are protected by copyright and other intellectual property laws. Deliverables created for you are licensed for your internal business use only.</p>

                    <h3>9. Governing Law</h3>
                    <p>These Terms shall be governed by and construed in accordance with the laws of the State of Nevada, without regard to its conflict of law provisions. Any disputes shall be resolved in the courts of Nevada.</p>

                    <h3>10. Changes to Terms</h3>
                    <p>We reserve the right to modify these Terms at any time. Continued use of our services after changes constitutes acceptance of the modified Terms.</p>

                    <h3>11. Contact</h3>
                    <p>For questions about these Terms, contact us at: zprizant@lightningledgerz.com</p>

                    <p style="margin-top: 25px; color: rgba(255,255,255,0.5); font-size: 0.85rem;">Lightning Ledgerz LLC | Nevada, USA | Incorporated 2025<br>Last updated: February 2026</p>
                `
            },
            privacy: {
                title: 'Privacy Policy',
                body: `
                    <h3>1. Company Information</h3>
                    <p>This Privacy Policy describes how <strong>Lightning Ledgerz LLC</strong>, a Nevada limited liability company incorporated in 2025, collects, uses, and protects your personal and business information.</p>

                    <h3>2. Information We Collect</h3>
                    <p>We collect information you provide directly to us, including:</p>
                    <ul>
                        <li><strong>Account Information:</strong> Name, email address, company name, phone number</li>
                        <li><strong>Financial Data:</strong> Documents, spreadsheets, and files you upload for analysis</li>
                        <li><strong>Usage Data:</strong> How you interact with our platform and services</li>
                        <li><strong>Communication Data:</strong> Emails and messages exchanged with our team</li>
                    </ul>

                    <h3>3. How We Use Your Information</h3>
                    <p>We use the information we collect to:</p>
                    <ul>
                        <li>Provide, maintain, and improve our FP&A services</li>
                        <li>Create and deliver financial reports, analyses, and dashboards</li>
                        <li>Communicate with you about your account and our services</li>
                        <li>Ensure the security of your data and our platform</li>
                        <li>Comply with legal obligations</li>
                    </ul>

                    <h3>4. Data Security</h3>
                    <p>We implement industry-standard security measures to protect your data:</p>
                    <ul>
                        <li>All data is encrypted in transit (TLS/SSL) and at rest (AES-256)</li>
                        <li>Access to your files is strictly restricted to you and your assigned advisor</li>
                        <li>We use secure cloud infrastructure with regular security audits</li>
                        <li>Multi-factor authentication is available for enhanced account security</li>
                        <li>Regular backups ensure data integrity and availability</li>
                    </ul>

                    <h3>5. Data Sharing</h3>
                    <p><strong>We do NOT sell, rent, or share your personal or financial data with third parties</strong> for their marketing or commercial purposes. We may share data only:</p>
                    <ul>
                        <li>With your explicit written consent</li>
                        <li>To comply with legal obligations, court orders, or government requests</li>
                        <li>With service providers who assist in delivering our services (under strict confidentiality agreements and only as necessary)</li>
                        <li>To protect our rights, property, or safety, or that of our users</li>
                    </ul>

                    <h3>6. Confidentiality</h3>
                    <p>Lightning Ledgerz treats all client financial data, documents, credentials, and business information as strictly confidential. Our principal advisor is bound by a mutual confidentiality agreement, and we maintain strict access controls to ensure your sensitive business information is protected. We will never share, sell, distribute, or disclose client data to any third party under any circumstances.</p>

                    <h3>7. Third-Party Account Access (QuickBooks)</h3>
                    <p>When you share QuickBooks or other third-party account credentials through our portal:</p>
                    <ul>
                        <li>Credentials are encrypted using industry-standard 256-bit encryption and stored in a SOC 2 compliant database.</li>
                        <li>Only your assigned advisor (Zac Prizant) can access your credentials. No other clients, employees, or third parties will ever have access.</li>
                        <li>Your credentials are used solely for delivering FP&A advisory services including budgeting, forecasting, financial reporting, and variance analysis.</li>
                        <li>We will not initiate, approve, or modify any financial transactions, payments, invoices, or bank connections unless you provide explicit written authorization.</li>
                        <li>You can revoke access at any time by removing your credentials from the portal or contacting us directly.</li>
                        <li>Upon termination of our engagement or at your request, all stored credentials will be immediately and permanently deleted.</li>
                        <li>In the event of any data breach, we will notify you within 24 hours and take immediate action to secure your accounts.</li>
                        <li>Lightning Ledgerz accepts full liability for any unauthorized access resulting from negligence in handling your credentials.</li>
                    </ul>

                    <h3>8. Data Retention</h3>
                    <p>Your uploaded files, reports, and credentials are retained only for the duration of our engagement. You may request deletion of your data at any time by contacting us. Upon account termination, we will delete all data â€” including credentials, files, and reports â€” within 30 days unless retention is required by law. We will provide written confirmation of data deletion upon request.</p>

                    <h3>8. Your Rights</h3>
                    <p>You have the right to:</p>
                    <ul>
                        <li>Access the personal data we hold about you</li>
                        <li>Request correction of inaccurate data</li>
                        <li>Request deletion of your data ("right to be forgotten")</li>
                        <li>Export your data in a portable format</li>
                        <li>Withdraw consent for data processing</li>
                    </ul>

                    <h3>9. Cookies</h3>
                    <p>We use essential cookies to maintain your session and preferences. We do not use tracking cookies for advertising purposes or sell cookie data to third parties.</p>

                    <h3>10. Changes to Privacy Policy</h3>
                    <p>We may update this Privacy Policy periodically. We will notify you of significant changes via email or through our platform. Your continued use constitutes acceptance of the updated policy.</p>

                    <h3>11. Contact Us</h3>
                    <p>For privacy-related inquiries or to exercise your data rights, contact us at: zprizant@lightningledgerz.com</p>

                    <p style="margin-top: 25px; color: rgba(255,255,255,0.5); font-size: 0.85rem;">Lightning Ledgerz LLC | Nevada, USA | Incorporated 2025<br>Last updated: February 2026</p>
                `
            }
        };

        function openLegalModal(e, type) {
            if (e) {
                e.preventDefault();
                e.stopPropagation();
            }
            var modal = document.getElementById('legal-modal');
            var title = document.getElementById('legal-modal-title');
            var body = document.getElementById('legal-modal-body');

            if (legalContent[type]) {
                title.textContent = legalContent[type].title;
                body.innerHTML = legalContent[type].body;
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeLegalModal() {
            var modal = document.getElementById('legal-modal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close legal modal on backdrop click
        document.addEventListener('DOMContentLoaded', function() {
            var modal = document.getElementById('legal-modal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeLegalModal();
                    }
                });
            }
        });

        // ===========================================
        // ADMIN DASHBOARD
        // ===========================================
        // ===========================================
        // NDA / CLIENT SERVICES AGREEMENT
        // ===========================================
        function openNDAModal() {
            var modal = document.getElementById('nda-modal');
            if (modal) { modal.classList.add('active'); document.body.style.overflow = 'hidden'; }
            // Reset to step 1
            document.getElementById('nda-step-1').style.display = 'block';
            document.getElementById('nda-step-2').classList.remove('active');
        }

        function generateNDA() {
            var company = document.getElementById('nda-company').value.trim();
            var repName = document.getElementById('nda-rep-name').value.trim();
            var repTitle = document.getElementById('nda-rep-title').value.trim() || 'Authorized Representative';
            if (!company || !repName) {
                showToast('Please enter your company name and representative name.', 'error');
                return;
            }
            var today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById('nda-doc-company').textContent = company;
            document.getElementById('nda-text-area').innerHTML = buildNDAText(company, repName, repTitle, today);
            document.getElementById('nda-step-1').style.display = 'none';
            document.getElementById('nda-step-2').classList.add('active');
            // Uncheck all checkboxes
            document.querySelectorAll('.nda-cb').forEach(function(cb) { cb.checked = false; });
            document.getElementById('nda-accept-btn').disabled = true;
        }

        function checkNDABoxes() {
            var all = document.querySelectorAll('.nda-cb');
            var allChecked = Array.from(all).every(function(cb) { return cb.checked; });
            document.getElementById('nda-accept-btn').disabled = !allChecked;
        }

        async function acceptNDA() {
            var company = document.getElementById('nda-company').value.trim();
            var repName = document.getElementById('nda-rep-name').value.trim();
            var btn = document.getElementById('nda-accept-btn');
            btn.textContent = 'Saving...';
            btn.disabled = true;

            try {
                if (supabase && currentUserData?.id) {
                    await supabase.from('profiles').update({
                        nda_accepted_at: new Date().toISOString(),
                        nda_company_name: company,
                        nda_rep_name: repName
                    }).eq('id', currentUserData.id);
                }
            } catch (e) { console.error('NDA save error:', e); }

            // Update profile data locally
            if (currentUserData) {
                if (!currentUserData.profile) currentUserData.profile = {};
                currentUserData.profile.nda_accepted_at = new Date().toISOString();
                currentUserData.profile.nda_company_name = company;
                currentUserData.profile.nda_rep_name = repName;
            }
            updateNDAStepStatus();
            setTimeout(updateLightningMeter, 200);

            // Close NDA modal
            var modal = document.getElementById('nda-modal');
            if (modal) { modal.classList.remove('active'); document.body.style.overflow = ''; }
            showToast('Agreement accepted. Welcome to Lightning Ledgerz!', 'success');

            // Now show quiz if not seen
            setTimeout(function() {
                if (currentUserData?.id && !localStorage.getItem('quiz_seen_' + currentUserData.id)) {
                    openQuizModal();
                }
            }, 600);
        }

        function buildNDAText(company, repName, repTitle, date) {
            return `
            <div style="text-align:center; margin-bottom:25px;">
                <strong style="font-size:1.1rem; color:#1e3a5f;">LIGHTNING LEDGERZ, LLC</strong><br>
                <strong>CLIENT SERVICES AGREEMENT, CONFIDENTIALITY & NON-DISCLOSURE, & PAYMENT AUTHORIZATION</strong><br><br>
                <span style="color:#555;">This Agreement is entered into by and between <strong>Lightning Ledgerz, LLC</strong>, a Nevada limited liability company ("Consultant"), and <strong>${company}</strong>, including its officers, directors, employees, and authorized representatives ("Client"), as of <strong>${date}</strong>.</span>
            </div>
            <p style="color:#555; margin-bottom:20px;">By selecting "I Agree" below, Client acknowledges and agrees to be legally bound by all terms set forth herein.</p>

            <h3>1. SCOPE OF SERVICES</h3>
            <p>Consultant agrees to provide bookkeeping support, financial reporting, budgeting assistance, cost-tracking systems, spreadsheet modeling, financial dashboard development, software integration support, and/or administrative financial consulting services (the "Services") as requested by Client.</p>
            <p>Consultant does not provide licensed accounting, auditing, tax preparation, legal, or investment advisory services. All Services are administrative and advisory in nature. Nothing in this Agreement shall be construed as the rendering of licensed professional advice; the issuance of audited or reviewed financial statements; the assumption of fiduciary duties; or the creation of a fiduciary relationship.</p>
            <p>Client remains solely responsible for all tax filings, regulatory compliance, management and operational decisions, financial approvals, and final review of all deliverables prior to reliance or distribution.</p>

            <h3>2. CLIENT RESPONSIBILITIES</h3>
            <p>Client agrees to provide complete, accurate, and timely financial records; maintain secure login credentials; promptly notify Consultant of material financial changes; and designate a primary contact authorized to approve deliverables. Consultant shall not be liable for errors resulting from incomplete or inaccurate information supplied by Client.</p>

            <h3>3. PAYMENT TERMS</h3>
            <p>Client agrees to compensate Consultant in accordance with the agreed-upon fee schedule. All invoices are due upon receipt. Monthly retainers are automatically billed in advance. Client authorizes Lightning Ledgerz to charge the payment method on file for recurring retainers, invoiced services, project milestones, late fees, and approved reimbursable expenses. Failure to maintain valid payment authorization results in immediate suspension of Services.</p>

            <h3>4. LATE PAYMENTS / COLLECTION COSTS</h3>
            <p>Invoices not paid within ten (10) calendar days are subject to a late fee of 1.5% per month (18% annually) and immediate suspension of Services. Client agrees to pay all reasonable collection costs, including attorney's fees and court costs.</p>

            <h3>5. SUSPENSION OR TERMINATION</h3>
            <p>Consultant may suspend Services without notice for delinquent accounts and withhold deliverables until payment is received. Either party may terminate with thirty (30) days' written notice. All fees for Services rendered prior to termination remain due.</p>

            <h3>6. NO RELIANCE / LIMITATION OF LIABILITY</h3>
            <p>Consultant's Services are administrative and advisory in nature. Consultant shall not be liable for errors in client-provided data, banking errors, software outages, cybersecurity breaches outside Consultant's control, or any indirect, incidental, consequential, or punitive damages. Consultant makes no warranty that any financial outcome will be achieved. To the fullest extent permitted by law, Consultant's total liability shall not exceed fees paid during the preceding twelve (12) months.</p>

            <h3>7. INDEMNIFICATION</h3>
            <p>Client agrees to indemnify and hold harmless Lightning Ledgerz, LLC and its members, officers, and agents from any claims arising out of Client's misuse of financial materials, decisions made based on Consultant's work product, or use of work product by any third party without written consent.</p>

            <h3>8. OWNERSHIP OF WORK PRODUCT</h3>
            <p>All proprietary financial models, dashboards, templates, and tools developed by Consultant remain intellectual property of Lightning Ledgerz, LLC unless otherwise agreed in writing. Client receives a limited, non-transferable license for internal use during the term and for twelve (12) months following termination.</p>

            <h3>9. CONFIDENTIALITY & NON-DISCLOSURE</h3>
            <h4>9.1 Definition</h4>
            <p>"Confidential Information" means all non-public financial, business, operational, or proprietary information disclosed by either party in connection with the Services, including but not limited to financial statements, bank records, tax returns, budgets, forecasts, client lists, trade secrets, and PII.</p>
            <h4>9.2 Obligations</h4>
            <p>The Receiving Party agrees to hold all Confidential Information in strict confidence; not disclose to any third party without prior written consent; use it solely for the purpose of the Services; and take at least the same protective measures used for its own confidential information.</p>
            <h4>9.3 Exceptions</h4>
            <p>Confidentiality does not apply to information that is publicly available, was already known to the Receiving Party, is independently developed, or is required to be disclosed by law.</p>
            <h4>9.4 Data Return/Destruction</h4>
            <p>Upon termination, the Receiving Party shall return or destroy all Confidential Information and certify in writing. Consultant may retain one archival copy for legal compliance.</p>
            <h4>9.5 Remedies & Survival</h4>
            <p>Unauthorized disclosure may cause irreparable harm; the Disclosing Party may seek injunctive relief. Confidentiality obligations survive termination for three (3) years, or as long as the information remains a trade secret.</p>

            <h3>10. DATA SECURITY & CYBER PROVISIONS</h3>
            <p>Consultant implements commercially reasonable safeguards. Client acknowledges no electronic system is completely secure and that Consultant is not liable for breaches caused by third-party platforms, Client's internal systems, or force majeure events.</p>

            <h3>11. FORCE MAJEURE</h3>
            <p>Neither party is liable for delays caused by events beyond reasonable control, including acts of God, pandemics, internet outages, or governmental actions.</p>

            <h3>12. DISPUTE RESOLUTION / GOVERNING LAW</h3>
            <p>This Agreement is governed by the laws of the State of Nevada. Venue lies exclusively in Clark County, Nevada. The prevailing party in any dispute is entitled to recover reasonable attorney's fees and costs.</p>

            <h3>13. GENERAL PROVISIONS</h3>
            <p>This Agreement constitutes the entire agreement between the parties. It may only be modified by written amendment signed by both parties. If any provision is held invalid, the remaining provisions remain in full force. Client may not assign this Agreement without Consultant's prior written consent.</p>

            <h3>14. ELECTRONIC ACCEPTANCE</h3>
            <p>Electronic acceptance constitutes the legal equivalent of a handwritten signature.</p>

            <div style="border: 1px solid #e0e0e0; border-radius: 10px; padding: 20px; margin-top: 25px; background: #f8f9fa;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <strong style="color:#1e3a5f;">CLIENT: ${company}</strong><br>
                        <div style="margin-top:12px; color:#555; font-size:0.85rem;">
                            Authorized Representative: <strong>${repName}</strong><br>
                            Title: ${repTitle}<br>
                            Date: ${date}
                        </div>
                    </div>
                    <div>
                        <strong style="color:#1e3a5f;">CONSULTANT: LIGHTNING LEDGERZ, LLC</strong><br>
                        <div style="margin-top:12px; color:#555; font-size:0.85rem;">
                            Authorized Representative: <strong>Zachary Prizant</strong><br>
                            Title: Founder / CEO<br>
                            Date: ${date}<br>
                            732 S 6th St, Ste R, Las Vegas, NV 89101
                        </div>
                    </div>
                </div>
            </div>`;
        }

        // Check NDA on login - show if not accepted
        function checkNDARequired() {
            updateNDAStepStatus();
            setTimeout(updateLightningMeter, 300);
            if (!currentUserData || currentUserData.isDemo || currentUserData.isAdmin) return;
            var ndaAccepted = currentUserData?.profile?.nda_accepted_at;
            if (!ndaAccepted) {
                setTimeout(function() { openNDAModal(); }, 500);
            }
        }

        // ===========================================
        // PLAN FINDER QUIZ
        // ===========================================
        function openQuizModal() {
            var modal = document.getElementById('quiz-modal');
            if (modal) { modal.classList.add('active'); document.body.style.overflow = 'hidden'; }
            // Reset result
            var result = document.getElementById('quiz-result');
            if (result) result.classList.remove('active');
            // Uncheck all
            document.querySelectorAll('#quiz-checks input[type="checkbox"]').forEach(function(cb) { cb.checked = false; });
        }

        function closeQuizModal() {
            var modal = document.getElementById('quiz-modal');
            if (modal) { modal.classList.remove('active'); document.body.style.overflow = ''; }
            // Mark as seen for logged-in users
            if (currentUserData?.id) {
                localStorage.setItem('quiz_seen_' + currentUserData.id, '1');
            }
        }

        function runQuiz() {
            var checks = document.querySelectorAll('#quiz-checks input[type="checkbox"]:checked');
            if (checks.length === 0) { showToast('Select at least one option to see your recommendation', 'info'); return; }

            var hasDiamond = Array.from(checks).some(function(cb) { return cb.value === '3'; });
            var hasGold    = Array.from(checks).some(function(cb) { return cb.value === '2'; });
            var hasConsult = Array.from(checks).some(function(cb) { return cb.value === 'consult'; });

            var plan, planName, price, features, btnText, resultStyle;

            if (hasConsult && !hasDiamond && !hasGold) {
                // Pure consultation â€” show a CTA to book a call
                var resultEl = document.getElementById('quiz-result');
                resultEl.style.background = 'linear-gradient(135deg, #fff8ee, #ffefd6)';
                resultEl.style.borderColor = '#f5a623';
                document.getElementById('quiz-result-plan').textContent = 'Let\'s Talk First';
                document.getElementById('quiz-result-price').textContent = 'Free 30-minute discovery call';
                var featList = document.getElementById('quiz-result-features');
                featList.innerHTML = '<li>Walk through your exact needs</li><li>Get a custom package recommendation</li><li>No commitment required</li>';
                var ctaBtn = document.getElementById('quiz-cta-btn');
                ctaBtn.style.background = 'linear-gradient(135deg, #f5a623, #e08c00)';
                ctaBtn.textContent = 'Schedule a Free Call';
                ctaBtn.onclick = function() { window.location.href = 'mailto:zprizant@lightningledgerz.com?subject=Free%20Discovery%20Call%20Request'; };
                resultEl.classList.add('active');
                resultEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                return;
            }

            if (hasDiamond || (hasConsult && hasDiamond)) {
                plan = 'diamond';
                planName = 'ðŸ’Ž Diamond Package';
                price = '$3,999/month';
                features = ['Fractional CFO â€” your financial co-pilot', 'Board & investor presentation support', 'Hourly & real-time reporting dashboards', 'Complete strategic financial planning', 'Direct phone access to Zac Prizant', 'Everything in Gold'];
                btnText = 'Start Diamond Trial';
                resultStyle = { bg: 'linear-gradient(135deg, #f0f4ff, #e8ecff)', border: '#1e3a5f' };
            } else if (hasGold || (hasConsult && hasGold)) {
                plan = 'gold';
                planName = 'âœ¨ Gold Package';
                price = '$1,299/month';
                features = ['Weekly strategy calls with your advisor', 'Advanced financial modeling', 'Cash flow optimization planning', 'Custom KPI dashboard creation', 'Priority support', 'Unlimited document uploads'];
                btnText = 'Start Gold Trial';
                resultStyle = { bg: 'linear-gradient(135deg, #fffbf0, #fff3d6)', border: '#f5a623' };
            } else {
                plan = 'basic';
                planName = 'âš¡ Basic Package';
                price = '$799/month';
                features = ['Monthly financial reporting', 'Budget vs. actual tracking', 'Variance analysis & commentary', 'Spreadsheet modeling', 'Email support'];
                btnText = 'Start Basic Trial';
                resultStyle = { bg: 'linear-gradient(135deg, #f0f4ff, #e8f0fe)', border: '#1e3a5f' };
            }

            var resultEl = document.getElementById('quiz-result');
            resultEl.style.background = resultStyle.bg;
            resultEl.style.borderColor = resultStyle.border;
            document.getElementById('quiz-result-plan').textContent = planName;
            document.getElementById('quiz-result-price').textContent = price;
            var featList = document.getElementById('quiz-result-features');
            featList.innerHTML = features.map(function(f) { return '<li>' + f + '</li>'; }).join('');
            var ctaBtn = document.getElementById('quiz-cta-btn');
            ctaBtn.style.background = '';
            ctaBtn.textContent = btnText;
            ctaBtn.onclick = function() { closeQuizModal(); selectPlan(plan); };

            resultEl.classList.add('active');
            resultEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            // Scroll to pricing and highlight the recommended plan card
            setTimeout(function() {
                var cardId = { basic: 'basic-card', gold: 'gold-card', diamond: 'diamond-card' }[plan];
                var card = document.getElementById(cardId);
                if (card) {
                    card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    card.classList.add('highlight');
                    setTimeout(function() { card.classList.remove('highlight'); }, 3500);
                }
            }, 500);
        }

        // ===========================================
        // NDA STEP STATUS
        // ===========================================
        function updateNDAStepStatus() {
            var accepted = currentUserData?.profile?.nda_accepted_at;
            var unsigned = document.getElementById('nda-step-unsigned');
            var signed = document.getElementById('nda-step-signed');
            if (!unsigned || !signed) return;
            if (accepted) {
                unsigned.style.display = 'none';
                signed.style.display = 'block';
                var meta = document.getElementById('nda-signed-meta');
                if (meta) {
                    var company = currentUserData.profile.nda_company_name || '';
                    var d = new Date(accepted);
                    meta.textContent = (company ? company + ' Â· ' : '') + 'Signed ' + d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                }
            } else {
                unsigned.style.display = 'block';
                signed.style.display = 'none';
            }
        }

        // ===========================================
        // PLATFORM DROPDOWN
        // ===========================================
        function togglePlatformDropdown() {
            var list = document.getElementById('platform-dropdown-list');
            if (!list) return;
            list.style.display = list.style.display === 'none' ? 'block' : 'none';
        }

        function selectPlatformDrop(key) {
            // Update dropdown display with logo + name
            var names = { quickbooks: 'QuickBooks', sage: 'Sage', netsuite: 'Oracle NetSuite', xero: 'Xero', alteryx: 'Alteryx', airtable: 'Airtable', powerbi: 'Power BI', excel: 'Excel Online', other: 'Other / Custom' };
            var colors = { quickbooks: '#2CA01C', sage: '#00D639', netsuite: '#1A1A2E', xero: '#13B5EA', alteryx: '#0078C0', airtable: '#FCBF49', powerbi: '#F2C811', excel: '#217346', other: '#666' };
            var abbrs = { quickbooks: 'QB', sage: 'SAGE', netsuite: 'NS', xero: 'xero', alteryx: 'Ax', airtable: 'AT', powerbi: 'PBI', excel: 'Ex', other: '+' };
            var selectedEl = document.getElementById('platform-dropdown-selected');
            if (selectedEl) {
                selectedEl.innerHTML = '<div style="display:flex;align-items:center;gap:10px;"><div class="platform-logo-sm" style="background:' + (colors[key] || '#666') + ';width:26px;height:26px;border-radius:6px;display:inline-flex;align-items:center;justify-content:center;font-size:0.62rem;font-weight:900;color:#fff;">' + (abbrs[key] || '+') + '</div><span>' + (names[key] || key) + '</span></div>';
            }
            document.getElementById('platform-dropdown-list').style.display = 'none';
            selectPlatform(key);
        }

        // ===========================================
        // LIGHTNING BOLT PROFILE METER
        // ===========================================
        function updateLightningMeter() {
            var pct = 0;
            var tip = '';
            var ndaDone = !!(currentUserData?.profile?.nda_accepted_at);
            var dbDone = document.getElementById('connected-badges-list')?.children.length > 0;
            var filesDone = document.querySelectorAll('#user-uploads-carousel .carousel-card').length > 0
                         || document.getElementById('fin-pl-status')?.textContent.includes('âœ“')
                         || document.getElementById('fin-bs-status')?.textContent.includes('âœ“')
                         || document.getElementById('fin-cf-status')?.textContent.includes('âœ“');

            if (ndaDone) pct += 33;
            if (dbDone) pct += 34;
            if (filesDone) pct += 33;

            if (!ndaDone) tip = 'Sign your agreement to get started';
            else if (!dbDone) tip = 'Connect your accounting platform to boost your meter';
            else if (!filesDone) tip = 'Upload your financial statements to complete your profile';
            else tip = 'Profile complete â€” reach out to redeem your free month!';

            var fill = document.getElementById('lightning-bolt-fill');
            var pctEl = document.getElementById('lightning-meter-pct');
            var tipEl = document.getElementById('lightning-meter-tip');
            var spark = document.getElementById('lightning-spark');
            var reward = document.getElementById('lightning-meter-reward');
            if (fill) fill.style.height = pct + '%';
            if (pctEl) pctEl.textContent = pct + '% Complete';
            if (tipEl) tipEl.textContent = tip;
            if (spark) { spark.style.display = pct >= 100 ? 'block' : 'none'; spark.textContent = 'âš¡'; }
            if (reward) reward.style.display = pct >= 100 ? 'flex' : 'none';
        }

        function skipStep(step) {
            // Visually collapse/dim the step â€” just scroll to next
            var nextCard = { nda: 'platform-integrations', db: null, files: null };
            if (nextCard[step]) {
                document.getElementById(nextCard[step])?.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Second platform dropdown
        function showAnotherPlatformDropdown() {
            document.getElementById('platform-dropdown-2-wrap').style.display = 'block';
            document.getElementById('add-another-platform-row').querySelector('.add-platform-btn').style.display = 'none';
        }
        function togglePlatformDropdown2() {
            var list = document.getElementById('platform-dropdown-list-2');
            list.style.display = list.style.display === 'none' ? 'block' : 'none';
        }
        function selectPlatformDrop2(key) {
            var names = { quickbooks: 'QuickBooks', sage: 'Sage', netsuite: 'Oracle NetSuite', xero: 'Xero', alteryx: 'Alteryx', airtable: 'Airtable', powerbi: 'Power BI', excel: 'Excel Online', other: 'Other / Custom' };
            var colors = { quickbooks: '#2CA01C', sage: '#00D639', netsuite: '#1A1A2E', xero: '#13B5EA', alteryx: '#0078C0', airtable: '#FCBF49', powerbi: '#F2C811', excel: '#217346', other: '#666' };
            var abbrs  = { quickbooks: 'QB', sage: 'SAGE', netsuite: 'NS', xero: 'xero', alteryx: 'Ax', airtable: 'AT', powerbi: 'PBI', excel: 'Ex', other: '+' };
            var selectedEl = document.getElementById('platform-dropdown-selected-2');
            if (selectedEl) {
                selectedEl.innerHTML = '<div style="display:flex;align-items:center;gap:10px;"><div class="platform-logo-sm" style="background:' + (colors[key]||'#666') + ';width:26px;height:26px;border-radius:6px;display:inline-flex;align-items:center;justify-content:center;font-size:0.62rem;font-weight:900;color:#fff;">' + (abbrs[key]||'+') + '</div><span>' + (names[key]||key) + '</span></div>';
            }
            document.getElementById('platform-dropdown-list-2').style.display = 'none';
            selectPlatform(key);
        }

        function addConnectedBadge(platform) {
            var names = { quickbooks: 'QuickBooks', sage: 'Sage', netsuite: 'Oracle NetSuite', xero: 'Xero', alteryx: 'Alteryx', airtable: 'Airtable', powerbi: 'Power BI', excel: 'Excel Online', other: 'Other' };
            var badgesList = document.getElementById('connected-badges-list');
            var badgesWrap = document.getElementById('connected-platforms-badges');
            if (!badgesList || !badgesWrap) return;
            // Don't add duplicate
            if (document.getElementById('badge-' + platform)) return;
            var badge = document.createElement('span');
            badge.className = 'connected-platform-badge';
            badge.id = 'badge-' + platform;
            badge.textContent = 'âœ“ ' + (names[platform] || platform);
            badgesList.appendChild(badge);
            badgesWrap.style.display = 'block';
        }

        // ===========================================
        // FINANCIAL DOCUMENT UPLOADS
        // ===========================================
        async function handleFinUpload(type, input) {
            if (!input.files || input.files.length === 0) return;
            var statusId = { 'PL': 'fin-pl-status', 'Balance Sheet': 'fin-bs-status', 'Cash Flow': 'fin-cf-status' }[type] || null;
            var statusEl = statusId ? document.getElementById(statusId) : null;
            if (statusEl) statusEl.textContent = 'Uploadingâ€¦';

            var files = Array.from(input.files);
            var uploaded = 0;
            for (var i = 0; i < files.length; i++) {
                var file = files[i];
                var prefixedName = '[' + type + '] ' + file.name;
                // Reuse the existing file upload pipeline by creating a synthetic event-like object
                if (supabase && currentUserData?.id) {
                    try {
                        var path = currentUserData.id + '/' + Date.now() + '_' + prefixedName;
                        var { error: upErr } = await supabase.storage.from('client-files').upload(path, file, { upsert: true });
                        if (!upErr) {
                            var { data: urlData } = supabase.storage.from('client-files').getPublicUrl(path);
                            await supabase.from('user_files').insert([{
                                user_id: currentUserData.id,
                                file_name: prefixedName,
                                file_url: urlData?.publicUrl || '',
                                file_type: file.name.split('.').pop().toLowerCase(),
                                file_size: file.size,
                                uploaded_at: new Date().toISOString()
                            }]);
                            uploaded++;
                        }
                    } catch(e) { console.error('fin upload error', e); }
                }
            }

            input.value = '';
            if (statusEl) {
                statusEl.textContent = uploaded > 0 ? uploaded + ' file' + (uploaded > 1 ? 's' : '') + ' uploaded âœ“' : 'Upload failed â€” try again';
                if (uploaded > 0) { showToast(type + ' files uploaded successfully', 'success'); loadUserFiles(); updateLightningMeter(); }
            }
        }

        function openUpgradeModal() {
            var modal = document.getElementById('upgrade-modal');
            if (modal) { modal.classList.add('active'); document.body.style.overflow = 'hidden'; }
        }

        function closeUpgradeModal() {
            var modal = document.getElementById('upgrade-modal');
            if (modal) { modal.classList.remove('active'); document.body.style.overflow = ''; }
        }

        function openAdminDashboard() {
            if (!currentUserData?.isAdmin) {
                showToast('Access denied', 'error');
                return;
            }
            var modal = document.getElementById('admin-modal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            loadAdminUsers();
        }

        function closeAdminDashboard() {
            var modal = document.getElementById('admin-modal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        function switchAdminTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update tab panes
            document.querySelectorAll('.admin-tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            document.getElementById('admin-tab-' + tabName).classList.add('active');

            // Load data for the tab
            if (tabName === 'users') loadAdminUsers();
            if (tabName === 'reports') loadAdminReports();
            if (tabName === 'promo') loadAdminPromoCodes();
        }

        // Users Tab Functions
        async function loadAdminUsers() {
            var tbody = document.getElementById('admin-users-body');
            tbody.innerHTML = '<tr><td colspan="6" class="loading-row">Loading users...</td></tr>';

            if (!supabase) {
                tbody.innerHTML = '<tr><td colspan="6" class="loading-row">Database not available</td></tr>';
                return;
            }

            try {
                var { data, error } = await supabase
                    .from('profiles')
                    .select('*')
                    .order('created_at', { ascending: false });

                if (error) throw error;

                if (data && data.length > 0) {
                    tbody.innerHTML = data.map(user => `
                        <tr>
                            <td>${user.email || '-'}</td>
                            <td>${user.first_name || ''} ${user.last_name || ''}</td>
                            <td>${user.company || user.company_name || '-'}</td>
                            <td>
                                <select class="tier-select" onchange="updateUserTier('${user.id}', this.value)">
                                    <option value="basic" ${user.package_tier === 'basic' ? 'selected' : ''}>Basic</option>
                                    <option value="gold" ${user.package_tier === 'gold' ? 'selected' : ''}>Gold</option>
                                    <option value="diamond" ${user.package_tier === 'diamond' ? 'selected' : ''}>Diamond</option>
                                </select>
                            </td>
                            <td>${user.created_at ? new Date(user.created_at).toLocaleDateString() : '-'}</td>
                            <td>
                                <button class="btn-delete" onclick="toggleAdminStatus('${user.id}', ${!user.is_admin})">
                                    ${user.is_admin ? 'Remove Admin' : 'Make Admin'}
                                </button>
                            </td>
                        </tr>
                    `).join('');

                    // Also populate the reports user dropdown
                    var userSelect = document.getElementById('report-user-select');
                    userSelect.innerHTML = '<option value="">-- Select a user --</option>' +
                        data.map(user => `<option value="${user.id}">${user.email} (${user.first_name || 'No name'})</option>`).join('');
                } else {
                    tbody.innerHTML = '<tr><td colspan="6" class="loading-row">No users found</td></tr>';
                }
            } catch (error) {
                console.error('Error loading users:', error);
                tbody.innerHTML = '<tr><td colspan="6" class="loading-row">Error loading users</td></tr>';
            }
        }

        async function updateUserTier(userId, newTier) {
            if (!supabase) return;

            try {
                var { error } = await supabase
                    .from('profiles')
                    .update({ package_tier: newTier, updated_at: new Date().toISOString() })
                    .eq('id', userId);

                if (error) throw error;
                showToast('User tier updated to ' + newTier, 'success');
            } catch (error) {
                console.error('Error updating tier:', error);
                showToast('Error updating tier', 'error');
                loadAdminUsers(); // Refresh to show correct state
            }
        }

        async function toggleAdminStatus(userId, makeAdmin) {
            if (!supabase) return;

            if (!confirm(makeAdmin ? 'Make this user an admin?' : 'Remove admin status from this user?')) {
                return;
            }

            try {
                var { error } = await supabase
                    .from('profiles')
                    .update({ is_admin: makeAdmin, updated_at: new Date().toISOString() })
                    .eq('id', userId);

                if (error) throw error;
                showToast(makeAdmin ? 'User is now an admin' : 'Admin status removed', 'success');
                loadAdminUsers();
            } catch (error) {
                console.error('Error updating admin status:', error);
                showToast('Error updating admin status', 'error');
            }
        }

        // Reports Tab Functions
        async function loadAdminReports() {
            var tbody = document.getElementById('admin-reports-body');
            tbody.innerHTML = '<tr><td colspan="4" class="loading-row">Loading reports...</td></tr>';

            if (!supabase) {
                tbody.innerHTML = '<tr><td colspan="4" class="loading-row">Database not available</td></tr>';
                return;
            }

            try {
                var { data, error } = await supabase
                    .from('user_reports')
                    .select('*, profiles(email, first_name)')
                    .order('created_at', { ascending: false })
                    .limit(50);

                if (error) throw error;

                if (data && data.length > 0) {
                    tbody.innerHTML = data.map(report => `
                        <tr>
                            <td>${report.report_name || '-'}</td>
                            <td>${report.profiles?.email || 'Unknown'}</td>
                            <td>${report.created_at ? new Date(report.created_at).toLocaleDateString() : '-'}</td>
                            <td>
                                <button class="btn-delete" onclick="deleteReport('${report.id}')">Delete</button>
                            </td>
                        </tr>
                    `).join('');
                } else {
                    tbody.innerHTML = '<tr><td colspan="4" class="loading-row">No reports found</td></tr>';
                }
            } catch (error) {
                console.error('Error loading reports:', error);
                tbody.innerHTML = '<tr><td colspan="4" class="loading-row">Error loading reports</td></tr>';
            }
        }

        async function uploadUserReport() {
            var userId = document.getElementById('report-user-select').value;
            var reportName = document.getElementById('report-name').value.trim();
            var reportDesc = document.getElementById('report-description').value.trim();
            var fileInput = document.getElementById('report-file');
            var file = fileInput.files[0];

            if (!userId) {
                showToast('Please select a user', 'error');
                return;
            }
            if (!reportName) {
                showToast('Please enter a report name', 'error');
                return;
            }
            if (!file) {
                showToast('Please select a file', 'error');
                return;
            }
            if (!supabase) {
                showToast('Database not available', 'error');
                return;
            }

            try {
                showToast('Uploading report...', 'info');

                // Upload file to storage
                var filePath = `reports/${userId}/${Date.now()}_${file.name}`;
                var { data: uploadData, error: uploadError } = await supabase.storage
                    .from('user-documents')
                    .upload(filePath, file);

                if (uploadError) throw uploadError;

                // Get public URL
                var { data: urlData } = supabase.storage
                    .from('user-documents')
                    .getPublicUrl(filePath);

                // Insert report record
                var { error: insertError } = await supabase
                    .from('user_reports')
                    .insert([{
                        user_id: userId,
                        report_name: reportName,
                        report_description: reportDesc,
                        file_path: filePath,
                        file_url: urlData?.publicUrl || null,
                        file_size: file.size
                    }]);

                if (insertError) throw insertError;

                showToast('Report uploaded successfully!', 'success');

                // Clear form
                document.getElementById('report-user-select').value = '';
                document.getElementById('report-name').value = '';
                document.getElementById('report-description').value = '';
                fileInput.value = '';

                loadAdminReports();
            } catch (error) {
                console.error('Error uploading report:', error);
                showToast('Error uploading report: ' + error.message, 'error');
            }
        }

        async function deleteReport(reportId) {
            if (!confirm('Are you sure you want to delete this report?')) return;
            if (!supabase) return;

            try {
                var { error } = await supabase
                    .from('user_reports')
                    .delete()
                    .eq('id', reportId);

                if (error) throw error;
                showToast('Report deleted', 'success');
                loadAdminReports();
            } catch (error) {
                console.error('Error deleting report:', error);
                showToast('Error deleting report', 'error');
            }
        }

        // Admin Platform Credentials View
        async function loadAdminPlatformCredentials() {
            if (!supabase) return;
            var tbody = document.getElementById('admin-qb-body');
            tbody.innerHTML = '<tr><td colspan="7" class="loading-row">Loading...</td></tr>';

            // Also populate the Fathom user select
            var fathomSelect = document.getElementById('fathom-user-select');

            try {
                var { data, error } = await supabase
                    .from('platform_credentials')
                    .select('*, profiles:user_id(email, full_name)')
                    .order('updated_at', { ascending: false });

                if (error) throw error;

                if (!data || data.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="7" class="loading-row">No credentials shared yet.</td></tr>';
                    return;
                }

                tbody.innerHTML = '';
                var seenUsers = {};
                data.forEach(function(cred) {
                    var userName = cred.profiles?.full_name || cred.profiles?.email || 'Unknown';
                    var userEmail = cred.profiles?.email || '';

                    // Build user dropdown for dashboard links
                    if (!seenUsers[cred.user_id] && fathomSelect) {
                        seenUsers[cred.user_id] = true;
                        var opt = document.createElement('option');
                        opt.value = cred.user_id;
                        opt.textContent = userName + (userEmail ? ' (' + userEmail + ')' : '');
                        fathomSelect.appendChild(opt);
                    }

                    var tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${userName}</td>
                        <td><strong>${cred.platform_name || cred.platform}</strong></td>
                        <td style="font-size:0.85rem;">${cred.access_type === 'separate' ? 'Advisor Login' : 'Shared Login'}</td>
                        <td><a href="${cred.login_url || '#'}" target="_blank" style="color: var(--mckinsey-blue);">${cred.login_url ? 'Open' : 'N/A'}</a></td>
                        <td>${cred.username || 'N/A'}</td>
                        <td>
                            <span class="admin-pw-hidden" id="pw-${cred.id}">â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢</span>
                            <button onclick="toggleAdminPW('${cred.id}', '${btoa(cred.password || '')}')" style="background:var(--mckinsey-blue);color:#fff;border:none;padding:3px 10px;border-radius:4px;cursor:pointer;font-size:0.8rem;margin-left:5px;">Show</button>
                        </td>
                        <td style="font-size:0.85rem;">${cred.notes || '-'}</td>
                    `;
                    tbody.appendChild(tr);
                });
            } catch (err) {
                console.error('Error loading platform credentials:', err);
                tbody.innerHTML = '<tr><td colspan="7" class="loading-row">Error loading credentials.</td></tr>';
            }
        }

        function toggleAdminPW(id, encoded) {
            var el = document.getElementById('pw-' + id);
            if (el.textContent === 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢') {
                el.textContent = atob(encoded);
            } else {
                el.textContent = 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢';
            }
        }

        // Dashboard Link Management (Fathom etc.)
        async function saveDashboardLink() {
            if (!supabase) return;
            var userId = document.getElementById('fathom-user-select').value;
            var url = document.getElementById('fathom-url').value.trim();

            if (!userId || !url) {
                showToast('Select a user and enter a dashboard URL.', 'error');
                return;
            }

            try {
                var { data: existing } = await supabase
                    .from('dashboard_links')
                    .select('id')
                    .eq('user_id', userId)
                    .single();

                if (existing?.id) {
                    var { error } = await supabase
                        .from('dashboard_links')
                        .update({ dashboard_url: url, updated_at: new Date().toISOString() })
                        .eq('id', existing.id);
                    if (error) throw error;
                } else {
                    var { error } = await supabase
                        .from('dashboard_links')
                        .insert([{ user_id: userId, dashboard_url: url, created_at: new Date().toISOString(), updated_at: new Date().toISOString() }]);
                    if (error) throw error;
                }

                showToast('Dashboard link saved for user.', 'success');
                document.getElementById('fathom-url').value = '';
            } catch (err) {
                console.error('Error saving dashboard link:', err);
                showToast('Error saving link.', 'error');
            }
        }

        // Load dashboard link for current user (called on login)
        async function loadDashboardLink() {
            if (!supabase || !currentUserData?.id) return;

            try {
                var { data } = await supabase
                    .from('dashboard_links')
                    .select('dashboard_url')
                    .eq('user_id', currentUserData.id)
                    .single();

                if (data?.dashboard_url) {
                    var card = document.getElementById('fathom-link-card');
                    var link = document.getElementById('fathom-link-url');
                    if (card && link) {
                        link.href = data.dashboard_url;
                        card.style.display = 'block';
                    }
                }
            } catch (err) {
                // No dashboard link set for this user
            }
        }

        // Promo Codes Tab Functions
        async function loadAdminPromoCodes() {
            var tbody = document.getElementById('admin-promo-body');
            tbody.innerHTML = '<tr><td colspan="5" class="loading-row">Loading promo codes...</td></tr>';

            if (!supabase) {
                tbody.innerHTML = '<tr><td colspan="5" class="loading-row">Database not available</td></tr>';
                return;
            }

            try {
                var { data, error } = await supabase
                    .from('promo_codes')
                    .select('*')
                    .order('created_at', { ascending: false });

                if (error) {
                    // Table might not exist yet
                    tbody.innerHTML = '<tr><td colspan="5" class="loading-row">Promo codes table not set up yet. Run the SQL migration.</td></tr>';
                    return;
                }

                if (data && data.length > 0) {
                    tbody.innerHTML = data.map(promo => `
                        <tr>
                            <td><strong>${promo.code}</strong></td>
                            <td>${promo.discount_percent}%</td>
                            <td>${promo.expiry_date ? new Date(promo.expiry_date).toLocaleDateString() : 'Never'}</td>
                            <td>${promo.current_uses || 0}${promo.max_uses ? '/' + promo.max_uses : ''}</td>
                            <td>
                                <button class="btn-delete" onclick="deletePromoCode('${promo.id}')">Delete</button>
                            </td>
                        </tr>
                    `).join('');
                } else {
                    tbody.innerHTML = '<tr><td colspan="5" class="loading-row">No promo codes found</td></tr>';
                }
            } catch (error) {
                console.error('Error loading promo codes:', error);
                tbody.innerHTML = '<tr><td colspan="5" class="loading-row">Error loading promo codes</td></tr>';
            }
        }

        async function createPromoCode() {
            var code = document.getElementById('promo-code').value.trim().toUpperCase();
            var discount = parseInt(document.getElementById('promo-discount').value);
            var expiry = document.getElementById('promo-expiry').value;
            var maxUses = document.getElementById('promo-max-uses').value;

            if (!code) {
                showToast('Please enter a promo code', 'error');
                return;
            }
            if (!discount || discount < 1 || discount > 100) {
                showToast('Please enter a valid discount (1-100%)', 'error');
                return;
            }
            if (!supabase) {
                showToast('Database not available', 'error');
                return;
            }

            try {
                var { error } = await supabase
                    .from('promo_codes')
                    .insert([{
                        code: code,
                        discount_percent: discount,
                        expiry_date: expiry || null,
                        max_uses: maxUses ? parseInt(maxUses) : null,
                        is_active: true
                    }]);

                if (error) {
                    if (error.code === '23505') {
                        showToast('This promo code already exists', 'error');
                    } else {
                        throw error;
                    }
                    return;
                }

                showToast('Promo code created!', 'success');

                // Clear form
                document.getElementById('promo-code').value = '';
                document.getElementById('promo-discount').value = '';
                document.getElementById('promo-expiry').value = '';
                document.getElementById('promo-max-uses').value = '';

                loadAdminPromoCodes();
            } catch (error) {
                console.error('Error creating promo code:', error);
                showToast('Error creating promo code: ' + error.message, 'error');
            }
        }

        async function deletePromoCode(promoId) {
            if (!confirm('Are you sure you want to delete this promo code?')) return;
            if (!supabase) return;

            try {
                var { error } = await supabase
                    .from('promo_codes')
                    .delete()
                    .eq('id', promoId);

                if (error) throw error;
                showToast('Promo code deleted', 'success');
                loadAdminPromoCodes();
            } catch (error) {
                console.error('Error deleting promo code:', error);
                showToast('Error deleting promo code', 'error');
            }
        }

        // Close admin modal on backdrop click
        document.addEventListener('DOMContentLoaded', function() {
            var adminModal = document.getElementById('admin-modal');
            if (adminModal) {
                adminModal.addEventListener('click', function(e) {
                    if (e.target === adminModal) {
                        closeAdminDashboard();
                    }
                });
            }
        });

        // ===========================================
        // TOAST
        // ===========================================
        function showToast(msg, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = 'toast ' + type + ' show';
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // ===========================================
        // PACKAGE CARD HIGHLIGHT
        // ===========================================
        function highlightPackageCard(cardId) {
            console.log('highlightPackageCard called with:', cardId);
            var card = document.getElementById(cardId);
            if (!card) {
                console.log('Card not found:', cardId);
                return;
            }
            console.log('Found card, applying highlight class');

            // Remove highlight from all cards first
            var allCards = document.querySelectorAll('.package-card');
            for (var i = 0; i < allCards.length; i++) {
                allCards[i].classList.remove('highlight');
            }

            // Scroll to the card
            card.scrollIntoView({ behavior: 'smooth', block: 'center' });

            // Apply highlight class (uses CSS with !important)
            card.classList.add('highlight');

            // Remove highlight after 8 seconds
            setTimeout(function() {
                card.classList.remove('highlight');
            }, 8000);
        }

        // ===========================================
        // INIT
        // ===========================================
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Supabase and show status
            const sbReady = initSupabase();
            console.log('DOMContentLoaded - Supabase ready:', sbReady);
            if (!sbReady) {
                console.error('SUPABASE NOT LOADED! Check if script is blocked by browser/firewall');
            }
            initFileUpload();

            // Add click AND touch support for hamburger menu
            const mobileToggle = document.getElementById('hamburger-btn');
            if (mobileToggle) {
                mobileToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleMobileMenu(e);
                });
                mobileToggle.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleMobileMenu(e);
                }, { passive: false });
            }

            // Add touch support for lightbox (portfolio items)
            document.querySelectorAll('.portfolio-item').forEach(item => {
                item.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    const img = this.querySelector('img');
                    if (img) openLightbox(e, img.src);
                }, { passive: false });
            });

            // Add touch support for lightbox close
            const lightbox = document.getElementById('lightbox');
            if (lightbox) {
                lightbox.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    closeLightbox();
                }, { passive: false });
            }

            // Add touch support for "Start Free Trial" buttons in package cards
            document.querySelectorAll('.package-card .btn-primary').forEach(btn => {
                btn.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    // Trigger click to call selectPlan
                    this.click();
                }, { passive: false });
            });

            // Add click/touch support for portal tabs
            const portalTabs = document.querySelectorAll('.portal-tab');
            portalTabs.forEach((tab, index) => {
                tab.addEventListener('click', function(e) {
                    e.preventDefault();
                    switchTab(index === 0 ? 'login' : 'register');
                });
                tab.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    switchTab(index === 0 ? 'login' : 'register');
                }, { passive: false });
            });
        });

        // Close lightbox on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeLightbox();
        });

        // ===========================================
        // WORK PRODUCT MODAL
        // ===========================================
        function openWorkModal(imageSrc) {
            var modal = document.getElementById('work-modal');
            var modalImg = document.getElementById('work-modal-img');
            modalImg.src = imageSrc;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeWorkModal() {
            var modal = document.getElementById('work-modal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close modal on click outside image
        document.addEventListener('DOMContentLoaded', function() {
            var modal = document.getElementById('work-modal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeWorkModal();
                    }
                });
            }
        });

        // Close modal on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeWorkModal();
        });

        // ===========================================
        // DRAG TO SCROLL CAROUSEL
        // ===========================================
        document.addEventListener('DOMContentLoaded', function() {
            const carousel = document.getElementById('work-carousel-container');
            if (!carousel) return;

            let isDown = false;
            let startX;
            let scrollLeft;

            carousel.addEventListener('mousedown', (e) => {
                isDown = true;
                carousel.style.cursor = 'grabbing';
                startX = e.pageX - carousel.offsetLeft;
                scrollLeft = carousel.scrollLeft;
            });

            carousel.addEventListener('mouseleave', () => {
                isDown = false;
                carousel.style.cursor = 'grab';
            });

            carousel.addEventListener('mouseup', () => {
                isDown = false;
                carousel.style.cursor = 'grab';
            });

            carousel.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - carousel.offsetLeft;
                const walk = (x - startX) * 2;
                carousel.scrollLeft = scrollLeft - walk;
            });

            // Set initial cursor
            carousel.style.cursor = 'grab';
        });

        // ===========================================
        // DRAG TO SCROLL - PORTAL REPORTS CAROUSEL
        // ===========================================
        document.addEventListener('DOMContentLoaded', function() {
            const reportsCarousel = document.getElementById('reports-carousel-container');
            if (!reportsCarousel) return;

            let isDown = false;
            let startX;
            let scrollLeft;

            reportsCarousel.addEventListener('mousedown', (e) => {
                isDown = true;
                reportsCarousel.style.cursor = 'grabbing';
                startX = e.pageX - reportsCarousel.offsetLeft;
                scrollLeft = reportsCarousel.scrollLeft;
            });

            reportsCarousel.addEventListener('mouseleave', () => {
                isDown = false;
                reportsCarousel.style.cursor = 'grab';
            });

            reportsCarousel.addEventListener('mouseup', () => {
                isDown = false;
                reportsCarousel.style.cursor = 'grab';
            });

            reportsCarousel.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - reportsCarousel.offsetLeft;
                const walk = (x - startX) * 2;
                reportsCarousel.scrollLeft = scrollLeft - walk;
            });

            reportsCarousel.style.cursor = 'grab';
        });
    </script>

    <!-- Work Product Modal -->
    <div id="work-modal" class="work-modal" onclick="closeWorkModal()">
        <span class="work-modal-close" onclick="closeWorkModal()">&times;</span>
        <img id="work-modal-img" src="" alt="Work Product">
    </div>
</body>
</html>
