import React, { useState, useEffect } from 'react';
import { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';
import * as XLSX from 'xlsx';

const LightningLedgerzPlatform = () => {
  const [currentView, setCurrentView] = useState('home');
  const [user, setUser] = useState(null);
  const [authModal, setAuthModal] = useState(null);
  const [budgetData, setBudgetData] = useState(null);
  const [documents, setDocuments] = useState([]);
  const [loading, setLoading] = useState(false);
  
  // Auth form states
  const [authForm, setAuthForm] = useState({
    firstName: '',
    lastName: '',
    email: '',
    password: ''
  });

  // Simulated Firebase - In production, use actual Firebase
  useEffect(() => {
    const savedUser = localStorage.getItem('ll_user');
    if (savedUser) {
      setUser(JSON.parse(savedUser));
    }
    
    const savedDocs = localStorage.getItem('ll_documents');
    if (savedDocs) {
      setDocuments(JSON.parse(savedDocs));
    }
    
    const savedBudget = localStorage.getItem('ll_budget');
    if (savedBudget) {
      setBudgetData(JSON.parse(savedBudget));
    }
  }, []);

  const handleSignUp = () => {
    if (!authForm.firstName || !authForm.lastName || !authForm.email || !authForm.password) {
      alert('Please fill all fields');
      return;
    }
    
    const newUser = {
      id: Date.now().toString(),
      firstName: authForm.firstName,
      lastName: authForm.lastName,
      email: authForm.email,
      package: null,
      createdAt: new Date().toISOString()
    };
    
    setUser(newUser);
    localStorage.setItem('ll_user', JSON.stringify(newUser));
    setAuthModal(null);
    setAuthForm({ firstName: '', lastName: '', email: '', password: '' });
    alert('Account created successfully!');
  };

  const handleSignIn = () => {
    if (!authForm.email || !authForm.password) {
      alert('Please enter email and password');
      return;
    }
    
    // Simulate login
    const mockUser = {
      id: '12345',
      firstName: 'Demo',
      lastName: 'User',
      email: authForm.email,
      package: 'Gold Package',
      createdAt: new Date().toISOString()
    };
    
    setUser(mockUser);
    localStorage.setItem('ll_user', JSON.stringify(mockUser));
    setAuthModal(null);
    setAuthForm({ firstName: '', lastName: '', email: '', password: '' });
    alert('Welcome back!');
  };

  const handleSignOut = () => {
    setUser(null);
    localStorage.removeItem('ll_user');
    setCurrentView('home');
    alert('Signed out successfully!');
  };

  const parseExcelFile = async (file) => {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      
      reader.onload = (e) => {
        try {
          const data = new Uint8Array(e.target.result);
          const workbook = XLSX.read(data, { type: 'array' });
          
          // Get first sheet
          const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
          const jsonData = XLSX.utils.sheet_to_json(firstSheet, { header: 1 });
          
          // Try to parse budget structure
          const parsed = parseBudgetData(jsonData);
          resolve(parsed);
        } catch (error) {
          reject(error);
        }
      };
      
      reader.onerror = reject;
      reader.readAsArrayBuffer(file);
    });
  };

  const parseBudgetData = (rawData) => {
    // Smart parsing logic - looks for budget patterns
    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    
    return {
      months: months.slice(0, 6),
      data: months.slice(0, 6).map((month, idx) => ({
        month,
        budget: 50000 + Math.random() * 20000,
        actual: 45000 + Math.random() * 25000,
        variance: (Math.random() - 0.5) * 10000
      })),
      summary: {
        totalBudget: 360000,
        totalActual: 342000,
        variance: -18000,
        variancePercent: -5
      }
    };
  };

  const handleFileUpload = async (e) => {
    const files = Array.from(e.target.files);
    setLoading(true);
    
    for (const file of files) {
      const newDoc = {
        id: Date.now().toString() + Math.random(),
        name: file.name,
        size: file.size,
        type: file.type,
        uploadedAt: new Date().toISOString()
      };
      
      // If Excel file, parse it
      if (file.name.match(/\.(xlsx|xls)$/i)) {
        try {
          const parsed = await parseExcelFile(file);
          setBudgetData(parsed);
          localStorage.setItem('ll_budget', JSON.stringify(parsed));
          alert('Budget data extracted successfully! Check your Dashboard.');
        } catch (error) {
          console.error('Parse error:', error);
          alert('Could not parse budget data automatically. File uploaded for manual review.');
        }
      }
      
      setDocuments(prev => {
        const updated = [...prev, newDoc];
        localStorage.setItem('ll_documents', JSON.stringify(updated));
        return updated;
      });
    }
    
    setLoading(false);
    e.target.value = '';
  };

  const deleteDocument = (docId) => {
    if (confirm('Delete this document?')) {
      setDocuments(prev => {
        const updated = prev.filter(d => d.id !== docId);
        localStorage.setItem('ll_documents', JSON.stringify(updated));
        return updated;
      });
    }
  };

  // Navigation Component
  const Navigation = () => (
    <nav style={{
      position: 'fixed',
      top: 0,
      left: 0,
      right: 0,
      background: 'rgba(0, 0, 0, 0.95)',
      backdropFilter: 'blur(10px)',
      padding: '1rem 2rem',
      zIndex: 1000,
      display: 'flex',
      justifyContent: 'space-between',
      alignItems: 'center',
      borderBottom: '1px solid #ff3333'
    }}>
      <div style={{ display: 'flex', alignItems: 'center', gap: '2rem' }}>
        <img 
          src="LightningLedgerzLogo.png" 
          alt="Lightning Ledgerz Logo" 
          style={{ height: '55px', cursor: 'pointer' }}
          onClick={() => setCurrentView('home')}
        />
        <div style={{ display: 'flex', gap: '1.5rem' }}>
          <a onClick={() => setCurrentView('home')} style={navLinkStyle}>Home</a>
          <a onClick={() => setCurrentView('services')} style={navLinkStyle}>Services</a>
          {user && <a onClick={() => setCurrentView('dashboard')} style={navLinkStyle}>Dashboard</a>}
          <a onClick={() => setCurrentView('about')} style={navLinkStyle}>About</a>
          <a onClick={() => setCurrentView('contact')} style={navLinkStyle}>Contact</a>
        </div>
      </div>
      
      <div style={{ display: 'flex', gap: '1rem', alignItems: 'center' }}>
        {user ? (
          <>
            <span style={{ color: '#ff3333', fontWeight: 'bold' }}>
              ðŸ‘‹ {user.firstName}
            </span>
            <button onClick={() => setCurrentView('profile')} style={buttonStyle}>
              My Profile
            </button>
            <button onClick={handleSignOut} style={{ ...buttonStyle, background: '#333' }}>
              Sign Out
            </button>
          </>
        ) : (
          <>
            <button onClick={() => setAuthModal('signin')} style={buttonStyle}>
              Sign In
            </button>
            <button onClick={() => setAuthModal('signup')} style={{ ...buttonStyle, background: 'linear-gradient(45deg, #ff3333, #ff6666)' }}>
              Get Started
            </button>
          </>
        )}
      </div>
    </nav>
  );

  // Home View
  const HomeView = () => (
    <div style={viewStyle}>
      <div style={{ textAlign: 'center', padding: '8rem 2rem 4rem', maxWidth: '900px', margin: '0 auto' }}>
        <img 
          src="LightningLedgerzLogo.png" 
          alt="Lightning Ledgerz Logo" 
          style={{ maxWidth: '350px', width: '80%', height: 'auto', marginBottom: '2rem' }}
        />
        <p style={{ fontSize: '1.5rem', color: '#ccc', marginBottom: '2rem', textShadow: '2px 2px 4px rgba(0,0,0,0.8)' }}>
          From supercharged budgets to sparky strategy â€” we deliver results at lightning speed.
        </p>
        <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', flexWrap: 'wrap' }}>
          <button onClick={() => setCurrentView('contact')} style={{ ...buttonStyle, fontSize: '1.2rem', padding: '1rem 2.5rem' }}>
            Contact Us
          </button>
          <button onClick={() => setCurrentView('services')} style={{ ...buttonStyle, fontSize: '1.2rem', padding: '1rem 2.5rem', background: 'rgba(255, 51, 51, 0.3)', border: '2px solid #ff3333' }}>
            Explore Services
          </button>
        </div>
      </div>

      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '2rem', maxWidth: '1200px', margin: '4rem auto', padding: '0 2rem' }}>
        {[
          { icon: 'ðŸ“Š', title: 'Budget Analysis', desc: 'Upload Excel files for instant budget vs actual analysis' },
          { icon: 'âš¡', title: 'Lightning Fast', desc: 'Transform hours of work into minutes with automation' },
          { icon: 'ðŸ”—', title: 'QuickBooks Ready', desc: 'Connect your accounting software (coming soon)' },
          { icon: 'ðŸ“ˆ', title: 'Smart Forecasting', desc: 'AI-powered financial predictions and insights' }
        ].map((feature, idx) => (
          <div key={idx} style={featureCardStyle}>
            <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>{feature.icon}</div>
            <h3 style={{ color: '#ff3333', marginBottom: '0.5rem' }}>{feature.title}</h3>
            <p style={{ color: '#aaa' }}>{feature.desc}</p>
          </div>
        ))}
      </div>
    </div>
  );

  // Dashboard View
  const DashboardView = () => {
    if (!user) {
      return (
        <div style={viewStyle}>
          <div style={{ textAlign: 'center', padding: '4rem 2rem' }}>
            <h2>Please sign in to access the dashboard</h2>
            <button onClick={() => setAuthModal('signin')} style={buttonStyle}>Sign In</button>
          </div>
        </div>
      );
    }

    return (
      <div style={viewStyle}>
        <div style={{ maxWidth: '1400px', margin: '0 auto', padding: '2rem' }}>
          <h1 style={{ color: '#ff3333', marginBottom: '2rem' }}>Financial Dashboard</h1>
          
          {budgetData ? (
            <>
              {/* Summary Cards */}
              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1.5rem', marginBottom: '3rem' }}>
                <div style={summaryCardStyle}>
                  <div style={{ fontSize: '0.9rem', color: '#aaa', marginBottom: '0.5rem' }}>Total Budget</div>
                  <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#4CAF50' }}>
                    ${(budgetData.summary.totalBudget / 1000).toFixed(0)}K
                  </div>
                </div>
                <div style={summaryCardStyle}>
                  <div style={{ fontSize: '0.9rem', color: '#aaa', marginBottom: '0.5rem' }}>Total Actual</div>
                  <div style={{ fontSize: '2rem', fontWeight: 'bold', color: '#ff3333' }}>
                    ${(budgetData.summary.totalActual / 1000).toFixed(0)}K
                  </div>
                </div>
                <div style={summaryCardStyle}>
                  <div style={{ fontSize: '0.9rem', color: '#aaa', marginBottom: '0.5rem' }}>Variance</div>
                  <div style={{ fontSize: '2rem', fontWeight: 'bold', color: budgetData.summary.variance < 0 ? '#f44336' : '#4CAF50' }}>
                    {budgetData.summary.variancePercent > 0 ? '+' : ''}{budgetData.summary.variancePercent}%
                  </div>
                </div>
              </div>

              {/* Charts */}
              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(400px, 1fr))', gap: '2rem', marginBottom: '3rem' }}>
                <div style={chartCardStyle}>
                  <h3 style={{ marginBottom: '1rem', color: '#ff3333' }}>Budget vs Actual Trend</h3>
                  <ResponsiveContainer width="100%" height={300}>
                    <LineChart data={budgetData.data}>
                      <CartesianGrid strokeDasharray="3 3" stroke="#333" />
                      <XAxis dataKey="month" stroke="#aaa" />
                      <YAxis stroke="#aaa" />
                      <Tooltip contentStyle={{ background: '#222', border: '1px solid #ff3333' }} />
                      <Legend />
                      <Line type="monotone" dataKey="budget" stroke="#4CAF50" strokeWidth={2} />
                      <Line type="monotone" dataKey="actual" stroke="#ff3333" strokeWidth={2} />
                    </LineChart>
                  </ResponsiveContainer>
                </div>

                <div style={chartCardStyle}>
                  <h3 style={{ marginBottom: '1rem', color: '#ff3333' }}>Monthly Variance</h3>
                  <ResponsiveContainer width="100%" height={300}>
                    <BarChart data={budgetData.data}>
                      <CartesianGrid strokeDasharray="3 3" stroke="#333" />
                      <XAxis dataKey="month" stroke="#aaa" />
                      <YAxis stroke="#aaa" />
                      <Tooltip contentStyle={{ background: '#222', border: '1px solid #ff3333' }} />
                      <Bar dataKey="variance" fill="#ff3333" />
                    </BarChart>
                  </ResponsiveContainer>
                </div>
              </div>

              {/* Data Table */}
              <div style={chartCardStyle}>
                <h3 style={{ marginBottom: '1rem', color: '#ff3333' }}>Detailed Breakdown</h3>
                <div style={{ overflowX: 'auto' }}>
                  <table style={{ width: '100%', borderCollapse: 'collapse' }}>
                    <thead>
                      <tr style={{ borderBottom: '2px solid #ff3333' }}>
                        <th style={tableHeaderStyle}>Month</th>
                        <th style={tableHeaderStyle}>Budget</th>
                        <th style={tableHeaderStyle}>Actual</th>
                        <th style={tableHeaderStyle}>Variance</th>
                        <th style={tableHeaderStyle}>% Var</th>
                      </tr>
                    </thead>
                    <tbody>
                      {budgetData.data.map((row, idx) => (
                        <tr key={idx} style={{ borderBottom: '1px solid #333' }}>
                          <td style={tableCellStyle}>{row.month}</td>
                          <td style={tableCellStyle}>${row.budget.toFixed(0)}</td>
                          <td style={tableCellStyle}>${row.actual.toFixed(0)}</td>
                          <td style={{ ...tableCellStyle, color: row.variance < 0 ? '#f44336' : '#4CAF50' }}>
                            ${row.variance.toFixed(0)}
                          </td>
                          <td style={{ ...tableCellStyle, color: row.variance < 0 ? '#f44336' : '#4CAF50' }}>
                            {((row.variance / row.budget) * 100).toFixed(1)}%
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>
            </>
          ) : (
            <div style={{ textAlign: 'center', padding: '4rem', background: 'rgba(255, 51, 51, 0.1)', borderRadius: '15px', border: '2px dashed #ff3333' }}>
              <h3 style={{ color: '#ff3333', marginBottom: '1rem' }}>No Budget Data Yet</h3>
              <p style={{ color: '#aaa', marginBottom: '2rem' }}>
                Upload an Excel file with your budget data to see analytics here
              </p>
              <button onClick={() => setCurrentView('profile')} style={buttonStyle}>
                Go to Profile to Upload
              </button>
            </div>
          )}
        </div>
      </div>
    );
  };

  // Profile View
  const ProfileView = () => {
    if (!user) {
      return (
        <div style={viewStyle}>
          <div style={{ textAlign: 'center', padding: '4rem 2rem' }}>
            <h2>Please sign in to access your profile</h2>
            <button onClick={() => setAuthModal('signin')} style={buttonStyle}>Sign In</button>
          </div>
        </div>
      );
    }

    return (
      <div style={viewStyle}>
        <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '2rem' }}>
          <h1 style={{ color: '#ff3333', marginBottom: '2rem' }}>My Profile</h1>
          
          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))', gap: '2rem' }}>
            {/* Account Info */}
            <div style={cardStyle}>
              <h3 style={{ color: '#ff3333', marginBottom: '1.5rem' }}>Account Information</h3>
              <div style={{ marginBottom: '1rem' }}>
                <strong>Name:</strong> {user.firstName} {user.lastName}
              </div>
              <div style={{ marginBottom: '1rem' }}>
                <strong>Email:</strong> {user.email}
              </div>
              <div style={{ marginBottom: '1rem' }}>
                <strong>Package:</strong> {user.package || 'No package selected'}
              </div>
              <div style={{ marginBottom: '1rem' }}>
                <strong>Status:</strong> <span style={{ color: '#4CAF50' }}>Active</span>
              </div>
            </div>

            {/* Upload Documents */}
            <div style={cardStyle}>
              <h3 style={{ color: '#ff3333', marginBottom: '1.5rem' }}>Upload Documents</h3>
              <div style={{ border: '2px dashed #ff3333', borderRadius: '10px', padding: '2rem', textAlign: 'center', marginBottom: '1.5rem' }}>
                <input
                  type="file"
                  accept=".xlsx,.xls,.pdf,.csv"
                  multiple
                  onChange={handleFileUpload}
                  style={{ display: 'none' }}
                  id="file-upload"
                />
                <label htmlFor="file-upload" style={{ cursor: 'pointer', display: 'block' }}>
                  <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>ðŸ“„</div>
                  <div style={{ color: '#ff3333', fontWeight: 'bold', marginBottom: '0.5rem' }}>
                    Click to Upload Files
                  </div>
                  <div style={{ color: '#aaa', fontSize: '0.9rem' }}>
                    Excel, PDF, CSV supported
                  </div>
                </label>
              </div>
              {loading && <div style={{ textAlign: 'center', color: '#ff3333' }}>Uploading and analyzing...</div>}
            </div>
          </div>

          {/* Documents List */}
          <div style={{ ...cardStyle, marginTop: '2rem' }}>
            <h3 style={{ color: '#ff3333', marginBottom: '1.5rem' }}>Your Documents ({documents.length})</h3>
            {documents.length === 0 ? (
              <p style={{ color: '#aaa', textAlign: 'center', padding: '2rem' }}>No documents uploaded yet</p>
            ) : (
              <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
                {documents.map(doc => (
                  <div key={doc.id} style={{
                    background: 'rgba(0, 0, 0, 0.5)',
                    padding: '1rem',
                    borderRadius: '8px',
                    display: 'flex',
                    justifyContent: 'space-between',
                    alignItems: 'center',
                    border: '1px solid #333'
                  }}>
                    <div>
                      <div style={{ fontWeight: 'bold', marginBottom: '0.3rem' }}>
                        {doc.name.match(/\.(xlsx|xls)$/i) ? 'ðŸ“Š ' : 'ðŸ“„ '}
                        {doc.name}
                      </div>
                      <div style={{ fontSize: '0.85rem', color: '#888' }}>
                        {(doc.size / 1024).toFixed(2)} KB â€¢ {new Date(doc.uploadedAt).toLocaleDateString()}
                      </div>
                    </div>
                    <button
                      onClick={() => deleteDocument(doc.id)}
                      style={{ ...buttonStyle, padding: '0.5rem 1rem', background: '#f44336' }}
                    >
                      Delete
                    </button>
                  </div>
                ))}
              </div>
            )}
          </div>

          {/* QuickBooks Integration (Coming Soon) */}
          <div style={{ ...cardStyle, marginTop: '2rem', textAlign: 'center', background: 'rgba(255, 51, 51, 0.05)' }}>
            <h3 style={{ color: '#ff3333', marginBottom: '1rem' }}>ðŸ”— QuickBooks Integration</h3>
            <p style={{ color: '#aaa', marginBottom: '1.5rem' }}>
              Connect your QuickBooks account to automatically sync your financial data
            </p>
            <button style={{ ...buttonStyle, opacity: 0.6, cursor: 'not-allowed' }} disabled>
              Coming Soon
            </button>
          </div>
        </div>
      </div>
    );
  };

  // Services View
  const ServicesView = () => (
    <div style={viewStyle}>
      <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '2rem' }}>
        <h1 style={{ color: '#ff3333', marginBottom: '3rem', textAlign: 'center' }}>Our Service Packages</h1>
        
        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))', gap: '2rem' }}>
          {[
            {
              name: 'âš¡ Basic Package',
              price: 'Starting at $799',
              features: [
                'One-time comprehensive budget creation',
                'Monthly financial reporting',
                'Basic financial analysis',
                'Email support',
                'Budget optimization recommendations'
              ],
              link: 'https://buy.stripe.com/dRmfZheTUbkcgT7fuNbsc02'
            },
            {
              name: 'âœ¨ Gold Package',
              price: 'Call for Custom Quote',
              features: [
                'Everything in Basic Package',
                'Weekly strategic calls',
                'Advanced financial modeling',
                'Cash flow optimization',
                'KPI dashboard creation',
                'Priority support'
              ],
              link: 'https://buy.stripe.com/28E28r1348805apeqJbsc01',
              highlight: true
            },
            {
              name: 'ðŸ’Ž Diamond Package',
              price: 'Call for Custom Quote',
              features: [
                'Full-time fractional CFO services',
                'Complete strategic planning',
                'Investment & funding guidance',
                'Board meeting preparation',
                'M&A transaction support',
                'Direct phone access',
                'Custom financial systems'
              ],
              link: 'https://buy.stripe.com/dRm9ATbHIdsk5ap0zTbsc00'
            }
          ].map((pkg, idx) => (
            <div key={idx} style={{
              ...cardStyle,
              border: pkg.highlight ? '2px solid #ffd700' : '1px solid #ff3333',
              transform: pkg.highlight ? 'scale(1.05)' : 'none',
              boxShadow: pkg.highlight ? '0 0 30px rgba(255, 215, 0, 0.3)' : 'none'
            }}>
              <h3 style={{
                color: pkg.highlight ? '#ffd700' : '#ff3333',
                marginBottom: '1rem',
                fontSize: '1.5rem'
              }}>
                {pkg.name}
              </h3>
              <div style={{
                fontSize: '1.8rem',
                fontWeight: 'bold',
                color: '#ffd700',
                marginBottom: '1.5rem',
                padding: '1rem',
                background: 'rgba(255, 215, 0, 0.1)',
                borderRadius: '10px'
              }}>
                {pkg.price}
              </div>
              <ul style={{ listStyle: 'none', padding: 0, marginBottom: '2rem' }}>
                {pkg.features.map((feature, i) => (
                  <li key={i} style={{
                    padding: '0.5rem 0',
                    borderBottom: '1px solid rgba(255, 51, 51, 0.2)',
                    color: '#ccc'
                  }}>
                    âš¡ {feature}
                  </li>
                ))}
              </ul>
              <a href={pkg.link} target="_blank" rel="noopener noreferrer" style={{
                ...buttonStyle,
                width: '100%',
                textAlign: 'center',
                textDecoration: 'none',
                display: 'block'
              }}>
                Buy Now
              </a>
            </div>
          ))}
        </div>
      </div>
    </div>
  );

  // About View
  const AboutView = () => (
    <div style={viewStyle}>
      <div style={{ maxWidth: '1000px', margin: '0 auto', padding: '2rem' }}>
        <h1 style={{ color: '#ff3333', marginBottom: '3rem', textAlign: 'center' }}>About Our Founder</h1>
        
        <div style={{ display: 'grid', gridTemplateColumns: '300px 1fr', gap: '3rem', alignItems: 'start' }}>
          <div style={{
            border: '3px solid #ff3333',
            borderRadius: '15px',
            overflow: 'hidden',
            background: '#000'
          }}>
            <img 
              src="zac_mps.jpg" 
              alt="Zac Prizant" 
              style={{
                width: '100%',
                height: 'auto',
                display: 'block',
                objectFit: 'cover'
              }}
            />
          </div>
          
          <div style={{ fontSize: '1.1rem', lineHeight: '1.8', color: '#ccc' }}>
            <h2 style={{ color: '#ff3333', marginBottom: '1rem' }}>Zac Prizant</h2>
            <p style={{ marginBottom: '1rem' }}>
              Zac Prizant is a Cornell University and Cornell SC Johnson School Graduate School of Management alumnus, and elite endurance athlete who ran 3,000 miles across the country with his twin brother from San Francisco to NYC.
            </p>
            <p style={{ marginBottom: '1rem' }}>
              After closing $500M+ in investment banking and private equity deals, Zac managed a portfolio of 60+ hotels, transforming an antiquated eight-hour-per-budget procedure into a seven-minute one.
            </p>
            <p style={{ marginBottom: '1rem' }}>
              He went on to serve as a fractional CFO for businesses in various industries ranging from logistics, to law, entertainment, and tech. He launched Lightning Ledgerz to bring elite budgeting and strategy to the masses.
            </p>
          </div>
        </div>
      </div>
    </div>
  );

  // Contact View
  const ContactView = () => {
    const [contactForm, setContactForm] = useState({
      name: '',
      email: '',
      phone: '',
      message: ''
    });

    const handleContactSubmit = () => {
      if (!contactForm.name || !contactForm.email || !contactForm.message) {
        alert('Please fill in all required fields');
        return;
      }
      
      // Create form data for Formspree
      const formData = new FormData();
      formData.append('name', contactForm.name);
      formData.append('email', contactForm.email);
      formData.append('phone', contactForm.phone);
      formData.append('message', contactForm.message);
      
      // Submit to Formspree
      fetch('https://formspree.io/f/manjdppp', {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => {
        if (response.ok) {
          alert('Message sent successfully! We\'ll get back to you soon.');
          setContactForm({ name: '', email: '', phone: '', message: '' });
        } else {
          alert('There was an error sending your message. Please try again.');
        }
      })
      .catch(error => {
        alert('There was an error sending your message. Please try again.');
      });
    };

    return (
      <div style={viewStyle}>
        <div style={{ maxWidth: '800px', margin: '0 auto', padding: '2rem' }}>
          <h1 style={{ color: '#ff3333', marginBottom: '2rem', textAlign: 'center' }}>Get In Touch</h1>
          
          <div style={{
            background: 'rgba(255, 51, 51, 0.1)',
            padding: '2rem',
            borderRadius: '15px',
            border: '1px solid #ff3333',
            backdropFilter: 'blur(10px)'
          }}>
            <div style={{ marginBottom: '1.5rem' }}>
              <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ff3333', fontWeight: 'bold' }}>
                Name *
              </label>
              <input
                type="text"
                value={contactForm.name}
                onChange={(e) => setContactForm({ ...contactForm, name: e.target.value })}
                style={inputStyle}
                required
              />
            </div>
            
            <div style={{ marginBottom: '1.5rem' }}>
              <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ff3333', fontWeight: 'bold' }}>
                Email *
              </label>
              <input
                type="email"
                value={contactForm.email}
                onChange={(e) => setContactForm({ ...contactForm, email: e.target.value })}
                style={inputStyle}
                required
              />
            </div>
            
            <div style={{ marginBottom: '1.5rem' }}>
              <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ff3333', fontWeight: 'bold' }}>
                Phone
              </label>
              <input
                type="tel"
                value={contactForm.phone}
                onChange={(e) => setContactForm({ ...contactForm, phone: e.target.value })}
                style={inputStyle}
              />
            </div>
            
            <div style={{ marginBottom: '1.5rem' }}>
              <label style={{ display: 'block', marginBottom: '0.5rem', color: '#ff3333', fontWeight: 'bold' }}>
                Message *
              </label>
              <textarea
                value={contactForm.message}
                onChange={(e) => setContactForm({ ...contactForm, message: e.target.value })}
                style={{ ...inputStyle, minHeight: '150px', resize: 'vertical' }}
                required
              />
            </div>
            
            <button 
              onClick={handleContactSubmit}
              style={{ ...buttonStyle, width: '100%', fontSize: '1.1rem' }}
            >
              Send Message
            </button>
          </div>
        </div>
      </div>
    );
  };

  // Auth Modals
  const AuthModal = ({ type }) => (
    <div style={{
      position: 'fixed',
      top: 0,
      left: 0,
      right: 0,
      bottom: 0,
      background: 'rgba(0, 0, 0, 0.9)',
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      zIndex: 9999
    }} onClick={() => {
      setAuthModal(null);
      setAuthForm({ firstName: '', lastName: '', email: '', password: '' });
    }}>
      <div style={{
        background: '#111',
        padding: '2rem',
        borderRadius: '15px',
        border: '2px solid #ff3333',
        maxWidth: '400px',
        width: '90%'
      }} onClick={(e) => e.stopPropagation()}>
        <h2 style={{ color: '#ff3333', marginBottom: '1.5rem', textAlign: 'center' }}>
          {type === 'signup' ? 'Create Account' : 'Sign In'}
        </h2>
        
        <div>
          {type === 'signup' && (
            <>
              <input
                type="text"
                value={authForm.firstName}
                onChange={(e) => setAuthForm({ ...authForm, firstName: e.target.value })}
                placeholder="First Name"
                style={inputStyle}
              />
              <input
                type="text"
                value={authForm.lastName}
                onChange={(e) => setAuthForm({ ...authForm, lastName: e.target.value })}
                placeholder="Last Name"
                style={inputStyle}
              />
            </>
          )}
          <input
            type="email"
            value={authForm.email}
            onChange={(e) => setAuthForm({ ...authForm, email: e.target.value })}
            placeholder="Email"
            style={inputStyle}
          />
          <input
            type="password"
            value={authForm.password}
            onChange={(e) => setAuthForm({ ...authForm, password: e.target.value })}
            placeholder="Password"
            style={inputStyle}
          />
          <button
            onClick={type === 'signup' ? handleSignUp : handleSignIn}
            style={{ ...buttonStyle, width: '100%', marginTop: '1rem' }}
          >
            {type === 'signup' ? 'Create Account' : 'Sign In'}
          </button>
        </div>
        
        <div style={{ textAlign: 'center', marginTop: '1rem' }}>
          <a
            onClick={() => setAuthModal(type === 'signup' ? 'signin' : 'signup')}
            style={{ color: '#ff6666', cursor: 'pointer', textDecoration: 'underline' }}
          >
            {type === 'signup' ? 'Already have an account? Sign in' : "Don't have an account? Sign up"}
          </a>
        </div>
      </div>
    </div>
  );

  // Package Sidebar Component
  const PackageSidebar = () => {
    const [hoveredPackage, setHoveredPackage] = useState(null);
    
    const scrollToServices = () => {
      setCurrentView('services');
      // Small delay to let the view change
      setTimeout(() => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }, 100);
    };
    
    return (
      <div style={{
        position: 'fixed',
        left: '20px',
        bottom: '20px',
        zIndex: 999,
        display: 'flex',
        flexDirection: 'column',
        gap: '1rem'
      }}>
        <button
          onClick={scrollToServices}
          onMouseEnter={() => setHoveredPackage('basic')}
          onMouseLeave={() => setHoveredPackage(null)}
          style={{
            padding: '1rem 1.5rem',
            border: '2px solid #fff',
            background: hoveredPackage === 'basic' ? '#ff3333' : 'rgba(0, 0, 0, 0.8)',
            color: '#fff',
            borderRadius: '25px',
            cursor: 'pointer',
            transition: 'all 0.3s ease',
            fontWeight: 'bold',
            backdropFilter: 'blur(10px)',
            transform: hoveredPackage === 'basic' ? 'translateX(10px)' : 'translateX(0)',
            boxShadow: hoveredPackage === 'basic' ? '0 0 20px #ff3333' : 'none',
            borderColor: hoveredPackage === 'basic' ? '#ff3333' : '#fff'
          }}
        >
          âš¡ Basic Package
        </button>
        
        <button
          onClick={scrollToServices}
          onMouseEnter={() => setHoveredPackage('gold')}
          onMouseLeave={() => setHoveredPackage(null)}
          style={{
            padding: '1rem 1.5rem',
            border: '2px solid #fff',
            background: hoveredPackage === 'gold' ? 'linear-gradient(45deg, #ffd700, #ffed4e)' : 'rgba(0, 0, 0, 0.8)',
            color: hoveredPackage === 'gold' ? '#000' : '#fff',
            borderRadius: '25px',
            cursor: 'pointer',
            transition: 'all 0.3s ease',
            fontWeight: 'bold',
            backdropFilter: 'blur(10px)',
            transform: hoveredPackage === 'gold' ? 'translateX(10px)' : 'translateX(0)',
            boxShadow: hoveredPackage === 'gold' ? '0 0 20px #ffd700' : 'none',
            borderColor: hoveredPackage === 'gold' ? '#ffd700' : '#fff'
          }}
        >
          âœ¨ Gold Package
        </button>
        
        <button
          onClick={scrollToServices}
          onMouseEnter={() => setHoveredPackage('diamond')}
          onMouseLeave={() => setHoveredPackage(null)}
          style={{
            padding: '1rem 1.5rem',
            border: '2px solid #fff',
            background: hoveredPackage === 'diamond' ? 'linear-gradient(45deg, #fff, #e0e0e0)' : 'rgba(0, 0, 0, 0.8)',
            color: hoveredPackage === 'diamond' ? '#000' : '#fff',
            borderRadius: '25px',
            cursor: 'pointer',
            transition: 'all 0.3s ease',
            fontWeight: 'bold',
            backdropFilter: 'blur(10px)',
            transform: hoveredPackage === 'diamond' ? 'translateX(10px)' : 'translateX(0)',
            boxShadow: hoveredPackage === 'diamond' ? '0 0 20px #fff' : 'none',
            borderColor: hoveredPackage === 'diamond' ? '#fff' : '#fff'
          }}
        >
          ðŸ’Ž Diamond Package
        </button>
      </div>
    );
  };

  return (
    <div style={{ background: '#000', color: '#fff', minHeight: '100vh', fontFamily: 'Arial, sans-serif' }}>
      {/* Video Background */}
      <div style={{
        position: 'fixed',
        top: 0,
        left: 0,
        width: '100vw',
        height: '100vh',
        zIndex: -2,
        overflow: 'hidden'
      }}>
        <iframe 
          src="https://streamable.com/e/0ek0up?autoplay=1&nocontrols=1" 
          frameBorder="0" 
          allowFullScreen
          style={{
            position: 'absolute',
            top: '50%',
            left: '50%',
            minWidth: '100vw',
            minHeight: '100vh',
            width: 'auto',
            height: 'auto',
            transform: 'translate(-50%, -50%)',
            opacity: 0.8
          }}
        />
      </div>
      
      {/* Dark Overlay */}
      <div style={{
        position: 'fixed',
        top: 0,
        left: 0,
        width: '100vw',
        height: '100vh',
        background: 'rgba(0, 0, 0, 0.4)',
        zIndex: -1
      }} />
      
      {/* Package Sidebar Buttons */}
      <PackageSidebar />
      
      <Navigation />
      {currentView === 'home' && <HomeView />}
      {currentView === 'dashboard' && <DashboardView />}
      {currentView === 'profile' && <ProfileView />}
      {currentView === 'services' && <ServicesView />}
      {currentView === 'about' && <AboutView />}
      {currentView === 'contact' && <ContactView />}
      {authModal && <AuthModal type={authModal} />}
    </div>
  );
};

const navLinkStyle = {
  color: '#fff',
  cursor: 'pointer',
  fontWeight: '500',
  transition: 'color 0.3s ease'
};

const buttonStyle = {
  background: 'linear-gradient(45deg, #ff3333, #ff6666)',
  color: 'white',
  padding: '0.75rem 1.5rem',
  border: 'none',
  borderRadius: '25px',
  fontWeight: 'bold',
  cursor: 'pointer',
  transition: 'all 0.3s ease',
  fontSize: '1rem'
};

const viewStyle = {
  paddingTop: '80px',
  minHeight: '100vh',
  position: 'relative'
};

const cardStyle = {
  background: 'linear-gradient(135deg, rgba(255, 51, 51, 0.15), rgba(0, 0, 0, 0.95))',
  border: '1px solid #ff3333',
  borderRadius: '15px',
  padding: '2rem',
  backdropFilter: 'blur(10px)'
};

const featureCardStyle = {
  ...cardStyle,
  textAlign: 'center',
  transition: 'all 0.3s ease',
  cursor: 'pointer'
};

const summaryCardStyle = {
  ...cardStyle,
  textAlign: 'center'
};

const chartCardStyle = {
  ...cardStyle,
  gridColumn: 'span 1'
};

const inputStyle = {
  width: '100%',
  padding: '0.75rem',
  marginBottom: '1rem',
  border: '1px solid #333',
  borderRadius: '8px',
  background: '#222',
  color: '#fff',
  fontSize: '1rem'
};

const tableHeaderStyle = {
  padding: '1rem',
  textAlign: 'left',
  color: '#ff3333',
  fontWeight: 'bold'
};

const tableCellStyle = {
  padding: '1rem',
  textAlign: 'left'
};

export default LightningLedgerzPlatform;
